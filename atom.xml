<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>败退长安</title>
  
  <subtitle>长安凉夜春衫薄</subtitle>
  <link href="https://rihiko.github.io/atom.xml" rel="self"/>
  
  <link href="https://rihiko.github.io/"/>
  <updated>2021-01-31T05:38:46.727Z</updated>
  <id>https://rihiko.github.io/</id>
  
  <author>
    <name>Rihiko</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>部署阿里云</title>
    <link href="https://rihiko.github.io/2021/01/30/%E9%83%A8%E7%BD%B2%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    <id>https://rihiko.github.io/2021/01/30/%E9%83%A8%E7%BD%B2%E9%98%BF%E9%87%8C%E4%BA%91/</id>
    <published>2021-01-30T15:09:14.000Z</published>
    <updated>2021-01-31T05:38:46.727Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1、购买域名和服务器"><a href="#1、购买域名和服务器" class="headerlink" title="1、购买域名和服务器"></a>1、购买域名和服务器</h1><h2 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h2><p>域名申请需要1-2天，域名备案需要在域名申请后的2-3天之后提交<br>网站解析是通过将域名指向网站的服务器IP地址，实现网站可访问的服务。</p><h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><p>centos8.2</p><h1 id="2、配置服务器环境"><a href="#2、配置服务器环境" class="headerlink" title="2、配置服务器环境"></a>2、配置服务器环境</h1><p>1、远程连接–客户端–设置root密码Bb928382191<br>2、选择远程连接，启动centos<br>3、su切换至root用户进行安装<br>4、因为hexo需要 nginx 作为服务器，我们可以直使用 yum 命令进行安装<br>yum install -y nginx<br>5、启动服务器<br>systemctl start nginx<br>systemctl enable nginx<br>6、安装成功后centos下边框会显示公网ip，打开公网ip显示nginx则说明安装成功</p><p>CentOS：ECDSA host key “ip地址” for has changed and you have requested strict checking</p><p>北上广不相信眼泪 2019-03-01 11:11:23  2507  收藏 1<br>分类专栏： centos<br>Linux SSH命令错误：ECDSA host key “ip地址” for  has changed and you have requested strict checking.记录下方便记忆。</p><p>解决方案：在终端上输入以下命令：</p><p>ssh-keygen -R “你的远程服务器ip地址”  </p><p>目的是清除你当前机器里关于你的远程服务器的缓存和公钥信息，注意是大写的字母“R”。</p><p>原因分析：根据个人的情况，原因是我的云服务器重装了系统（清除了与我本地SSH连接协议相关信息），本地的SSH信息便失效了，使用SSH连接相同的ip地址时使用的是失效的协议信息，所以会报错，使用上述命令便可以清除known_hosts里旧缓存文件</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1、购买域名和服务器&quot;&gt;&lt;a href=&quot;#1、购买域名和服务器&quot; class=&quot;headerlink&quot; title=&quot;1、购买域名和服务器&quot;&gt;&lt;/a&gt;1、购买域名和服务器&lt;/h1&gt;&lt;h2 id=&quot;域名&quot;&gt;&lt;a href=&quot;#域名&quot; class=&quot;headerli</summary>
      
    
    
    
    
    <category term="website" scheme="https://rihiko.github.io/tags/website/"/>
    
  </entry>
  
  <entry>
    <title>tensorflow搭建人工神经网络</title>
    <link href="https://rihiko.github.io/2021/01/29/tensorflow%E6%90%AD%E5%BB%BA%E4%BA%BA%E5%B7%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
    <id>https://rihiko.github.io/2021/01/29/tensorflow%E6%90%AD%E5%BB%BA%E4%BA%BA%E5%B7%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</id>
    <published>2021-01-29T13:10:14.000Z</published>
    <updated>2021-01-29T13:51:18.353Z</updated>
    
    <content type="html"><![CDATA[<p>2021/1/29<br>人工神经网络通过正向和反向传播来更新神经元，从而形成更好的神经系统<br>输入端–黑盒–输出端<br>输入端为特征，经过神经第一层加工后为代表特征，再经过神经层后，将一种代表特征转化为另一种代表特征</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2021/1/29&lt;br&gt;人工神经网络通过正向和反向传播来更新神经元，从而形成更好的神经系统&lt;br&gt;输入端–黑盒–输出端&lt;br&gt;输入端为特征，经过神经第一层加工后为代表特征，再经过神经层后，将一种代表特征转化为另一种代表特征&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="深度学习" scheme="https://rihiko.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>echarts数据可视化学习</title>
    <link href="https://rihiko.github.io/2021/01/24/ECharts%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    <id>https://rihiko.github.io/2021/01/24/ECharts%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/</id>
    <published>2021-01-24T13:12:14.000Z</published>
    <updated>2021-01-28T13:45:22.846Z</updated>
    
    <content type="html"><![CDATA[<h2 id="可视化面板介绍"><a href="#可视化面板介绍" class="headerlink" title="可视化面板介绍"></a>可视化面板介绍</h2><p>​    应对现在数据可视化的趋势，越来越多企业需要在很多场景(营销数据，生产数据，用户数据)下使用，可视化图表来展示体现数据，让数据更加直观，数据特点更加突出。</p><h3 id="01-使用技术"><a href="#01-使用技术" class="headerlink" title="01-使用技术"></a>01-使用技术</h3><p>完成该项目需要具备以下知识：</p><ul><li>div + css 布局</li><li>flex 布局</li><li>Less</li><li>原生js + jquery 使用</li><li>rem适配</li><li><strong>echarts基础</strong></li></ul><h3 id="02-案例适配方案"><a href="#02-案例适配方案" class="headerlink" title="02- 案例适配方案"></a>02- 案例适配方案</h3><ul><li><p>设计稿是1920px  </p><ol><li><p>flexible.js (添加flexible.js文件实现rem自适应，默认为10等份)现把屏幕分为 24 等份<br>或者  </p></li><li><p>cssrem 插件的基准值是  80px(px:绝对单位，页面按精确像素展示。rem:rem是CSS3新增的一个相对单位（root em，根em），这个单位引起了广泛关注。区别在于使用rem为元素设定字体大小时，仍然是相对大小，但相对的只是HTML根元素,80px=1rem,  像素单位转化为rem单位是为了实现自适应) </p><p>插件-配置按钮—配置扩展设置–Root Font Size 里面 设置。 </p><p>但是别忘记重启vscode软件保证生效</p></li></ol></li></ul><h3 id="03-基础设置"><a href="#03-基础设置" class="headerlink" title="03-基础设置"></a>03-基础设置</h3><ul><li>body 设置背景图 ，缩放为 100%  ， 行高1.15<br>设置完没反应：原因（less文件没有与css文件关联，安装Easy LESS,保存less文件自动生成css文件）</li><li>css初始化<br>在不写repeat与no-repeat的情况下，默认的是平铺</li></ul><h3 id="04-header-布局"><a href="#04-header-布局" class="headerlink" title="04-header 布局"></a>04-header 布局</h3><ul><li>高度为100px</li><li>背景图，在容器内显示</li><li>缩放比例为 100%</li><li>h1 标题部分   白色  38像素 居中显示  行高为 80像素</li><li>时间模块 showTime   定位右侧  right 为 30px   行高为 75px  文字颜色为：rgba(255, 255, 255, 0.7)     而文字大小为 20像素 </li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式： 当前时间：2020年3月17-0时54分14秒</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">            <span class="keyword">var</span> t = <span class="literal">null</span>;</span><br><span class="line">            t = <span class="built_in">setTimeout</span>(time, <span class="number">1000</span>);<span class="comment">//開始运行</span></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">time</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">clearTimeout</span>(t);<span class="comment">//清除定时器</span></span><br><span class="line">                dt = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">                <span class="keyword">var</span> y = dt.getFullYear();</span><br><span class="line">                <span class="keyword">var</span> mt = dt.getMonth() + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">var</span> day = dt.getDate();</span><br><span class="line">                <span class="keyword">var</span> h = dt.getHours();<span class="comment">//获取时</span></span><br><span class="line">                <span class="keyword">var</span> m = dt.getMinutes();<span class="comment">//获取分</span></span><br><span class="line">                <span class="keyword">var</span> s = dt.getSeconds();<span class="comment">//获取秒</span></span><br><span class="line">                <span class="built_in">document</span>.querySelector(<span class="string">&quot;.showTime&quot;</span>).innerHTML = <span class="string">&#x27;当前时间：&#x27;</span> + y + <span class="string">&quot;年&quot;</span> + mt + <span class="string">&quot;月&quot;</span> + day + <span class="string">&quot;-&quot;</span> + h + <span class="string">&quot;时&quot;</span> + m + <span class="string">&quot;分&quot;</span> + s + <span class="string">&quot;秒&quot;</span>;</span><br><span class="line">                t = <span class="built_in">setTimeout</span>(time, <span class="number">1000</span>); <span class="comment">//设定定时器，循环运行     </span></span><br><span class="line">            &#125;</span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>header部分css样式</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1.25rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(../images/head_bg.png) no-repeat top center;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">  h1 &#123;</span><br><span class="line">    <span class="selector-tag">font-size</span>: 0.475<span class="selector-tag">rem</span>;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span><br><span class="line">    <span class="selector-tag">text-align</span>: <span class="selector-tag">center</span>;</span><br><span class="line">    <span class="selector-tag">line-height</span>: 1<span class="selector-tag">rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.showTime</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0.375rem</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">0.9375rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.25rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.7</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="05-mainbox-主体模块"><a href="#05-mainbox-主体模块" class="headerlink" title="05-mainbox  主体模块"></a>05-mainbox  主体模块</h3><ul><li>需要一个上左右的10px 的内边距</li></ul><ul><li>column 列容器，分三列，占比 3：5：3</li></ul><p>css样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mainbox</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.125rem</span> <span class="number">0.125rem</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  .column &#123;</span><br><span class="line">    <span class="selector-tag">flex</span>: 3;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;<span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">5</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="06-公共面板模块-panel"><a href="#06-公共面板模块-panel" class="headerlink" title="06-公共面板模块 panel"></a>06-公共面板模块 panel</h3><ul><li>高度为 310px</li><li>1像素的 1px solid rgba(25, 186, 139, 0.17)  边框</li><li>有line.jpg 背景图片</li><li>padding为  上为 0  左右 15px  下为 40px</li><li>下外边距是 15px</li><li>利用panel  盒子 before 和after 制作上面两个角   大小为 10px  线条为  2px solid #02a6b5</li><li>新加一个盒子before 和after   制作下侧两个角  宽度高度为 10px</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.panel</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">3.875rem</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">186</span>, <span class="number">139</span>, <span class="number">0.17</span>);</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(../images/line\(<span class="number">1</span>\).png);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0.1875rem</span> <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.1875rem</span>;</span><br><span class="line">  &amp;::before &#123;</span><br><span class="line">    <span class="selector-tag">position</span>: <span class="selector-tag">absolute</span>;</span><br><span class="line">    <span class="selector-tag">top</span>: 0;</span><br><span class="line">    <span class="selector-tag">left</span>: 0;</span><br><span class="line">    <span class="selector-tag">content</span>: &quot;&quot;;</span><br><span class="line">    <span class="selector-tag">width</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">    <span class="selector-tag">height</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">    <span class="selector-tag">border-top</span>: 2<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#02a6b5</span>;</span><br><span class="line">    <span class="selector-tag">border-left</span>: 2<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#02a6b5</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">2px</span> solid <span class="number">#02a6b5</span>;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">2px</span> solid <span class="number">#02a6b5</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.panel-footer</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    &amp;::before &#123;</span><br><span class="line">      <span class="selector-tag">position</span>: <span class="selector-tag">absolute</span>;</span><br><span class="line">      <span class="selector-tag">bottom</span>: 0;</span><br><span class="line">      <span class="selector-tag">left</span>: 0;</span><br><span class="line">      <span class="selector-tag">content</span>: &quot;&quot;;</span><br><span class="line">      <span class="selector-tag">width</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">      <span class="selector-tag">height</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">      <span class="selector-tag">border-bottom</span>: 2<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#02a6b5</span>;</span><br><span class="line">      <span class="selector-tag">border-left</span>: 2<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#02a6b5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">      <span class="attribute">border-bottom</span>: <span class="number">2px</span> solid <span class="number">#02a6b5</span>;</span><br><span class="line">      <span class="attribute">border-right</span>: <span class="number">2px</span> solid <span class="number">#02a6b5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="07-柱形图-bar-模块-布局"><a href="#07-柱形图-bar-模块-布局" class="headerlink" title="07-柱形图 bar 模块(布局)"></a>07-柱形图 bar 模块(布局)</h3><ul><li><p>标题模块  h2    高度为 48px   文字颜色为白色  文字大小为  20px  </p></li><li><p>图标内容模块  chart   高度 240px </p></li><li><p>以上可以作为panel公共样式部分 </p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0.6rem</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">0.6rem</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.chart</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">3rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="08-中间布局"><a href="#08-中间布局" class="headerlink" title="08-中间布局"></a>08-中间布局</h3><ul><li>上面是no 数字模块</li><li>下面是map 地图模块</li></ul><ol><li>数字模块 no  有个背景颜色  rgba(101, 132, 226, 0.1);  有个15像素的内边距</li><li>注意中间列 column 有个 左右 10px 下 15px 的外边距</li><li>no 模块里面上下划分  上面是数字（no-hd)   下面 是 相关文字说明(no-bd)</li><li>no-hd 数字模块   有一个边框 1px solid rgba(25, 186, 139, 0.17)    </li><li>no-hd 数字模块 里面分为两个小li  每个小li高度为 80px   文字大小为   70px   颜色为 #ffeb7b   字体是图标字体  electronicFont</li><li>no-hd 利用 after 和 before制作2个小角，  边框  2px solid #02a6b5  宽度为 30px  高度为 10px</li><li>小竖线 给 第一个小li after 就可以  1px宽 背景颜色为 rgba(255, 255, 255, 0.2);     高度 50%  top 25% 即可</li><li>no-bd 里面也有两个小li  高度为 40px   文字颜色为  rgba(255, 255, 255, 0.7)   文字大小为 18px   上内边距为  10px</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 声明字体*/</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: electronicFont;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(../font/DS-DIGIT.TTF);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>地图模块制作：</p><ol><li>地图模块高度为 810px  里面包含4个盒子  chart 放图表模块      球体盒子  旋转1  旋转2  </li><li>球体图片模块 map1    大小为 518px  要加背景图片 因为要缩放100%     定位到最中央    透明度 .3   </li><li>旋转1  map 2    大小为 643px 要加背景图片 因为要缩放100%    定位到中央  透明度  .6   做旋转动画   利用z-index压住球体</li><li>旋转2  map3  大小为 566px  要加背景图片 因为要缩放100%    定位到中央 旋转动画 注意是逆时针 </li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;no&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;no-hd&quot;</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">li</span>&gt;</span>125811<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">li</span>&gt;</span>104563<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;no-bd&quot;</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">li</span>&gt;</span>前端需求人数<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">li</span>&gt;</span>市场供应人数<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;chart&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;map1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;map2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;map3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>中间样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 声明字体*/</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: electronicFont;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(../font/DS-DIGIT.TTF);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.no</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">101</span>, <span class="number">132</span>, <span class="number">226</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.1875rem</span>;</span><br><span class="line">  .no-hd &#123;</span><br><span class="line">    <span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</span><br><span class="line">    <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">rgba</span>(25, 186, 139, 0.17);</span><br><span class="line">    &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">      <span class="attribute">border-top</span>: <span class="number">2px</span> solid <span class="number">#02a6b5</span>;</span><br><span class="line">      <span class="attribute">border-left</span>: <span class="number">2px</span> solid <span class="number">#02a6b5</span>;</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">      <span class="attribute">border-bottom</span>: <span class="number">2px</span> solid <span class="number">#02a6b5</span>;</span><br><span class="line">      <span class="attribute">border-right</span>: <span class="number">2px</span> solid <span class="number">#02a6b5</span>;</span><br><span class="line">      <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">ul</span> &#123;</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">      li &#123;</span><br><span class="line">        <span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</span><br><span class="line">        <span class="selector-tag">flex</span>: 1;</span><br><span class="line">        <span class="selector-tag">text-align</span>: <span class="selector-tag">center</span>;</span><br><span class="line">        <span class="selector-tag">height</span>: 1<span class="selector-tag">rem</span>;</span><br><span class="line">        <span class="selector-tag">line-height</span>: 1<span class="selector-tag">rem</span>;</span><br><span class="line">        <span class="selector-tag">font-size</span>: 0.875<span class="selector-tag">rem</span>;</span><br><span class="line">        <span class="selector-tag">color</span>: <span class="selector-id">#ffeb7b</span>;</span><br><span class="line">        <span class="selector-tag">padding</span>: 0.05<span class="selector-tag">rem</span> 0;</span><br><span class="line">        <span class="selector-tag">font-family</span>: <span class="selector-tag">electronicFont</span>;</span><br><span class="line">        <span class="selector-tag">font-weight</span>: <span class="selector-tag">bold</span>;</span><br><span class="line">        &amp;<span class="selector-pseudo">:first-child</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">          <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">          <span class="attribute">position</span>: absolute;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">50%</span>;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">          <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span><br><span class="line">          <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">          <span class="attribute">top</span>: <span class="number">25%</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.no-bd</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    li &#123;</span><br><span class="line">      <span class="selector-tag">flex</span>: 1;</span><br><span class="line">      <span class="selector-tag">height</span>: 0.5<span class="selector-tag">rem</span>;</span><br><span class="line">      <span class="selector-tag">line-height</span>: 0.5<span class="selector-tag">rem</span>;</span><br><span class="line">      <span class="selector-tag">text-align</span>: <span class="selector-tag">center</span>;</span><br><span class="line">      <span class="selector-tag">font-size</span>: 0.225<span class="selector-tag">rem</span>;</span><br><span class="line">      <span class="selector-tag">color</span>: <span class="selector-tag">rgba</span>(255, 255, 255, 0.7);</span><br><span class="line">      <span class="selector-tag">padding-top</span>: 0.125<span class="selector-tag">rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.map</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10.125rem</span>;</span><br><span class="line">  .chart &#123;</span><br><span class="line">    <span class="selector-tag">position</span>: <span class="selector-tag">absolute</span>;</span><br><span class="line">    <span class="selector-tag">top</span>: 0;</span><br><span class="line">    <span class="selector-tag">left</span>: 0;</span><br><span class="line">    <span class="selector-tag">z-index</span>: 5;</span><br><span class="line">    <span class="selector-tag">height</span>: 10.125<span class="selector-tag">rem</span>;</span><br><span class="line">    <span class="selector-tag">width</span>: 100%;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.map1</span>,</span><br><span class="line">  <span class="selector-class">.map2</span>,</span><br><span class="line">  <span class="selector-class">.map3</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">6.475rem</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">6.475rem</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(../images/map.png) no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.map2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">8.0375rem</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">8.0375rem</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/lbx.png);</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">animation</span>: rotate <span class="number">15s</span> linear infinite;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.map3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">7.075rem</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">7.075rem</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/jt.png);</span><br><span class="line">    <span class="attribute">animation</span>: rotate1 <span class="number">10s</span> linear infinite;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@keyframes</span> rotate &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@keyframes</span> rotate1 &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(-<span class="number">360deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="09-Echarts-介绍"><a href="#09-Echarts-介绍" class="headerlink" title="09-Echarts-介绍"></a>09-Echarts-介绍</h3><p>常见的数据可视化库：</p><ul><li>D3.js   目前 Web 端评价最高的 Javascript 可视化工具库(入手难)  </li><li>ECharts.js   百度出品的一个开源 Javascript 数据可视化库   </li><li>Highcharts.js  国外的前端数据可视化库，非商用免费，被许多国外大公司所使用  </li><li>AntV  蚂蚁金服全新一代数据可视化解决方案  等等</li><li>Highcharts 和 Echarts 就像是 Office 和 WPS 的关系</li></ul><blockquote><p>ECharts，一个使用 JavaScript 实现的开源可视化库，可以流畅的运行在 PC 和移动设备上，兼容当前绝大部分浏览器（IE8/9/10/11，Chrome，Firefox，Safari等），底层依赖矢量图形库 <a href="https://github.com/ecomfe/zrender">ZRender</a>，提供直观，交互丰富，可高度个性化定制的数据可视化图表。</p></blockquote><p>大白话：</p><ul><li>是一个JS插件</li><li>性能好可流畅运行PC与移动设备</li><li>兼容主流浏览器</li><li>提供很多常用图表，且可<strong>定制</strong>。<ul><li><a href="https://www.echartsjs.com/zh/option.html#series-line">折线图</a>、<a href="https://www.echartsjs.com/zh/option.html#series-bar">柱状图</a>、<a href="https://www.echartsjs.com/zh/option.html#series-scatter">散点图</a>、<a href="https://www.echartsjs.com/zh/option.html#series-pie">饼图</a>、<a href="https://www.echartsjs.com/zh/option.html#series-candlestick">K线图</a></li></ul></li></ul><p>官网地址：<a href="https://www.echartsjs.com/zh/index.html">https://www.echartsjs.com/zh/index.html</a></p><h3 id="10-Echarts-体验"><a href="#10-Echarts-体验" class="headerlink" title="10-Echarts-体验"></a>10-Echarts-体验</h3><p>官方教程：[五分钟上手ECharts](<a href="https://www.echartsjs.com/zh/tutorial.html#5">https://www.echartsjs.com/zh/tutorial.html#5</a> 分钟上手 ECharts)</p><ul><li>下载echarts  <a href="https://github.com/apache/incubator-echarts/tree/4.5.0">https://github.com/apache/incubator-echarts/tree/4.5.0</a>  </li></ul><p>使用步骤：</p><ol><li>引入echarts 插件文件到html页面中(图表依赖于这个js库)</li><li>准备一个具备大小的DOM容器(这个盒子必须有宽度和高度)</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 600px;height:400px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li> 初始化echarts实例对象–实例化echarts对象</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myChart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;main&#x27;</span>));</span><br></pre></td></tr></table></figure><ol start="4"><li>指定配置项和数据(option)–让echarts对象根据修改好的配置生效</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> option = &#123;</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        type: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">        data: [<span class="string">&#x27;Mon&#x27;</span>, <span class="string">&#x27;Tue&#x27;</span>, <span class="string">&#x27;Wed&#x27;</span>, <span class="string">&#x27;Thu&#x27;</span>, <span class="string">&#x27;Fri&#x27;</span>, <span class="string">&#x27;Sat&#x27;</span>, <span class="string">&#x27;Sun&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;</span><br><span class="line">        type: <span class="string">&#x27;value&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    series: [&#123;</span><br><span class="line">        data: [<span class="number">820</span>, <span class="number">932</span>, <span class="number">901</span>, <span class="number">934</span>, <span class="number">1290</span>, <span class="number">1330</span>, <span class="number">1320</span>],</span><br><span class="line">        type: <span class="string">&#x27;line&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="5"><li>将配置项设置给echarts实例对象</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myChart.setOption(option);</span><br></pre></td></tr></table></figure><h3 id="11-Echarts-基础配置"><a href="#11-Echarts-基础配置" class="headerlink" title="11-Echarts-基础配置"></a>11-Echarts-基础配置</h3><p>立即执行函数妙用：为了防止变量污染，减少命名冲突，我们可以采取立即执行函数的写法，因为里面的变量都是局部变量<br>//柱状图1<br>(function(){<br>    var myChart = echarts.init(document.querySelector(‘.bar .chart’));<br>})();</p><p>这是要求同学们知道以下配置每个模块的主要作用干什么的就可以了</p><blockquote><p>需要了解的主要配置：<code>series</code> <code>xAxis</code> <code>yAxis</code> <code>grid</code> <code>tooltip</code> <code>title</code> <code>legend</code> <code>color</code> </p></blockquote><ul><li><p>series</p><ul><li>系列列表。每个系列通过 <code>type</code> 决定自己的图表类型</li><li>大白话：图标数据，指定什么类型的图标，可以多个图表重叠。</li></ul></li><li><p>xAxis：直角坐标系 grid 中的 x 轴</p><ul><li>boundaryGap: 坐标轴两边留白策略 true，这时候刻度只是作为分隔线，标签和数据点都会在两个刻度之间的带(band)中间。</li></ul></li><li><p>yAxis：直角坐标系 grid 中的 y 轴</p></li><li><p>grid：直角坐标系内绘图网格。 </p></li><li><p>title：标题组件</p></li><li><p>tooltip：图表提示框组件</p></li><li><p>legend：图例组件</p></li><li><p>color：调色盘颜色列表</p><p>数据堆叠，同个类目轴上系列配置相同的<code>stack</code>值后 后一个系列的值会在前一个系列的值上相加。</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">option = &#123;</span><br><span class="line">    <span class="comment">// color设置我们线条的颜色 注意后面是个数组</span></span><br><span class="line">    color: [<span class="string">&#x27;pink&#x27;</span>, <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;skyblue&#x27;</span>],</span><br><span class="line">    <span class="comment">// 设置图表的标题</span></span><br><span class="line">    title: &#123;</span><br><span class="line">        text: <span class="string">&#x27;折线图堆叠123&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 图表的提示框组件 </span></span><br><span class="line">    tooltip: &#123;</span><br><span class="line">        <span class="comment">// 触发方式</span></span><br><span class="line">        trigger: <span class="string">&#x27;axis&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 图例组件</span></span><br><span class="line">    legend: &#123;</span><br><span class="line">       <span class="comment">// series里面有了 name值则 legend里面的data可以删掉</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 网格配置  grid可以控制线形图 柱状图 图表大小</span></span><br><span class="line">    grid: &#123;</span><br><span class="line">        left: <span class="string">&#x27;3%&#x27;</span>,</span><br><span class="line">        right: <span class="string">&#x27;4%&#x27;</span>,</span><br><span class="line">        bottom: <span class="string">&#x27;3%&#x27;</span>,</span><br><span class="line">        <span class="comment">// 是否显示刻度标签 如果是true 就显示 否则反之</span></span><br><span class="line">        containLabel: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 工具箱组件  可以另存为图片等功能</span></span><br><span class="line">    toolbox: &#123;</span><br><span class="line">        feature: &#123;</span><br><span class="line">            saveAsImage: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 设置x轴的相关配置</span></span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        type: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">        <span class="comment">// 是否让我们的线条和坐标轴有缝隙</span></span><br><span class="line">        boundaryGap: <span class="literal">false</span>,</span><br><span class="line">        data: [<span class="string">&#x27;星期一&#x27;</span>, <span class="string">&#x27;周二&#x27;</span>, <span class="string">&#x27;周三&#x27;</span>, <span class="string">&#x27;周四&#x27;</span>, <span class="string">&#x27;周五&#x27;</span>, <span class="string">&#x27;周六&#x27;</span>, <span class="string">&#x27;周日&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">     <span class="comment">// 设置y轴的相关配置</span></span><br><span class="line">    yAxis: &#123;</span><br><span class="line">        type: <span class="string">&#x27;value&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 系列图表配置 它决定着显示那种类型的图表</span></span><br><span class="line">    series: [</span><br><span class="line">        &#123;</span><br><span class="line">            name: <span class="string">&#x27;邮件营销&#x27;</span>,</span><br><span class="line">            type: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">           </span><br><span class="line">            data: [<span class="number">120</span>, <span class="number">132</span>, <span class="number">101</span>, <span class="number">134</span>, <span class="number">90</span>, <span class="number">230</span>, <span class="number">210</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            name: <span class="string">&#x27;联盟广告&#x27;</span>,</span><br><span class="line">            type: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line"></span><br><span class="line">            data: [<span class="number">220</span>, <span class="number">182</span>, <span class="number">191</span>, <span class="number">234</span>, <span class="number">290</span>, <span class="number">330</span>, <span class="number">310</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            name: <span class="string">&#x27;视频广告&#x27;</span>,</span><br><span class="line">            type: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">          </span><br><span class="line">            data: [<span class="number">150</span>, <span class="number">232</span>, <span class="number">201</span>, <span class="number">154</span>, <span class="number">190</span>, <span class="number">330</span>, <span class="number">410</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            name: <span class="string">&#x27;直接访问&#x27;</span>,</span><br><span class="line">            type: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">          </span><br><span class="line">            data: [<span class="number">320</span>, <span class="number">332</span>, <span class="number">301</span>, <span class="number">334</span>, <span class="number">390</span>, <span class="number">330</span>, <span class="number">320</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="12-柱状图图表（两大步骤）"><a href="#12-柱状图图表（两大步骤）" class="headerlink" title="12- 柱状图图表（两大步骤）"></a>12- 柱状图图表（两大步骤）</h3><ul><li>官网找到类似实例， 适当分析，并且引入到HTML页面中</li><li>根据需求定制图表</li></ul><ol><li>引入到html页面中</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 柱状图1模块</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 实例化对象</span></span><br><span class="line">  <span class="keyword">let</span> myChart = echarts.init(<span class="built_in">document</span>.querySelector(<span class="string">&quot;.bar .chart&quot;</span>));</span><br><span class="line">  <span class="comment">// 指定配置和数据</span></span><br><span class="line">  <span class="keyword">let</span> option = &#123;</span><br><span class="line">    color: [<span class="string">&quot;#3398DB&quot;</span>],</span><br><span class="line">    tooltip: &#123;</span><br><span class="line">      trigger: <span class="string">&quot;axis&quot;</span>,</span><br><span class="line">      axisPointer: &#123;</span><br><span class="line">        <span class="comment">// 坐标轴指示器，坐标轴触发有效</span></span><br><span class="line">        type: <span class="string">&quot;shadow&quot;</span> <span class="comment">// 默认为直线，可选为：&#x27;line&#x27; | &#x27;shadow&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    grid: &#123;</span><br><span class="line">      left: <span class="string">&quot;3%&quot;</span>,</span><br><span class="line">      right: <span class="string">&quot;4%&quot;</span>,</span><br><span class="line">      bottom: <span class="string">&quot;3%&quot;</span>,</span><br><span class="line">      containLabel: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    xAxis: [</span><br><span class="line">      &#123;</span><br><span class="line">        type: <span class="string">&quot;category&quot;</span>,</span><br><span class="line">        data: [<span class="string">&quot;Mon&quot;</span>, <span class="string">&quot;Tue&quot;</span>, <span class="string">&quot;Wed&quot;</span>, <span class="string">&quot;Thu&quot;</span>, <span class="string">&quot;Fri&quot;</span>, <span class="string">&quot;Sat&quot;</span>, <span class="string">&quot;Sun&quot;</span>],</span><br><span class="line">        axisTick: &#123;</span><br><span class="line">          alignWithLabel: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    yAxis: [</span><br><span class="line">      &#123;</span><br><span class="line">        type: <span class="string">&quot;value&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    series: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">&quot;直接访问&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">        barWidth: <span class="string">&quot;60%&quot;</span>,</span><br><span class="line">        data: [<span class="number">10</span>, <span class="number">52</span>, <span class="number">200</span>, <span class="number">334</span>, <span class="number">390</span>, <span class="number">330</span>, <span class="number">220</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 把配置给实例对象</span></span><br><span class="line">  myChart.setOption(option);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><ol start="2"><li><p>根据需求定制</p><ul><li>修改图表柱形颜色  #2f89cf</li></ul></li></ol><ul><li><p>修改图表大小  top 为 10px   bottom 为  4%    grid决定我们的柱状图的大小</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">color: [<span class="string">&quot;#2f89cf&quot;</span>],</span><br><span class="line">grid: &#123;</span><br><span class="line">  left: <span class="string">&quot;0%&quot;</span>,</span><br><span class="line">  top: <span class="string">&quot;10px&quot;</span>,</span><br><span class="line">  right: <span class="string">&quot;0%&quot;</span>,</span><br><span class="line">  bottom: <span class="string">&quot;4%&quot;</span>,</span><br><span class="line">  containLabel: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>X轴相关设置  xAxis</p><ul><li>文本颜色设置为   rgba(255,255,255,.6)   字体大小为 12px</li><li>X轴线的样式 不显示</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 设置x轴标签文字样式</span></span><br><span class="line"><span class="comment">// x轴的文字颜色和大小</span></span><br><span class="line">      axisLabel: &#123;</span><br><span class="line">        color: <span class="string">&quot;rgba(255,255,255,.6)&quot;</span>,</span><br><span class="line">        fontSize: <span class="string">&quot;12&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line"> <span class="comment">//  x轴样式不显示</span></span><br><span class="line"> axisLine: &#123;</span><br><span class="line">     show: <span class="literal">false</span></span><br><span class="line">     <span class="comment">// 如果想要设置单独的线条样式 </span></span><br><span class="line">     <span class="comment">// lineStyle: &#123;</span></span><br><span class="line">     <span class="comment">//    color: &quot;rgba(255,255,255,.1)&quot;,</span></span><br><span class="line">     <span class="comment">//    width: 1,</span></span><br><span class="line">     <span class="comment">//    type: &quot;solid&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li><li><p>Y 轴相关定制</p><ul><li>文本颜色设置为   rgba(255,255,255,.6)   字体大小为 12px</li><li>Y 轴线条样式 更改为  1像素的  rgba(255,255,255,.1) 边框</li><li>分隔线的颜色修饰为  1像素的  rgba(255,255,255,.1)   </li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// y 轴文字标签样式</span></span><br><span class="line">axisLabel: &#123;</span><br><span class="line">      color: <span class="string">&quot;rgba(255,255,255,.6)&quot;</span>,</span><br><span class="line">       fontSize: <span class="string">&quot;12&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"> <span class="comment">// y轴线条样式</span></span><br><span class="line"> axisLine: &#123;</span><br><span class="line">      lineStyle: &#123;</span><br><span class="line">         color: <span class="string">&quot;rgba(255,255,255,.1)&quot;</span>,</span><br><span class="line">         <span class="comment">// width: 1,</span></span><br><span class="line">         <span class="comment">// type: &quot;solid&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="number">5232</span>&#125;,</span><br><span class="line"> <span class="comment">// y 轴分隔线样式</span></span><br><span class="line">splitLine: &#123;</span><br><span class="line">    lineStyle: &#123;</span><br><span class="line">       color: <span class="string">&quot;rgba(255,255,255,.1)&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>修改柱形为圆角以及柱子宽度  series 里面设置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">series: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">&quot;直接访问&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">        <span class="comment">// 修改柱子宽度</span></span><br><span class="line">        barWidth: <span class="string">&quot;35%&quot;</span>,</span><br><span class="line">        data: [<span class="number">10</span>, <span class="number">52</span>, <span class="number">200</span>, <span class="number">334</span>, <span class="number">390</span>, <span class="number">330</span>, <span class="number">220</span>],</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          <span class="comment">// 修改柱子圆角</span></span><br><span class="line">          barBorderRadius: <span class="number">5</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure></li><li><p>更换对应数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// x轴中更换data数据</span></span><br><span class="line"> data: [ <span class="string">&quot;旅游行业&quot;</span>,<span class="string">&quot;教育培训&quot;</span>, <span class="string">&quot;游戏行业&quot;</span>, <span class="string">&quot;医疗行业&quot;</span>, <span class="string">&quot;电商行业&quot;</span>, <span class="string">&quot;社交行业&quot;</span>, <span class="string">&quot;金融行业&quot;</span> ],</span><br><span class="line"><span class="comment">// series 更换数据</span></span><br><span class="line"> data: [<span class="number">200</span>, <span class="number">300</span>, <span class="number">300</span>, <span class="number">900</span>, <span class="number">1500</span>, <span class="number">1200</span>, <span class="number">600</span>]</span><br></pre></td></tr></table></figure></li><li><p>让图表跟随屏幕自适应</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  myChart.resize();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="13-柱状图2定制"><a href="#13-柱状图2定制" class="headerlink" title="13-柱状图2定制"></a>13-柱状图2定制</h3><ul><li>官网找到类似实例， 适当分析，并且引入到HTML页面中</li><li>根据需求定制图表</li></ul><p>需求1： 修改图形大小 grid</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图标位置</span></span><br><span class="line">  grid: &#123;</span><br><span class="line">    top: <span class="string">&quot;10%&quot;</span>,</span><br><span class="line">    left: <span class="string">&quot;22%&quot;</span>,</span><br><span class="line">    bottom: <span class="string">&quot;10%&quot;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>需求2： 不显示x轴 </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xAxis: &#123;</span><br><span class="line">   show: <span class="literal">false</span></span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><p>需求3： y轴相关定制</p><ul><li>不显示y轴线和相关刻度</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不显示y轴线条</span></span><br><span class="line">axisLine: &#123;</span><br><span class="line">    show: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="comment">// 不显示刻度</span></span><br><span class="line">axisTick: &#123;</span><br><span class="line">   show: <span class="literal">false</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>y轴文字的颜色设置为白色</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axisLabel: &#123;</span><br><span class="line">       color: <span class="string">&quot;#fff&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>需求4： 修改第一组柱子相关样式（条状）<br>红色保持不变，黑色变为红色的框，采用定位定到第一个柱子</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">name: <span class="string">&quot;条&quot;</span>,</span><br><span class="line"><span class="comment">// 柱子之间的距离</span></span><br><span class="line">barCategoryGap: <span class="number">50</span>,</span><br><span class="line"><span class="comment">//柱子的宽度</span></span><br><span class="line">barWidth: <span class="number">10</span>,</span><br><span class="line"><span class="comment">// 柱子设为圆角</span></span><br><span class="line">itemStyle: &#123;</span><br><span class="line">    normal: &#123;</span><br><span class="line">      barBorderRadius: <span class="number">20</span>,       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>设置第一组柱子内百分比显示数据</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图形上的文本标签</span></span><br><span class="line">label: &#123;</span><br><span class="line">    normal: &#123;</span><br><span class="line">         show: <span class="literal">true</span>,</span><br><span class="line">         <span class="comment">// 图形内显示</span></span><br><span class="line">         position: <span class="string">&quot;inside&quot;</span>,</span><br><span class="line">         <span class="comment">// 文字的显示格式</span></span><br><span class="line">         formatter: <span class="string">&quot;&#123;c&#125;%&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>设置第一组柱子不同颜色</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明颜色数组</span></span><br><span class="line"><span class="keyword">var</span> myColor = [<span class="string">&quot;#1089E7&quot;</span>, <span class="string">&quot;#F57474&quot;</span>, <span class="string">&quot;#56D0E3&quot;</span>, <span class="string">&quot;#F8B448&quot;</span>, <span class="string">&quot;#8B78F6&quot;</span>];</span><br><span class="line"><span class="comment">// 2. 给 itemStyle  里面的color 属性设置一个 返回值函数</span></span><br><span class="line">  itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            barBorderRadius: <span class="number">20</span>,  </span><br><span class="line">            <span class="comment">// params 传进来的是柱子对象</span></span><br><span class="line">            <span class="comment">//console.log(params);</span></span><br><span class="line">            <span class="comment">// dataIndex 是当前柱子的索引号</span></span><br><span class="line">            <span class="keyword">return</span> myColor[params.dataIndex];</span><br><span class="line">          &#125;</span><br><span class="line">         </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>需求5： 修改第二组柱子的相关配置（框状）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> name: <span class="string">&quot;框&quot;</span>,</span><br><span class="line">  type: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">  barCategoryGap: <span class="number">50</span>,</span><br><span class="line">  barWidth: <span class="number">15</span>,</span><br><span class="line">  itemStyle: &#123;</span><br><span class="line">      color: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">      borderColor: <span class="string">&quot;#00c1de&quot;</span>,</span><br><span class="line">      borderWidth: <span class="number">3</span>,</span><br><span class="line">      barBorderRadius: <span class="number">15</span></span><br><span class="line">  &#125;,</span><br><span class="line">  data: [<span class="number">19325</span>, <span class="number">23438</span>, <span class="number">31000</span>, <span class="number">121594</span>, <span class="number">134141</span>, <span class="number">681807</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需求6： 给y轴添加第二组数据<br>y轴中两组对象，series中也是两种对象，他们一一对应</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">yAxis: [</span><br><span class="line">      &#123;</span><br><span class="line">      type: <span class="string">&quot;category&quot;</span>,</span><br><span class="line">      data: [<span class="string">&quot;印尼&quot;</span>, <span class="string">&quot;美国&quot;</span>, <span class="string">&quot;印度&quot;</span>, <span class="string">&quot;中国&quot;</span>, <span class="string">&quot;世界人口(万)&quot;</span>],</span><br><span class="line">      <span class="comment">// 不显示y轴的线</span></span><br><span class="line">      axisLine: &#123;</span><br><span class="line">        show: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 不显示刻度</span></span><br><span class="line">      axisTick: &#123;</span><br><span class="line">        show: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 把刻度标签里面的文字颜色设置为白色</span></span><br><span class="line">      axisLabel: &#123;</span><br><span class="line">        color: <span class="string">&quot;#fff&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        show: <span class="literal">true</span>,</span><br><span class="line">        data: [<span class="number">702</span>, <span class="number">350</span>, <span class="number">610</span>, <span class="number">793</span>, <span class="number">664</span>],</span><br><span class="line">           <span class="comment">// 不显示y轴的线</span></span><br><span class="line">      axisLine: &#123;</span><br><span class="line">        show: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 不显示刻度</span></span><br><span class="line">      axisTick: &#123;</span><br><span class="line">        show: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">        axisLabel: &#123;</span><br><span class="line">          textStyle: &#123;</span><br><span class="line">            fontSize: <span class="number">12</span>,</span><br><span class="line">            color: <span class="string">&quot;#fff&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure><p>需求7： 设置两组柱子层叠以及更换数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 给series  第一个对象里面的 添加 </span></span><br><span class="line">yAxisIndex: <span class="number">0</span>,</span><br><span class="line"><span class="comment">// 给series  第二个对象里面的 添加 </span></span><br><span class="line">yAxisIndex: <span class="number">1</span>,</span><br><span class="line"><span class="comment">// series 第一个对象里面的data</span></span><br><span class="line">data: [<span class="number">70</span>, <span class="number">34</span>, <span class="number">60</span>, <span class="number">78</span>, <span class="number">69</span>],</span><br><span class="line"><span class="comment">// series 第二个对象里面的data</span></span><br><span class="line">data: [<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>],</span><br><span class="line"><span class="comment">// y轴更换第一个对象更换data数据</span></span><br><span class="line">data: [<span class="string">&quot;HTML5&quot;</span>, <span class="string">&quot;CSS3&quot;</span>, <span class="string">&quot;javascript&quot;</span>, <span class="string">&quot;VUE&quot;</span>, <span class="string">&quot;NODE&quot;</span>],</span><br><span class="line"><span class="comment">// y轴更换第二个对象更换data数据</span></span><br><span class="line">data:[<span class="number">702</span>, <span class="number">350</span>, <span class="number">610</span>, <span class="number">793</span>, <span class="number">664</span>],</span><br></pre></td></tr></table></figure><p>完整代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 柱状图2</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> myColor = [<span class="string">&quot;#1089E7&quot;</span>, <span class="string">&quot;#F57474&quot;</span>, <span class="string">&quot;#56D0E3&quot;</span>, <span class="string">&quot;#F8B448&quot;</span>, <span class="string">&quot;#8B78F6&quot;</span>];</span><br><span class="line">  <span class="comment">// 1. 实例化对象</span></span><br><span class="line">  <span class="keyword">var</span> myChart = echarts.init(<span class="built_in">document</span>.querySelector(<span class="string">&quot;.bar2 .chart&quot;</span>));</span><br><span class="line">  <span class="comment">// 2. 指定配置和数据</span></span><br><span class="line">  <span class="keyword">var</span> option = &#123;</span><br><span class="line">    grid: &#123;</span><br><span class="line">      top: <span class="string">&quot;10%&quot;</span>,</span><br><span class="line">      left: <span class="string">&quot;22%&quot;</span>,</span><br><span class="line">      bottom: <span class="string">&quot;10%&quot;</span></span><br><span class="line">      <span class="comment">// containLabel: true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 不显示x轴的相关信息</span></span><br><span class="line">    xAxis: &#123;</span><br><span class="line">      show: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: [</span><br><span class="line">      &#123;</span><br><span class="line">        type: <span class="string">&quot;category&quot;</span>,</span><br><span class="line">        inverse: <span class="literal">true</span>,</span><br><span class="line">        data: [<span class="string">&quot;HTML5&quot;</span>, <span class="string">&quot;CSS3&quot;</span>, <span class="string">&quot;javascript&quot;</span>, <span class="string">&quot;VUE&quot;</span>, <span class="string">&quot;NODE&quot;</span>],</span><br><span class="line">        <span class="comment">// 不显示y轴的线</span></span><br><span class="line">        axisLine: &#123;</span><br><span class="line">          show: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 不显示刻度</span></span><br><span class="line">        axisTick: &#123;</span><br><span class="line">          show: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 把刻度标签里面的文字颜色设置为白色</span></span><br><span class="line">        axisLabel: &#123;</span><br><span class="line">          color: <span class="string">&quot;#fff&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        data: [<span class="number">702</span>, <span class="number">350</span>, <span class="number">610</span>, <span class="number">793</span>, <span class="number">664</span>],</span><br><span class="line">        inverse: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 不显示y轴的线</span></span><br><span class="line">        axisLine: &#123;</span><br><span class="line">          show: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 不显示刻度</span></span><br><span class="line">        axisTick: &#123;</span><br><span class="line">          show: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 把刻度标签里面的文字颜色设置为白色</span></span><br><span class="line">        axisLabel: &#123;</span><br><span class="line">          color: <span class="string">&quot;#fff&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    series: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">&quot;条&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">        data: [<span class="number">70</span>, <span class="number">34</span>, <span class="number">60</span>, <span class="number">78</span>, <span class="number">69</span>],</span><br><span class="line">        yAxisIndex: <span class="number">0</span>,</span><br><span class="line">        <span class="comment">// 修改第一组柱子的圆角</span></span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          barBorderRadius: <span class="number">20</span>,</span><br><span class="line">          <span class="comment">// 此时的color 可以修改柱子的颜色</span></span><br><span class="line">          color: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// params 传进来的是柱子对象</span></span><br><span class="line">            <span class="built_in">console</span>.log(params);</span><br><span class="line">            <span class="comment">// dataIndex 是当前柱子的索引号</span></span><br><span class="line">            <span class="keyword">return</span> myColor[params.dataIndex];</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 柱子之间的距离</span></span><br><span class="line">        barCategoryGap: <span class="number">50</span>,</span><br><span class="line">        <span class="comment">//柱子的宽度</span></span><br><span class="line">        barWidth: <span class="number">10</span>,</span><br><span class="line">        <span class="comment">// 显示柱子内的文字</span></span><br><span class="line">        label: &#123;</span><br><span class="line">          show: <span class="literal">true</span>,</span><br><span class="line">          position: <span class="string">&quot;inside&quot;</span>,</span><br><span class="line">          <span class="comment">// &#123;c&#125; 会自动的解析为 数据  data里面的数据</span></span><br><span class="line">          formatter: <span class="string">&quot;&#123;c&#125;%&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">&quot;框&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">        barCategoryGap: <span class="number">50</span>,</span><br><span class="line">        barWidth: <span class="number">15</span>,</span><br><span class="line">        yAxisIndex: <span class="number">1</span>,</span><br><span class="line">        data: [<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>],</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          color: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">          borderColor: <span class="string">&quot;#00c1de&quot;</span>,</span><br><span class="line">          borderWidth: <span class="number">3</span>,</span><br><span class="line">          barBorderRadius: <span class="number">15</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. 把配置给实例对象</span></span><br><span class="line">  myChart.setOption(option);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="14-折线图1-人员变化模块制作"><a href="#14-折线图1-人员变化模块制作" class="headerlink" title="14-折线图1 人员变化模块制作"></a>14-折线图1 人员变化模块制作</h3><ul><li>官网找到类似实例， 适当分析，并且引入到HTML页面中</li><li>根据需求定制图表</li></ul><p>需求1： 修改折线图大小，显示边框设置颜色：#012f4a，并且显示刻度标签。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置网格样式</span></span><br><span class="line">grid: &#123; </span><br><span class="line">  top: <span class="string">&#x27;20%&#x27;</span>,</span><br><span class="line">  left: <span class="string">&#x27;3%&#x27;</span>,</span><br><span class="line">  right: <span class="string">&#x27;4%&#x27;</span>,</span><br><span class="line">  bottom: <span class="string">&#x27;3%&#x27;</span>,</span><br><span class="line">  show: <span class="literal">true</span>,<span class="comment">// 显示边框</span></span><br><span class="line">  borderColor: <span class="string">&#x27;#012f4a&#x27;</span>,<span class="comment">// 边框颜色</span></span><br><span class="line">  containLabel: <span class="literal">true</span> <span class="comment">// 包含刻度文字在内</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>需求2： 修改图例组件中的文字颜色 #4c9bfd， 距离右侧 right 为 10%</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图例组件</span></span><br><span class="line">   legend: &#123;</span><br><span class="line">     textStyle: &#123;</span><br><span class="line">       color: <span class="string">&#x27;#4c9bfd&#x27;</span> <span class="comment">// 图例文字颜色</span></span><br><span class="line">     &#125;,</span><br><span class="line">     right: <span class="string">&#x27;10%&#x27;</span> <span class="comment">// 距离右边10%</span></span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure><p>需求3： x轴相关配置</p><ul><li>刻度去除</li><li>x轴刻度标签字体颜色：#4c9bfd</li><li>剔除x坐标轴线颜色（将来使用Y轴分割线)</li><li>轴两端是不需要内间距 boundaryGap</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> xAxis: &#123;</span><br><span class="line">   type: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">   data: [<span class="string">&quot;周一&quot;</span>, <span class="string">&quot;周二&quot;</span>],</span><br><span class="line">axisTick: &#123;</span><br><span class="line">      show: <span class="literal">false</span> <span class="comment">// 去除刻度线</span></span><br><span class="line">    &#125;,</span><br><span class="line">    axisLabel: &#123;</span><br><span class="line">      color: <span class="string">&#x27;#4c9bfd&#x27;</span> <span class="comment">// 文本颜色</span></span><br><span class="line">    &#125;,</span><br><span class="line">    axisLine: &#123;</span><br><span class="line">      show: <span class="literal">false</span> <span class="comment">// 去除轴线</span></span><br><span class="line">    &#125;,</span><br><span class="line">    boundaryGap: <span class="literal">false</span>  <span class="comment">// 去除轴内间距</span></span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><p>需求4： y轴的定制</p><ul><li>刻度去除</li><li>字体颜色：#4c9bfd</li><li>分割线颜色：#012f4a</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">yAxis: &#123;</span><br><span class="line">  type: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">  axisTick: &#123;</span><br><span class="line">    show: <span class="literal">false</span>  <span class="comment">// 去除刻度</span></span><br><span class="line">  &#125;,</span><br><span class="line">  axisLabel: &#123;</span><br><span class="line">    color: <span class="string">&#x27;#4c9bfd&#x27;</span> <span class="comment">// 文字颜色</span></span><br><span class="line">  &#125;,</span><br><span class="line">  splitLine: &#123;</span><br><span class="line">    lineStyle: &#123;</span><br><span class="line">      color: <span class="string">&#x27;#012f4a&#x27;</span> <span class="comment">// 分割线颜色</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>需求5： 两条线形图定制</p><ul><li>颜色分别：#00f2f1  #ed3f35</li><li>把折线修饰为圆滑 series 数据中添加 smooth 为 true</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">   color: [<span class="string">&#x27;#00f2f1&#x27;</span>, <span class="string">&#x27;#ed3f35&#x27;</span>],</span><br><span class="line">series: [&#123;</span><br><span class="line">     name:<span class="string">&#x27;新增粉丝&#x27;</span>,</span><br><span class="line">     data: [<span class="number">820</span>, <span class="number">932</span>, <span class="number">901</span>, <span class="number">934</span>, <span class="number">1290</span>, <span class="number">1330</span>, <span class="number">1320</span>],</span><br><span class="line">     type: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">     <span class="comment">// 折线修饰为圆滑</span></span><br><span class="line">     smooth: <span class="literal">true</span>,</span><br><span class="line">     &#125;,&#123;</span><br><span class="line">     name:<span class="string">&#x27;新增游客&#x27;</span>,</span><br><span class="line">     data: [<span class="number">100</span>, <span class="number">331</span>, <span class="number">200</span>, <span class="number">123</span>, <span class="number">233</span>, <span class="number">543</span>, <span class="number">400</span>],</span><br><span class="line">     type: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">     smooth: <span class="literal">true</span>,</span><br><span class="line">   &#125;]</span><br></pre></td></tr></table></figure><p>需求6： 配置数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// x轴的文字</span></span><br><span class="line">xAxis: &#123;</span><br><span class="line">  type: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">  data: [<span class="string">&#x27;1月&#x27;</span>, <span class="string">&#x27;2月&#x27;</span>, <span class="string">&#x27;3月&#x27;</span>, <span class="string">&#x27;4月&#x27;</span>, <span class="string">&#x27;5月&#x27;</span>, <span class="string">&#x27;6月&#x27;</span>, <span class="string">&#x27;7月&#x27;</span>, <span class="string">&#x27;8月&#x27;</span>, <span class="string">&#x27;9月&#x27;</span>, <span class="string">&#x27;10月&#x27;</span>, <span class="string">&#x27;11月&#x27;</span>, <span class="string">&#x27;12月&#x27;</span>],</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图标数据</span></span><br><span class="line">    series: [&#123;</span><br><span class="line">      name:<span class="string">&#x27;新增粉丝&#x27;</span>,</span><br><span class="line">      data:  [<span class="number">24</span>, <span class="number">40</span>, <span class="number">101</span>, <span class="number">134</span>, <span class="number">90</span>, <span class="number">230</span>, <span class="number">210</span>, <span class="number">230</span>, <span class="number">120</span>, <span class="number">230</span>, <span class="number">210</span>, <span class="number">120</span>],</span><br><span class="line">      type: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">      smooth: <span class="literal">true</span></span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      name:<span class="string">&#x27;新增游客&#x27;</span>,</span><br><span class="line">      data: [<span class="number">40</span>, <span class="number">64</span>, <span class="number">191</span>, <span class="number">324</span>, <span class="number">290</span>, <span class="number">330</span>, <span class="number">310</span>, <span class="number">213</span>, <span class="number">180</span>, <span class="number">200</span>, <span class="number">180</span>, <span class="number">79</span>],     </span><br><span class="line">      type: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">      smooth: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br></pre></td></tr></table></figure><p>需求7： 新增需求  点击 2020年   2021年 数据发生变化</p><p>以下是后台送过来数据（ajax请求过来的）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> yearData = [</span><br><span class="line">     &#123;</span><br><span class="line">       year: <span class="string">&#x27;2020&#x27;</span>,  <span class="comment">// 年份</span></span><br><span class="line">       data: [  <span class="comment">// 两个数组是因为有两条线</span></span><br><span class="line">            [<span class="number">24</span>, <span class="number">40</span>, <span class="number">101</span>, <span class="number">134</span>, <span class="number">90</span>, <span class="number">230</span>, <span class="number">210</span>, <span class="number">230</span>, <span class="number">120</span>, <span class="number">230</span>, <span class="number">210</span>, <span class="number">120</span>],</span><br><span class="line">            [<span class="number">40</span>, <span class="number">64</span>, <span class="number">191</span>, <span class="number">324</span>, <span class="number">290</span>, <span class="number">330</span>, <span class="number">310</span>, <span class="number">213</span>, <span class="number">180</span>, <span class="number">200</span>, <span class="number">180</span>, <span class="number">79</span>]</span><br><span class="line">         ]</span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       year: <span class="string">&#x27;2021&#x27;</span>,  <span class="comment">// 年份</span></span><br><span class="line">       data: [  <span class="comment">// 两个数组是因为有两条线</span></span><br><span class="line">            [<span class="number">123</span>, <span class="number">175</span>, <span class="number">112</span>, <span class="number">197</span>, <span class="number">121</span>, <span class="number">67</span>, <span class="number">98</span>, <span class="number">21</span>, <span class="number">43</span>, <span class="number">64</span>, <span class="number">76</span>, <span class="number">38</span>],</span><br><span class="line">    [<span class="number">143</span>, <span class="number">131</span>, <span class="number">165</span>, <span class="number">123</span>, <span class="number">178</span>, <span class="number">21</span>, <span class="number">82</span>, <span class="number">64</span>, <span class="number">43</span>, <span class="number">60</span>, <span class="number">19</span>, <span class="number">34</span>]</span><br><span class="line">         ]</span><br><span class="line">     &#125;</span><br><span class="line">    ];</span><br></pre></td></tr></table></figure><ul><li>tab栏切换事件</li><li>点击2020按钮   需要把 series 第一个对象里面的data  换成  2020年对象里面data[0] </li><li>点击2020按钮   需要把 series 第二个对象里面的data  换成  2020年对象里面data[1] </li><li>2021 按钮同样道理</li></ul><p>完整代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 折线图1模块制作</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> yearData = [</span><br><span class="line">    &#123;</span><br><span class="line">      year: <span class="string">&quot;2020&quot;</span>, <span class="comment">// 年份</span></span><br><span class="line">      data: [</span><br><span class="line">        <span class="comment">// 两个数组是因为有两条线</span></span><br><span class="line">        [<span class="number">24</span>, <span class="number">40</span>, <span class="number">101</span>, <span class="number">134</span>, <span class="number">90</span>, <span class="number">230</span>, <span class="number">210</span>, <span class="number">230</span>, <span class="number">120</span>, <span class="number">230</span>, <span class="number">210</span>, <span class="number">120</span>],</span><br><span class="line">        [<span class="number">40</span>, <span class="number">64</span>, <span class="number">191</span>, <span class="number">324</span>, <span class="number">290</span>, <span class="number">330</span>, <span class="number">310</span>, <span class="number">213</span>, <span class="number">180</span>, <span class="number">200</span>, <span class="number">180</span>, <span class="number">79</span>]</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      year: <span class="string">&quot;2021&quot;</span>, <span class="comment">// 年份</span></span><br><span class="line">      data: [</span><br><span class="line">        <span class="comment">// 两个数组是因为有两条线</span></span><br><span class="line">        [<span class="number">123</span>, <span class="number">175</span>, <span class="number">112</span>, <span class="number">197</span>, <span class="number">121</span>, <span class="number">67</span>, <span class="number">98</span>, <span class="number">21</span>, <span class="number">43</span>, <span class="number">64</span>, <span class="number">76</span>, <span class="number">38</span>],</span><br><span class="line">        [<span class="number">143</span>, <span class="number">131</span>, <span class="number">165</span>, <span class="number">123</span>, <span class="number">178</span>, <span class="number">21</span>, <span class="number">82</span>, <span class="number">64</span>, <span class="number">43</span>, <span class="number">60</span>, <span class="number">19</span>, <span class="number">34</span>]</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ];</span><br><span class="line">  <span class="comment">// 1. 实例化对象</span></span><br><span class="line">  <span class="keyword">var</span> myChart = echarts.init(<span class="built_in">document</span>.querySelector(<span class="string">&quot;.line .chart&quot;</span>));</span><br><span class="line">  <span class="comment">// 2.指定配置</span></span><br><span class="line">  <span class="keyword">var</span> option = &#123;</span><br><span class="line">    <span class="comment">// 通过这个color修改两条线的颜色</span></span><br><span class="line">    color: [<span class="string">&quot;#00f2f1&quot;</span>, <span class="string">&quot;#ed3f35&quot;</span>],</span><br><span class="line">    tooltip: &#123;</span><br><span class="line">      trigger: <span class="string">&quot;axis&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">      <span class="comment">// 如果series 对象有name 值，则 legend可以不用写data</span></span><br><span class="line">      <span class="comment">// 修改图例组件 文字颜色</span></span><br><span class="line">      textStyle: &#123;</span><br><span class="line">        color: <span class="string">&quot;#4c9bfd&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 这个10% 必须加引号</span></span><br><span class="line">      right: <span class="string">&quot;10%&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    grid: &#123;</span><br><span class="line">      top: <span class="string">&quot;20%&quot;</span>,</span><br><span class="line">      left: <span class="string">&quot;3%&quot;</span>,</span><br><span class="line">      right: <span class="string">&quot;4%&quot;</span>,</span><br><span class="line">      bottom: <span class="string">&quot;3%&quot;</span>,</span><br><span class="line">      show: <span class="literal">true</span>, <span class="comment">// 显示边框</span></span><br><span class="line">      borderColor: <span class="string">&quot;#012f4a&quot;</span>, <span class="comment">// 边框颜色</span></span><br><span class="line">      containLabel: <span class="literal">true</span> <span class="comment">// 包含刻度文字在内</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    xAxis: &#123;</span><br><span class="line">      type: <span class="string">&quot;category&quot;</span>,</span><br><span class="line">      boundaryGap: <span class="literal">false</span>,</span><br><span class="line">      data: [</span><br><span class="line">        <span class="string">&quot;1月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;2月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;3月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;4月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;5月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;6月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;7月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;8月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;9月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;10月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;11月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;12月&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      axisTick: &#123;</span><br><span class="line">        show: <span class="literal">false</span> <span class="comment">// 去除刻度线</span></span><br><span class="line">      &#125;,</span><br><span class="line">      axisLabel: &#123;</span><br><span class="line">        color: <span class="string">&quot;#4c9bfd&quot;</span> <span class="comment">// 文本颜色</span></span><br><span class="line">      &#125;,</span><br><span class="line">      axisLine: &#123;</span><br><span class="line">        show: <span class="literal">false</span> <span class="comment">// 去除轴线</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;</span><br><span class="line">      type: <span class="string">&quot;value&quot;</span>,</span><br><span class="line">      axisTick: &#123;</span><br><span class="line">        show: <span class="literal">false</span> <span class="comment">// 去除刻度线</span></span><br><span class="line">      &#125;,</span><br><span class="line">      axisLabel: &#123;</span><br><span class="line">        color: <span class="string">&quot;#4c9bfd&quot;</span> <span class="comment">// 文本颜色</span></span><br><span class="line">      &#125;,</span><br><span class="line">      axisLine: &#123;</span><br><span class="line">        show: <span class="literal">false</span> <span class="comment">// 去除轴线</span></span><br><span class="line">      &#125;,</span><br><span class="line">      splitLine: &#123;</span><br><span class="line">        lineStyle: &#123;</span><br><span class="line">          color: <span class="string">&quot;#012f4a&quot;</span> <span class="comment">// 分割线颜色</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    series: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">&quot;新增粉丝&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">        <span class="comment">// true 可以让我们的折线显示带有弧度</span></span><br><span class="line">        smooth: <span class="literal">true</span>,</span><br><span class="line">        data: yearData[<span class="number">0</span>].data[<span class="number">0</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">&quot;新增游客&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">        smooth: <span class="literal">true</span>,</span><br><span class="line">        data: yearData[<span class="number">0</span>].data[<span class="number">1</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. 把配置给实例对象</span></span><br><span class="line">  myChart.setOption(option);</span><br><span class="line">  <span class="comment">// 4. 让图表跟随屏幕自动的去适应</span></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    myChart.resize();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5.点击切换效果</span></span><br><span class="line">  $(<span class="string">&quot;.line h2&quot;</span>).on(<span class="string">&quot;click&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// alert(1);</span></span><br><span class="line">    <span class="comment">// console.log($(this).index());</span></span><br><span class="line">    <span class="comment">// 点击 a 之后 根据当前a的索引号 找到对应的 yearData的相关对象</span></span><br><span class="line">    <span class="comment">// console.log(yearData[$(this).index()]);</span></span><br><span class="line">    <span class="keyword">var</span> obj = yearData[$(<span class="built_in">this</span>).index()];</span><br><span class="line">    option.series[<span class="number">0</span>].data = obj.data[<span class="number">0</span>];</span><br><span class="line">    option.series[<span class="number">1</span>].data = obj.data[<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// 需要重新渲染</span></span><br><span class="line">    myChart.setOption(option);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="15-折线图2-播放量模块制作"><a href="#15-折线图2-播放量模块制作" class="headerlink" title="15-折线图2 播放量模块制作"></a>15-折线图2 播放量模块制作</h3><p>报错：Uncaught TypeError: (intermediate value)(intermediate value)(intermediate value)(intermediate value)(intermediate value)<br>记得每个闭合的function包后面加;</p><ul><li>官网找到类似实例， 适当分析，并且引入到HTML页面中</li><li>根据需求定制图表</li></ul><p>需求1： 更换图例组件文字颜色 rgba(255,255,255,.5)  文字大小为12</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> legend: &#123;</span><br><span class="line">      top: <span class="string">&quot;0%&quot;</span>,</span><br><span class="line">      textStyle: &#123;</span><br><span class="line">        color: <span class="string">&quot;rgba(255,255,255,.5)&quot;</span>,</span><br><span class="line">        fontSize: <span class="string">&quot;12&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>需求2： 修改图表大小</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">grid: &#123;</span><br><span class="line">      left: <span class="string">&quot;10&quot;</span>,</span><br><span class="line">      top: <span class="string">&quot;30&quot;</span>,</span><br><span class="line">      right: <span class="string">&quot;10&quot;</span>,</span><br><span class="line">      bottom: <span class="string">&quot;10&quot;</span>,</span><br><span class="line">      containLabel: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><p>需求3： 修改x轴相关配置</p><ul><li>修改文本颜色为rgba(255,255,255,.6)  文字大小为 12</li><li>x轴线的颜色为   rgba(255,255,255,.2)</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文本颜色为rgba(255,255,255,.6)  文字大小为 12</span></span><br><span class="line">axisLabel: &#123;</span><br><span class="line">     textStyle: &#123;</span><br><span class="line">       color: <span class="string">&quot;rgba(255,255,255,.6)&quot;</span>,</span><br><span class="line">       fontSize: <span class="number">12</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">    <span class="comment">// x轴线的颜色为   rgba(255,255,255,.2)</span></span><br><span class="line">   axisLine: &#123;</span><br><span class="line">     lineStyle: &#123;</span><br><span class="line">       color: <span class="string">&quot;rgba(255,255,255,.2)&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure><p>需求4： 修改y轴的相关配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    axisTick: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    axisLine: &#123;</span><br><span class="line">      lineStyle: &#123;</span><br><span class="line">        color: <span class="string">&quot;rgba(255,255,255,.1)&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    axisLabel: &#123;</span><br><span class="line">      textStyle: &#123;</span><br><span class="line">        color: <span class="string">&quot;rgba(255,255,255,.6)&quot;</span>,</span><br><span class="line">        fontSize: <span class="number">12</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="comment">// 修改分割线的颜色</span></span><br><span class="line">    splitLine: &#123;</span><br><span class="line">      lineStyle: &#123;</span><br><span class="line">        color: <span class="string">&quot;rgba(255,255,255,.1)&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>需求5： 修改两个线模块配置(注意在series 里面定制)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一条 线是圆滑</span></span><br><span class="line">smooth: <span class="literal">true</span>,</span><br><span class="line"> <span class="comment">// 单独修改线的样式</span></span><br><span class="line"> lineStyle: &#123;</span><br><span class="line">     color: <span class="string">&quot;#0184d5&quot;</span>,</span><br><span class="line">     width: <span class="number">2</span> </span><br><span class="line"> &#125;,</span><br><span class="line">  <span class="comment">// 填充区域</span></span><br><span class="line"> areaStyle: &#123;</span><br><span class="line">       <span class="comment">// 渐变色，只需要复制即可</span></span><br><span class="line">     color: <span class="keyword">new</span> echarts.graphic.LinearGradient(</span><br><span class="line">       <span class="number">0</span>,</span><br><span class="line">       <span class="number">0</span>,</span><br><span class="line">       <span class="number">0</span>,</span><br><span class="line">       <span class="number">1</span>,</span><br><span class="line">       [</span><br><span class="line">         &#123;</span><br><span class="line">           offset: <span class="number">0</span>,</span><br><span class="line">           color: <span class="string">&quot;rgba(1, 132, 213, 0.4)&quot;</span>   <span class="comment">// 渐变色的起始颜色</span></span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">           offset: <span class="number">0.8</span>,</span><br><span class="line">           color: <span class="string">&quot;rgba(1, 132, 213, 0.1)&quot;</span>   <span class="comment">// 渐变线的结束颜色</span></span><br><span class="line">         &#125;</span><br><span class="line">       ],</span><br><span class="line">       <span class="literal">false</span></span><br><span class="line">     ),</span><br><span class="line">     shadowColor: <span class="string">&quot;rgba(0, 0, 0, 0.1)&quot;</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="comment">// 设置拐点 小圆点</span></span><br><span class="line"> symbol: <span class="string">&quot;circle&quot;</span>,</span><br><span class="line"> <span class="comment">// 拐点大小</span></span><br><span class="line"> symbolSize: <span class="number">8</span>,</span><br><span class="line"> <span class="comment">// 设置拐点颜色以及边框</span></span><br><span class="line">itemStyle: &#123;</span><br><span class="line">     color: <span class="string">&quot;#0184d5&quot;</span>,</span><br><span class="line">     borderColor: <span class="string">&quot;rgba(221, 220, 107, .1)&quot;</span>,</span><br><span class="line">     borderWidth: <span class="number">12</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="comment">// 开始不显示拐点， 鼠标经过显示</span></span><br><span class="line"> showSymbol: <span class="literal">false</span>,</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">name: <span class="string">&quot;转发量&quot;</span>,</span><br><span class="line"> type: <span class="string">&quot;line&quot;</span>,</span><br><span class="line"> smooth: <span class="literal">true</span>,</span><br><span class="line"> lineStyle: &#123;</span><br><span class="line">   normal: &#123;</span><br><span class="line">     color: <span class="string">&quot;#00d887&quot;</span>,</span><br><span class="line">     width: <span class="number">2</span></span><br><span class="line">   &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  areaStyle: &#123;</span><br><span class="line">   normal: &#123;</span><br><span class="line">     color: <span class="keyword">new</span> echarts.graphic.LinearGradient(</span><br><span class="line">       <span class="number">0</span>,</span><br><span class="line">       <span class="number">0</span>,</span><br><span class="line">       <span class="number">0</span>,</span><br><span class="line">       <span class="number">1</span>,</span><br><span class="line">       [</span><br><span class="line">         &#123;</span><br><span class="line">           offset: <span class="number">0</span>,</span><br><span class="line">           color: <span class="string">&quot;rgba(0, 216, 135, 0.4)&quot;</span></span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">           offset: <span class="number">0.8</span>,</span><br><span class="line">           color: <span class="string">&quot;rgba(0, 216, 135, 0.1)&quot;</span></span><br><span class="line">         &#125;</span><br><span class="line">       ],</span><br><span class="line">       <span class="literal">false</span></span><br><span class="line">     ),</span><br><span class="line">     shadowColor: <span class="string">&quot;rgba(0, 0, 0, 0.1)&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="comment">// 设置拐点 小圆点</span></span><br><span class="line"> symbol: <span class="string">&quot;circle&quot;</span>,</span><br><span class="line"> <span class="comment">// 拐点大小</span></span><br><span class="line"> symbolSize: <span class="number">5</span>,</span><br><span class="line"> <span class="comment">// 设置拐点颜色以及边框</span></span><br><span class="line">  itemStyle: &#123;</span><br><span class="line">     color: <span class="string">&quot;#00d887&quot;</span>,</span><br><span class="line">     borderColor: <span class="string">&quot;rgba(221, 220, 107, .1)&quot;</span>,</span><br><span class="line">     borderWidth: <span class="number">12</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="comment">// 开始不显示拐点， 鼠标经过显示</span></span><br><span class="line"> showSymbol: <span class="literal">false</span>,</span><br></pre></td></tr></table></figure><p>需求6： 更换数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// x轴更换数据</span></span><br><span class="line">data: [ <span class="string">&quot;01&quot;</span>,<span class="string">&quot;02&quot;</span>,<span class="string">&quot;03&quot;</span>,<span class="string">&quot;04&quot;</span>,<span class="string">&quot;05&quot;</span>,<span class="string">&quot;06&quot;</span>,<span class="string">&quot;07&quot;</span>,<span class="string">&quot;08&quot;</span>,<span class="string">&quot;09&quot;</span>,<span class="string">&quot;10&quot;</span>,<span class="string">&quot;11&quot;</span>,<span class="string">&quot;12&quot;</span>,<span class="string">&quot;13&quot;</span>,<span class="string">&quot;14&quot;</span>,<span class="string">&quot;15&quot;</span>,<span class="string">&quot;16&quot;</span>,<span class="string">&quot;17&quot;</span>,<span class="string">&quot;18&quot;</span>,<span class="string">&quot;19&quot;</span>,<span class="string">&quot;20&quot;</span>,<span class="string">&quot;21&quot;</span>,<span class="string">&quot;22&quot;</span>,<span class="string">&quot;23&quot;</span>,<span class="string">&quot;24&quot;</span>,<span class="string">&quot;25&quot;</span>,<span class="string">&quot;26&quot;</span>,<span class="string">&quot;26&quot;</span>,<span class="string">&quot;28&quot;</span>,<span class="string">&quot;29&quot;</span>,<span class="string">&quot;30&quot;</span>],</span><br><span class="line"><span class="comment">// series  第一个对象data数据</span></span><br><span class="line"> data: [ <span class="number">30</span>, <span class="number">40</span>, <span class="number">30</span>, <span class="number">40</span>,<span class="number">30</span>, <span class="number">40</span>, <span class="number">30</span>,<span class="number">60</span>,<span class="number">20</span>, <span class="number">40</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">30</span>, <span class="number">40</span>,<span class="number">30</span>, <span class="number">40</span>, <span class="number">30</span>,<span class="number">60</span>,<span class="number">20</span>, <span class="number">40</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">30</span>, <span class="number">40</span>,<span class="number">30</span>, <span class="number">40</span>, <span class="number">20</span>,<span class="number">60</span>,<span class="number">50</span>, <span class="number">40</span>],</span><br><span class="line"><span class="comment">// series  第二个对象data数据</span></span><br><span class="line"> data: [ <span class="number">130</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>,<span class="number">30</span>, <span class="number">40</span>, <span class="number">80</span>,<span class="number">60</span>,<span class="number">20</span>, <span class="number">40</span>, <span class="number">90</span>, <span class="number">40</span>,<span class="number">20</span>, <span class="number">140</span>,<span class="number">30</span>, <span class="number">40</span>, <span class="number">130</span>,<span class="number">20</span>,<span class="number">20</span>, <span class="number">40</span>, <span class="number">80</span>, <span class="number">70</span>, <span class="number">30</span>, <span class="number">40</span>,<span class="number">30</span>, <span class="number">120</span>, <span class="number">20</span>,<span class="number">99</span>,<span class="number">50</span>, <span class="number">20</span>],</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="16-饼形图-1年龄分布模块制作"><a href="#16-饼形图-1年龄分布模块制作" class="headerlink" title="16-饼形图 1年龄分布模块制作"></a>16-饼形图 1年龄分布模块制作</h3><ul><li>官网找到类似实例， 适当分析，并且引入到HTML页面中</li><li>根据需求定制图表</li></ul><p>定制图表需求1： </p><ul><li>修改图例组件在底部并且居中显示。 </li><li>每个小图标的宽度和高度修改为 10px   </li><li>文字大小为12 颜色  rgba(255,255,255,.5)</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">legend: &#123;</span><br><span class="line">     <span class="comment">// 距离底部为0%</span></span><br><span class="line">     bottom: <span class="string">&quot;0%&quot;</span>,</span><br><span class="line">     <span class="comment">// 小图标的宽度和高度</span></span><br><span class="line">     itemWidth: <span class="number">10</span>,</span><br><span class="line">     itemHeight: <span class="number">10</span>,</span><br><span class="line">     data: [<span class="string">&#x27;直接访问&#x27;</span>, <span class="string">&#x27;邮件营销&#x27;</span>, <span class="string">&#x27;联盟广告&#x27;</span>, <span class="string">&#x27;视频广告&#x27;</span>, <span class="string">&#x27;搜索引擎&#x27;</span>],</span><br><span class="line">     <span class="comment">// 修改图例组件的文字为 12px</span></span><br><span class="line">     textStyle: &#123;</span><br><span class="line">       color: <span class="string">&quot;rgba(255,255,255,.5)&quot;</span>,</span><br><span class="line">       fontSize: <span class="string">&quot;12&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>定制需求2：</p><ul><li>修改水平居中 垂直居中</li><li>修改内圆半径和外圆半径为    [“40%”, “60%”]   pink老师友情提示，带有直角坐标系的比如折线图柱状图是 grid修改图形大小，而我们饼形图是通过 radius 修改大小</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">series: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">&quot;年龄分布&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;pie&quot;</span>,</span><br><span class="line">        <span class="comment">// 设置饼形图在容器中的位置</span></span><br><span class="line">        center: [<span class="string">&quot;50%&quot;</span>, <span class="string">&quot;50%&quot;</span>],</span><br><span class="line">        <span class="comment">//  修改内圆半径和外圆半径为  百分比是相对于容器宽度来说的</span></span><br><span class="line">        radius: [<span class="string">&quot;40%&quot;</span>, <span class="string">&quot;60%&quot;</span>],</span><br><span class="line">        <span class="comment">// 不显示标签文字</span></span><br><span class="line">        label: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">        <span class="comment">// 不显示链接图形和文字的连接线</span></span><br><span class="line">        labelLine: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure><p>定制需求3：更换数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// legend 中的data  可省略</span></span><br><span class="line">data: [<span class="string">&quot;0岁以下&quot;</span>, <span class="string">&quot;20-29岁&quot;</span>, <span class="string">&quot;30-39岁&quot;</span>, <span class="string">&quot;40-49岁&quot;</span>, <span class="string">&quot;50岁以上&quot;</span>],</span><br><span class="line"><span class="comment">//  series 中的数据</span></span><br><span class="line"> data: [</span><br><span class="line">          &#123; <span class="attr">value</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;0岁以下&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">value</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&quot;20-29岁&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">value</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;30-39岁&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">value</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;40-49岁&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">value</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;50岁以上&quot;</span> &#125;</span><br><span class="line"> ] ,</span><br></pre></td></tr></table></figure><p>定制需求4： 更换颜色</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">color: [</span><br><span class="line">          <span class="string">&quot;#065aab&quot;</span>,</span><br><span class="line">          <span class="string">&quot;#066eab&quot;</span>,</span><br><span class="line">          <span class="string">&quot;#0682ab&quot;</span>,</span><br><span class="line">          <span class="string">&quot;#0696ab&quot;</span>,</span><br><span class="line">          <span class="string">&quot;#06a0ab&quot;</span>,</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4. 让图表跟随屏幕自动的去适应</span></span><br><span class="line"> <span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   myChart.resize();</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure><h3 id="17-饼形图2-地区分布模块制作（南丁格尔玫瑰图）"><a href="#17-饼形图2-地区分布模块制作（南丁格尔玫瑰图）" class="headerlink" title="17-饼形图2 地区分布模块制作（南丁格尔玫瑰图）"></a>17-饼形图2 地区分布模块制作（南丁格尔玫瑰图）</h3><ul><li>官网找到类似实例， 适当分析，并且引入到HTML页面中</li><li>根据需求定制图表</li></ul><p>第二步：按照需求定制</p><ul><li>需求1：颜色设置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">color: [<span class="string">&#x27;#006cff&#x27;</span>, <span class="string">&#x27;#60cda0&#x27;</span>, <span class="string">&#x27;#ed8884&#x27;</span>, <span class="string">&#x27;#ff9f7f&#x27;</span>, <span class="string">&#x27;#0096ff&#x27;</span>, <span class="string">&#x27;#9fe6b8&#x27;</span>, <span class="string">&#x27;#32c5e9&#x27;</span>, <span class="string">&#x27;#1d9dff&#x27;</span>],</span><br></pre></td></tr></table></figure><ul><li>需求2：修改饼形图大小 ( series对象)</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">radius: [<span class="string">&#x27;10%&#x27;</span>, <span class="string">&#x27;70%&#x27;</span>],</span><br></pre></td></tr></table></figure><ul><li>需求3： 把饼形图的显示模式改为 半径模式</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roseType: <span class="string">&quot;radius&quot;</span>,</span><br></pre></td></tr></table></figure><ul><li>需求4：数据使用更换（series对象 里面 data对象）</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">value</span>: <span class="number">20</span>, <span class="attr">name</span>: <span class="string">&#x27;云南&#x27;</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="number">26</span>, <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="number">24</span>, <span class="attr">name</span>: <span class="string">&#x27;山东&#x27;</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="number">25</span>, <span class="attr">name</span>: <span class="string">&#x27;河北&#x27;</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="number">20</span>, <span class="attr">name</span>: <span class="string">&#x27;江苏&#x27;</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="number">25</span>, <span class="attr">name</span>: <span class="string">&#x27;浙江&#x27;</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="number">30</span>, <span class="attr">name</span>: <span class="string">&#x27;四川&#x27;</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="number">42</span>, <span class="attr">name</span>: <span class="string">&#x27;湖北&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><ul><li><p>需求5：字体略小些  10 px ( series对象里面设置 )</p><p>饼图图形上的文本标签可以控制饼形图的文字的一些样式。   label 对象设置</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">series: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">&quot;面积模式&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;pie&quot;</span>,</span><br><span class="line">        radius: [<span class="number">30</span>, <span class="number">110</span>],</span><br><span class="line">        center: [<span class="string">&quot;50%&quot;</span>, <span class="string">&quot;50%&quot;</span>],</span><br><span class="line">        roseType: <span class="string">&quot;radius&quot;</span>,</span><br><span class="line">        <span class="comment">// 文本标签控制饼形图文字的相关样式， 注意它是一个对象</span></span><br><span class="line">        label: &#123;</span><br><span class="line">          fontSize: <span class="number">10</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><ul><li>需求6：防止缩放的时候，引导线过长。引导线略短些   (series对象里面的  labelLine  对象设置  ) <ul><li>连接图表 6 px</li><li>连接文字 8 px</li></ul></li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+        // 文字调整</span></span><br><span class="line"><span class="addition">+        label:&#123;</span></span><br><span class="line"><span class="addition">+          fontSize: 10</span></span><br><span class="line"><span class="addition">+        &#125;,</span></span><br><span class="line"><span class="addition">+        // 引导线调整</span></span><br><span class="line"><span class="addition">+        labelLine: &#123;</span></span><br><span class="line"><span class="addition">+          // 连接扇形图线长</span></span><br><span class="line"><span class="addition">+          length: 6,</span></span><br><span class="line"><span class="addition">+          // 连接文字线长</span></span><br><span class="line"><span class="addition">+          length2: 8</span></span><br><span class="line"><span class="addition">+        &#125; </span></span><br><span class="line"><span class="addition">+      &#125;</span></span><br><span class="line"><span class="addition">+    ],</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>需求6：浏览器缩放的时候，图表跟着自动适配。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听浏览器缩放，图表对象调用缩放resize函数</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    myChart.resize();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h3 id="18-Echarts-社区介绍"><a href="#18-Echarts-社区介绍" class="headerlink" title="18-Echarts-社区介绍"></a>18-Echarts-社区介绍</h3><blockquote><p><a href="https://gallery.echartsjs.com/explore.html#sort=rank~timeframe=all~author=all">社区</a>就是一些，活跃的echart使用者，交流和贡献定制好的图表的地方。</p></blockquote><p><img src="docs/media/1576664444951.png" alt="1576664444951"></p><ul><li>在这里可以找到一些基于echart的高度定制好的图表，相当于基于jquery开发的插件，这里是基于echarts开发的第三方的图表。</li></ul><h3 id="19-Echarts-map使用（扩展）"><a href="#19-Echarts-map使用（扩展）" class="headerlink" title="19-Echarts-map使用（扩展）"></a>19-Echarts-map使用（扩展）</h3><p>参考社区的例子：<a href="https://gallery.echartsjs.com/editor.html?c=x0-ExSkZDM">https://gallery.echartsjs.com/editor.html?c=x0-ExSkZDM</a>  (模拟飞机航线)</p><p>实现步骤：</p><ul><li>第一需要下载china.js提供中国地图的js文件</li><li>第二个因为里面代码比较多，我们新建一个新的js文件 myMap.js 引入</li><li>使用社区提供的配置即可。</li></ul><p>需要修改：</p><ul><li>去掉标题组件</li><li>去掉背景颜色</li><li>修改地图省份背景  #142957  areaColor 里面做修改</li><li>地图放大通过  zoom   设置为1.2即可</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">geo: &#123;</span><br><span class="line">  map: <span class="string">&#x27;china&#x27;</span>,</span><br><span class="line">  zoom: <span class="number">1.2</span>,</span><br><span class="line">  label: &#123;</span><br><span class="line">    emphasis: &#123;</span><br><span class="line">      show: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  roam: <span class="literal">false</span>,</span><br><span class="line">  itemStyle: &#123;</span><br><span class="line">    normal: &#123;</span><br><span class="line">      areaColor: <span class="string">&#x27;#142957&#x27;</span>,</span><br><span class="line">      borderColor: <span class="string">&#x27;#0692a4&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    emphasis: &#123;</span><br><span class="line">      areaColor: <span class="string">&#x27;#0b1c2d&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>总结：这例子是扩展案例，大家以后可以多看看社区里面的案例。</p><h3 id="20-最后约束缩放"><a href="#20-最后约束缩放" class="headerlink" title="20- 最后约束缩放"></a>20- 最后约束缩放</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 约束屏幕尺寸 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">1024px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">42px</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">1920px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">80px</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;可视化面板介绍&quot;&gt;&lt;a href=&quot;#可视化面板介绍&quot; class=&quot;headerlink&quot; title=&quot;可视化面板介绍&quot;&gt;&lt;/a&gt;可视化面板介绍&lt;/h2&gt;&lt;p&gt;​    应对现在数据可视化的趋势，越来越多企业需要在很多场景(营销数据，生产数据，用户数据)下使用</summary>
      
    
    
    
    
    <category term="website" scheme="https://rihiko.github.io/tags/website/"/>
    
  </entry>
  
  <entry>
    <title>数据库</title>
    <link href="https://rihiko.github.io/2021/01/24/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>https://rihiko.github.io/2021/01/24/%E6%95%B0%E6%8D%AE%E5%BA%93/</id>
    <published>2021-01-24T03:20:14.000Z</published>
    <updated>2021-01-24T12:10:52.375Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2021-1-22"><a href="#2021-1-22" class="headerlink" title="2021/1/22"></a>2021/1/22</h1><p>MySQL属于关系型数据库</p><ul><li>数据行（记录）</li><li>数据列（字段）</li><li>数据表（数据行的集合）</li><li>数据库（数据表的集合）   </li></ul><p>MySQL用来做网站，redis用于持久化缓存，mongodb用来处理非关系型数据库的结果（做爬虫）<br>C/S架构：客户端/服务器模型<br>B/S架构：浏览器/服务器模型<br><img src="%E5%85%B3%E7%B3%BB%E5%9B%BE.png"></p><p>SQL语言（结构化查询语言）专门用来和数据库之间的通讯<img src="sql%E8%AF%AD%E8%A8%80.png"><br>学习要求<br><img src="%E5%AD%A6%E4%B9%A0%E8%A6%81%E6%B1%82.png"></p><h1 id="2021-1-23"><a href="#2021-1-23" class="headerlink" title="2021/1/23"></a>2021/1/23</h1><p><a href="https://blog.csdn.net/qq_36582604/article/details/80526287">CentOS7安装MySQL</a><br><a href="https://songyu.blog.csdn.net/article/details/109108573/">SQL语言</a></p><h2 id="启动mysql"><a href="#启动mysql" class="headerlink" title="启动mysql"></a>启动mysql</h2><p>F:\mysql\mysql-8.0.22-winx64\bin&gt;net start MySQL</p><h2 id="登录mysql"><a href="#登录mysql" class="headerlink" title="登录mysql"></a>登录mysql</h2><p>F:\mysql\mysql-8.0.22-winx64\bin&gt;mysql -u root –p    </p><h2 id="更改用户；密码"><a href="#更改用户；密码" class="headerlink" title="更改用户；密码"></a>更改用户；密码</h2><p>mysql&gt; ALTER USER ‘root’@’localhost’ IDENTIFIED WITH mysql_native_password BY ‘123456’;</p><h2 id="保存更改"><a href="#保存更改" class="headerlink" title="保存更改"></a>保存更改</h2><p>mysql&gt; flush privileges;  </p><h2 id="退出"><a href="#退出" class="headerlink" title="退出"></a>退出</h2><p>mysql&gt; quit</p><h2 id="展示数据库"><a href="#展示数据库" class="headerlink" title="展示数据库"></a>展示数据库</h2><p>mysql&gt; show databases;</p><h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p>mysql&gt; create database blogdb;<br>注:每次直接登陆mysql即可，密码123456</p><h1 id="2021-1-24"><a href="#2021-1-24" class="headerlink" title="2021/1/24"></a>2021/1/24</h1><h2 id="选中数据库操作"><a href="#选中数据库操作" class="headerlink" title="选中数据库操作"></a>选中数据库操作</h2><p>mysql&gt; use blogdb<br>Database changed</p><h2 id="查看数据库的数据表"><a href="#查看数据库的数据表" class="headerlink" title="查看数据库的数据表"></a>查看数据库的数据表</h2><p>mysql&gt; show tables;<br>+—————————-+<br>| Tables_in_blogdb           |<br>+—————————-+<br>| auth_group                 |<br>| auth_group_permissions     |<br>| auth_permission            |<br>| auth_user                  |<br>| auth_user_groups           |<br>| auth_user_user_permissions |<br>| blog_article               |<br>| blog_article_tags          |<br>| blog_tag                   |<br>| blog_user                  |<br>| django_admin_log           |<br>| django_content_type        |<br>| django_migrations          |<br>| django_session             |<br>| t_category                 |<br>+—————————-+<br>15 rows in set (0.32 sec)  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;2021-1-22&quot;&gt;&lt;a href=&quot;#2021-1-22&quot; class=&quot;headerlink&quot; title=&quot;2021/1/22&quot;&gt;&lt;/a&gt;2021/1/22&lt;/h1&gt;&lt;p&gt;MySQL属于关系型数据库&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;数据行（记录）&lt;/li&gt;
&lt;l</summary>
      
    
    
    
    
    <category term="MySQL" scheme="https://rihiko.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL学习笔记</title>
    <link href="https://rihiko.github.io/2021/01/24/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>https://rihiko.github.io/2021/01/24/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2021-01-24T03:20:14.000Z</published>
    <updated>2021-01-24T11:57:27.322Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL学习笔记"><a href="#MySQL学习笔记" class="headerlink" title="MySQL学习笔记"></a>MySQL学习笔记</h1><h2 id="登录和退出MySQL服务器"><a href="#登录和退出MySQL服务器" class="headerlink" title="登录和退出MySQL服务器"></a>登录和退出MySQL服务器</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 登录MySQL</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mysql -u root -p12345612</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 退出MySQL数据库服务器</span></span><br><span class="line">exit;</span><br></pre></td></tr></table></figure><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">-- 显示所有数据库</span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">-- 创建数据库</span><br><span class="line">CREATE DATABASE test;</span><br><span class="line"></span><br><span class="line">-- 切换数据库</span><br><span class="line">use test;</span><br><span class="line"></span><br><span class="line">-- 显示数据库中的所有表</span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">-- 创建数据表</span><br><span class="line">CREATE TABLE pet (</span><br><span class="line">    name VARCHAR(20),</span><br><span class="line">    owner VARCHAR(20),</span><br><span class="line">    species VARCHAR(20),</span><br><span class="line">    sex CHAR(1),</span><br><span class="line">    birth DATE,</span><br><span class="line">    death DATE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 查看数据表结构</span><br><span class="line">-- describe pet;</span><br><span class="line">desc pet;</span><br><span class="line"></span><br><span class="line">-- 查询表</span><br><span class="line">SELECT * from pet;</span><br><span class="line"></span><br><span class="line">-- 插入数据</span><br><span class="line">INSERT INTO pet VALUES (&#39;puffball&#39;, &#39;Diane&#39;, &#39;hamster&#39;, &#39;f&#39;, &#39;1990-03-30&#39;, NULL);</span><br><span class="line"></span><br><span class="line">-- 修改数据</span><br><span class="line">UPDATE pet SET name &#x3D; &#39;squirrel&#39; where owner &#x3D; &#39;Diane&#39;;</span><br><span class="line"></span><br><span class="line">-- 删除数据</span><br><span class="line">DELETE FROM pet where name &#x3D; &#39;squirrel&#39;;</span><br><span class="line"></span><br><span class="line">-- 删除表</span><br><span class="line">DROP TABLE myorder;</span><br></pre></td></tr></table></figure><h2 id="建表约束"><a href="#建表约束" class="headerlink" title="建表约束"></a>建表约束</h2><h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">-- 主键约束</span><br><span class="line">-- 使某个字段不重复且不得为空，确保表内所有数据的唯一性。</span><br><span class="line">CREATE TABLE user (</span><br><span class="line">    id INT PRIMARY KEY,</span><br><span class="line">    name VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 联合主键</span><br><span class="line">-- 联合主键中的每个字段都不能为空，并且加起来不能和已设置的联合主键重复。</span><br><span class="line">CREATE TABLE user (</span><br><span class="line">    id INT,</span><br><span class="line">    name VARCHAR(20),</span><br><span class="line">    password VARCHAR(20),</span><br><span class="line">    PRIMARY KEY(id, name)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 自增约束</span><br><span class="line">-- 自增约束的主键由系统自动递增分配。</span><br><span class="line">CREATE TABLE user (</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    name VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加主键约束</span><br><span class="line">-- 如果忘记设置主键，还可以通过SQL语句设置（两种方式）：</span><br><span class="line">ALTER TABLE user ADD PRIMARY KEY(id);</span><br><span class="line">ALTER TABLE user MODIFY id INT PRIMARY KEY;</span><br><span class="line"></span><br><span class="line">-- 删除主键</span><br><span class="line">ALTER TABLE user drop PRIMARY KEY;</span><br></pre></td></tr></table></figure><h3 id="唯一主键"><a href="#唯一主键" class="headerlink" title="唯一主键"></a>唯一主键</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 建表时创建唯一主键</span><br><span class="line">CREATE TABLE user (</span><br><span class="line">    id INT,</span><br><span class="line">    name VARCHAR(20),</span><br><span class="line">    UNIQUE(name)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加唯一主键</span><br><span class="line">-- 如果建表时没有设置唯一建，还可以通过SQL语句设置（两种方式）：</span><br><span class="line">ALTER TABLE user ADD UNIQUE(name);</span><br><span class="line">ALTER TABLE user MODIFY name VARCHAR(20) UNIQUE;</span><br><span class="line"></span><br><span class="line">-- 删除唯一主键</span><br><span class="line">ALTER TABLE user DROP INDEX name;</span><br></pre></td></tr></table></figure><h3 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 建表时添加非空约束</span><br><span class="line">-- 约束某个字段不能为空</span><br><span class="line">CREATE TABLE user (</span><br><span class="line">    id INT,</span><br><span class="line">    name VARCHAR(20) NOT NULL</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 移除非空约束</span><br><span class="line">ALTER TABLE user MODIFY name VARCHAR(20);</span><br></pre></td></tr></table></figure><h3 id="默认约束"><a href="#默认约束" class="headerlink" title="默认约束"></a>默认约束</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 建表时添加默认约束</span><br><span class="line">-- 约束某个字段的默认值</span><br><span class="line">CREATE TABLE user2 (</span><br><span class="line">    id INT,</span><br><span class="line">    name VARCHAR(20),</span><br><span class="line">    age INT DEFAULT 10</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 移除非空约束</span><br><span class="line">ALTER TABLE user MODIFY age INT;</span><br></pre></td></tr></table></figure><h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-- 班级</span><br><span class="line">CREATE TABLE classes (</span><br><span class="line">    id INT PRIMARY KEY,</span><br><span class="line">    name VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 学生表</span><br><span class="line">CREATE TABLE students (</span><br><span class="line">    id INT PRIMARY KEY,</span><br><span class="line">    name VARCHAR(20),</span><br><span class="line">    -- 这里的 class_id 要和 classes 中的 id 字段相关联</span><br><span class="line">    class_id INT,</span><br><span class="line">    -- 表示 class_id 的值必须来自于 classes 中的 id 字段值</span><br><span class="line">    FOREIGN KEY(class_id) REFERENCES classes(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 1. 主表（父表）classes 中没有的数据值，在副表（子表）students 中，是不可以使用的；</span><br><span class="line">-- 2. 主表中的记录被副表引用时，主表不可以被删除。</span><br></pre></td></tr></table></figure><h2 id="数据库的三大设计范式"><a href="#数据库的三大设计范式" class="headerlink" title="数据库的三大设计范式"></a>数据库的三大设计范式</h2><h3 id="1NF"><a href="#1NF" class="headerlink" title="1NF"></a>1NF</h3><p>只要字段值还可以继续拆分，就不满足第一范式。</p><p>范式设计得越详细，对某些实际操作可能会更好，但并非都有好处，需要对项目的实际情况进行设定。</p><h3 id="2NF"><a href="#2NF" class="headerlink" title="2NF"></a>2NF</h3><p>在满足第一范式的前提下，其他列都必须完全依赖于主键列。如果出现不完全依赖，只可能发生在联合主键的情况下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 订单表</span><br><span class="line">CREATE TABLE myorder (</span><br><span class="line">    product_id INT,</span><br><span class="line">    customer_id INT,</span><br><span class="line">    product_name VARCHAR(20),</span><br><span class="line">    customer_name VARCHAR(20),</span><br><span class="line">    PRIMARY KEY (product_id, customer_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>实际上，在这张订单表中，<code>product_name</code> 只依赖于 <code>product_id</code> ，<code>customer_name</code> 只依赖于 <code>customer_id</code> 。也就是说，<code>product_name</code> 和 <code>customer_id</code> 是没用关系的，<code>customer_name</code> 和 <code>product_id</code> 也是没有关系的。</p><p>这就不满足第二范式：其他列都必须完全依赖于主键列！</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE myorder (</span><br><span class="line">    order_id INT PRIMARY KEY,</span><br><span class="line">    product_id INT,</span><br><span class="line">    customer_id INT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE product (</span><br><span class="line">    id INT PRIMARY KEY,</span><br><span class="line">    name VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE customer (</span><br><span class="line">    id INT PRIMARY KEY,</span><br><span class="line">    name VARCHAR(20)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>拆分之后，<code>myorder</code> 表中的 <code>product_id</code> 和 <code>customer_id</code> 完全依赖于 <code>order_id</code> 主键，而 <code>product</code> 和 <code>customer</code> 表中的其他字段又完全依赖于主键。满足了第二范式的设计！</p><h3 id="3NF"><a href="#3NF" class="headerlink" title="3NF"></a>3NF</h3><p>在满足第二范式的前提下，除了主键列之外，其他列之间不能有传递依赖关系。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE myorder (</span><br><span class="line">    order_id INT PRIMARY KEY,</span><br><span class="line">    product_id INT,</span><br><span class="line">    customer_id INT,</span><br><span class="line">    customer_phone VARCHAR(15)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>表中的 <code>customer_phone</code> 有可能依赖于 <code>order_id</code> 、 <code>customer_id</code> 两列，也就不满足了第三范式的设计：其他列之间不能有传递依赖关系。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE myorder (</span><br><span class="line">    order_id INT PRIMARY KEY,</span><br><span class="line">    product_id INT,</span><br><span class="line">    customer_id INT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE customer (</span><br><span class="line">    id INT PRIMARY KEY,</span><br><span class="line">    name VARCHAR(20),</span><br><span class="line">    phone VARCHAR(15)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>修改后就不存在其他列之间的传递依赖关系，其他列都只依赖于主键列，满足了第三范式的设计！</p><h2 id="查询练习"><a href="#查询练习" class="headerlink" title="查询练习"></a>查询练习</h2><h3 id="准备数据"><a href="#准备数据" class="headerlink" title="准备数据"></a>准备数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">-- 创建数据库</span><br><span class="line">CREATE DATABASE select_test;</span><br><span class="line">-- 切换数据库</span><br><span class="line">USE select_test;</span><br><span class="line"></span><br><span class="line">-- 创建学生表</span><br><span class="line">CREATE TABLE student (</span><br><span class="line">    no VARCHAR(20) PRIMARY KEY,</span><br><span class="line">    name VARCHAR(20) NOT NULL,</span><br><span class="line">    sex VARCHAR(10) NOT NULL,</span><br><span class="line">    birthday DATE, -- 生日</span><br><span class="line">    class VARCHAR(20) -- 所在班级</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 创建教师表</span><br><span class="line">CREATE TABLE teacher (</span><br><span class="line">    no VARCHAR(20) PRIMARY KEY,</span><br><span class="line">    name VARCHAR(20) NOT NULL,</span><br><span class="line">    sex VARCHAR(10) NOT NULL,</span><br><span class="line">    birthday DATE,</span><br><span class="line">    profession VARCHAR(20) NOT NULL, -- 职称</span><br><span class="line">    department VARCHAR(20) NOT NULL -- 部门</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 创建课程表</span><br><span class="line">CREATE TABLE course (</span><br><span class="line">    no VARCHAR(20) PRIMARY KEY,</span><br><span class="line">    name VARCHAR(20) NOT NULL,</span><br><span class="line">    t_no VARCHAR(20) NOT NULL, -- 教师编号</span><br><span class="line">    -- 表示该 tno 来自于 teacher 表中的 no 字段值</span><br><span class="line">    FOREIGN KEY(t_no) REFERENCES teacher(no) </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 成绩表</span><br><span class="line">CREATE TABLE score (</span><br><span class="line">    s_no VARCHAR(20) NOT NULL, -- 学生编号</span><br><span class="line">    c_no VARCHAR(20) NOT NULL, -- 课程号</span><br><span class="line">    degree DECIMAL,-- 成绩</span><br><span class="line">    -- 表示该 s_no, c_no 分别来自于 student, course 表中的 no 字段值</span><br><span class="line">    FOREIGN KEY(s_no) REFERENCES student(no),</span><br><span class="line">    FOREIGN KEY(c_no) REFERENCES course(no),</span><br><span class="line">    -- 设置 s_no, c_no 为联合主键</span><br><span class="line">    PRIMARY KEY(s_no, c_no)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 查看所有表</span><br><span class="line">SHOW TABLES;</span><br><span class="line"></span><br><span class="line">-- 添加学生表数据</span><br><span class="line">INSERT INTO student VALUES(&#39;101&#39;, &#39;曾华&#39;, &#39;男&#39;, &#39;1977-09-01&#39;, &#39;95033&#39;);</span><br><span class="line">INSERT INTO student VALUES(&#39;102&#39;, &#39;匡明&#39;, &#39;男&#39;, &#39;1975-10-02&#39;, &#39;95031&#39;);</span><br><span class="line">INSERT INTO student VALUES(&#39;103&#39;, &#39;王丽&#39;, &#39;女&#39;, &#39;1976-01-23&#39;, &#39;95033&#39;);</span><br><span class="line">INSERT INTO student VALUES(&#39;104&#39;, &#39;李军&#39;, &#39;男&#39;, &#39;1976-02-20&#39;, &#39;95033&#39;);</span><br><span class="line">INSERT INTO student VALUES(&#39;105&#39;, &#39;王芳&#39;, &#39;女&#39;, &#39;1975-02-10&#39;, &#39;95031&#39;);</span><br><span class="line">INSERT INTO student VALUES(&#39;106&#39;, &#39;陆军&#39;, &#39;男&#39;, &#39;1974-06-03&#39;, &#39;95031&#39;);</span><br><span class="line">INSERT INTO student VALUES(&#39;107&#39;, &#39;王尼玛&#39;, &#39;男&#39;, &#39;1976-02-20&#39;, &#39;95033&#39;);</span><br><span class="line">INSERT INTO student VALUES(&#39;108&#39;, &#39;张全蛋&#39;, &#39;男&#39;, &#39;1975-02-10&#39;, &#39;95031&#39;);</span><br><span class="line">INSERT INTO student VALUES(&#39;109&#39;, &#39;赵铁柱&#39;, &#39;男&#39;, &#39;1974-06-03&#39;, &#39;95031&#39;);</span><br><span class="line"></span><br><span class="line">-- 添加教师表数据</span><br><span class="line">INSERT INTO teacher VALUES(&#39;804&#39;, &#39;李诚&#39;, &#39;男&#39;, &#39;1958-12-02&#39;, &#39;副教授&#39;, &#39;计算机系&#39;);</span><br><span class="line">INSERT INTO teacher VALUES(&#39;856&#39;, &#39;张旭&#39;, &#39;男&#39;, &#39;1969-03-12&#39;, &#39;讲师&#39;, &#39;电子工程系&#39;);</span><br><span class="line">INSERT INTO teacher VALUES(&#39;825&#39;, &#39;王萍&#39;, &#39;女&#39;, &#39;1972-05-05&#39;, &#39;助教&#39;, &#39;计算机系&#39;);</span><br><span class="line">INSERT INTO teacher VALUES(&#39;831&#39;, &#39;刘冰&#39;, &#39;女&#39;, &#39;1977-08-14&#39;, &#39;助教&#39;, &#39;电子工程系&#39;);</span><br><span class="line"></span><br><span class="line">-- 添加课程表数据</span><br><span class="line">INSERT INTO course VALUES(&#39;3-105&#39;, &#39;计算机导论&#39;, &#39;825&#39;);</span><br><span class="line">INSERT INTO course VALUES(&#39;3-245&#39;, &#39;操作系统&#39;, &#39;804&#39;);</span><br><span class="line">INSERT INTO course VALUES(&#39;6-166&#39;, &#39;数字电路&#39;, &#39;856&#39;);</span><br><span class="line">INSERT INTO course VALUES(&#39;9-888&#39;, &#39;高等数学&#39;, &#39;831&#39;);</span><br><span class="line"></span><br><span class="line">-- 添加添加成绩表数据</span><br><span class="line">INSERT INTO score VALUES(&#39;103&#39;, &#39;3-105&#39;, &#39;92&#39;);</span><br><span class="line">INSERT INTO score VALUES(&#39;103&#39;, &#39;3-245&#39;, &#39;86&#39;);</span><br><span class="line">INSERT INTO score VALUES(&#39;103&#39;, &#39;6-166&#39;, &#39;85&#39;);</span><br><span class="line">INSERT INTO score VALUES(&#39;105&#39;, &#39;3-105&#39;, &#39;88&#39;);</span><br><span class="line">INSERT INTO score VALUES(&#39;105&#39;, &#39;3-245&#39;, &#39;75&#39;);</span><br><span class="line">INSERT INTO score VALUES(&#39;105&#39;, &#39;6-166&#39;, &#39;79&#39;);</span><br><span class="line">INSERT INTO score VALUES(&#39;109&#39;, &#39;3-105&#39;, &#39;76&#39;);</span><br><span class="line">INSERT INTO score VALUES(&#39;109&#39;, &#39;3-245&#39;, &#39;68&#39;);</span><br><span class="line">INSERT INTO score VALUES(&#39;109&#39;, &#39;6-166&#39;, &#39;81&#39;);</span><br><span class="line"></span><br><span class="line">-- 查看表结构</span><br><span class="line">SELECT * FROM course;</span><br><span class="line">SELECT * FROM score;</span><br><span class="line">SELECT * FROM student;</span><br><span class="line">SELECT * FROM teacher;</span><br></pre></td></tr></table></figure><h3 id="1-到-10"><a href="#1-到-10" class="headerlink" title="1 到 10"></a>1 到 10</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">-- 查询 student 表的所有行</span><br><span class="line">SELECT * FROM student;</span><br><span class="line"></span><br><span class="line">-- 查询 student 表中的 name、sex 和 class 字段的所有行</span><br><span class="line">SELECT name, sex, class FROM student;</span><br><span class="line"></span><br><span class="line">-- 查询 teacher 表中不重复的 department 列</span><br><span class="line">-- department: 去重查询</span><br><span class="line">SELECT DISTINCT department FROM teacher;</span><br><span class="line"></span><br><span class="line">-- 查询 score 表中成绩在60-80之间的所有行（区间查询和运算符查询）</span><br><span class="line">-- BETWEEN xx AND xx: 查询区间, AND 表示 &quot;并且&quot;</span><br><span class="line">SELECT * FROM score WHERE degree BETWEEN 60 AND 80;</span><br><span class="line">SELECT * FROM score WHERE degree &gt; 60 AND degree &lt; 80;</span><br><span class="line"></span><br><span class="line">-- 查询 score 表中成绩为 85, 86 或 88 的行</span><br><span class="line">-- IN: 查询规定中的多个值</span><br><span class="line">SELECT * FROM score WHERE degree IN (85, 86, 88);</span><br><span class="line"></span><br><span class="line">-- 查询 student 表中 &#39;95031&#39; 班或性别为 &#39;女&#39; 的所有行</span><br><span class="line">-- or: 表示或者关系</span><br><span class="line">SELECT * FROM student WHERE class &#x3D; &#39;95031&#39; or sex &#x3D; &#39;女&#39;;</span><br><span class="line"></span><br><span class="line">-- 以 class 降序的方式查询 student 表的所有行</span><br><span class="line">-- DESC: 降序，从高到低</span><br><span class="line">-- ASC（默认）: 升序，从低到高</span><br><span class="line">SELECT * FROM student ORDER BY class DESC;</span><br><span class="line">SELECT * FROM student ORDER BY class ASC;</span><br><span class="line"></span><br><span class="line">-- 以 c_no 升序、degree 降序查询 score 表的所有行</span><br><span class="line">SELECT * FROM score ORDER BY c_no ASC, degree DESC;</span><br><span class="line"></span><br><span class="line">-- 查询 &quot;95031&quot; 班的学生人数</span><br><span class="line">-- COUNT: 统计</span><br><span class="line">SELECT COUNT(*) FROM student WHERE class &#x3D; &#39;95031&#39;;</span><br><span class="line"></span><br><span class="line">-- 查询 score 表中的最高分的学生学号和课程编号（子查询或排序查询）。</span><br><span class="line">-- (SELECT MAX(degree) FROM score): 子查询，算出最高分</span><br><span class="line">SELECT s_no, c_no FROM score WHERE degree &#x3D; (SELECT MAX(degree) FROM score);</span><br><span class="line"></span><br><span class="line">--  排序查询</span><br><span class="line">-- LIMIT r, n: 表示从第r行开始，查询n条数据</span><br><span class="line">SELECT s_no, c_no, degree FROM score ORDER BY degree DESC LIMIT 0, 1;</span><br></pre></td></tr></table></figure><h3 id="分组计算平均成绩"><a href="#分组计算平均成绩" class="headerlink" title="分组计算平均成绩"></a>分组计算平均成绩</h3><p><strong>查询每门课的平均成绩。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- AVG: 平均值</span><br><span class="line">SELECT AVG(degree) FROM score WHERE c_no &#x3D; &#39;3-105&#39;;</span><br><span class="line">SELECT AVG(degree) FROM score WHERE c_no &#x3D; &#39;3-245&#39;;</span><br><span class="line">SELECT AVG(degree) FROM score WHERE c_no &#x3D; &#39;6-166&#39;;</span><br><span class="line"></span><br><span class="line">-- GROUP BY: 分组查询</span><br><span class="line">SELECT c_no, AVG(degree) FROM score GROUP BY c_no;</span><br></pre></td></tr></table></figure><h3 id="分组条件与模糊查询"><a href="#分组条件与模糊查询" class="headerlink" title="分组条件与模糊查询"></a>分组条件与模糊查询</h3><p><strong>查询 <code>score</code> 表中至少有 2 名学生选修，并以 3 开头的课程的平均分数。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM score;</span><br><span class="line">-- c_no 课程编号</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 103  | 3-105 |     92 |</span><br><span class="line">| 103  | 3-245 |     86 |</span><br><span class="line">| 103  | 6-166 |     85 |</span><br><span class="line">| 105  | 3-105 |     88 |</span><br><span class="line">| 105  | 3-245 |     75 |</span><br><span class="line">| 105  | 6-166 |     79 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">| 109  | 3-245 |     68 |</span><br><span class="line">| 109  | 6-166 |     81 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><p>分析表发现，至少有 2 名学生选修的课程是 <code>3-105</code> 、<code>3-245</code> 、<code>6-166</code> ，以 3 开头的课程是 <code>3-105</code> 、<code>3-245</code> 。也就是说，我们要查询所有 <code>3-105</code> 和 <code>3-245</code> 的 <code>degree</code> 平均分。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">-- 首先把 c_no, AVG(degree) 通过分组查询出来</span><br><span class="line">SELECT c_no, AVG(degree) FROM score GROUP BY c_no</span><br><span class="line">+-------+-------------+</span><br><span class="line">| c_no  | AVG(degree) |</span><br><span class="line">+-------+-------------+</span><br><span class="line">| 3-105 |     85.3333 |</span><br><span class="line">| 3-245 |     76.3333 |</span><br><span class="line">| 6-166 |     81.6667 |</span><br><span class="line">+-------+-------------+</span><br><span class="line"></span><br><span class="line">-- 再查询出至少有 2 名学生选修的课程</span><br><span class="line">-- HAVING: 表示持有</span><br><span class="line">HAVING COUNT(c_no) &gt;&#x3D; 2</span><br><span class="line"></span><br><span class="line">-- 并且是以 3 开头的课程</span><br><span class="line">-- LIKE 表示模糊查询，&quot;%&quot; 是一个通配符，匹配 &quot;3&quot; 后面的任意字符。</span><br><span class="line">AND c_no LIKE &#39;3%&#39;;</span><br><span class="line"></span><br><span class="line">-- 把前面的SQL语句拼接起来，</span><br><span class="line">-- 后面加上一个 COUNT(*)，表示将每个分组的个数也查询出来。</span><br><span class="line">SELECT c_no, AVG(degree), COUNT(*) FROM score GROUP BY c_no</span><br><span class="line">HAVING COUNT(c_no) &gt;&#x3D; 2 AND c_no LIKE &#39;3%&#39;;</span><br><span class="line">+-------+-------------+----------+</span><br><span class="line">| c_no  | AVG(degree) | COUNT(*) |</span><br><span class="line">+-------+-------------+----------+</span><br><span class="line">| 3-105 |     85.3333 |        3 |</span><br><span class="line">| 3-245 |     76.3333 |        3 |</span><br><span class="line">+-------+-------------+----------+</span><br></pre></td></tr></table></figure><h3 id="多表查询-1"><a href="#多表查询-1" class="headerlink" title="多表查询 - 1"></a>多表查询 - 1</h3><p><strong>查询所有学生的 <code>name</code>，以及该学生在 <code>score</code> 表中对应的 <code>c_no</code> 和 <code>degree</code> 。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">SELECT no, name FROM student;</span><br><span class="line">+-----+-----------+</span><br><span class="line">| no  | name      |</span><br><span class="line">+-----+-----------+</span><br><span class="line">| 101 | 曾华      |</span><br><span class="line">| 102 | 匡明      |</span><br><span class="line">| 103 | 王丽      |</span><br><span class="line">| 104 | 李军      |</span><br><span class="line">| 105 | 王芳      |</span><br><span class="line">| 106 | 陆军      |</span><br><span class="line">| 107 | 王尼玛    |</span><br><span class="line">| 108 | 张全蛋    |</span><br><span class="line">| 109 | 赵铁柱    |</span><br><span class="line">+-----+-----------+</span><br><span class="line"></span><br><span class="line">SELECT s_no, c_no, degree FROM score;</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 103  | 3-105 |     92 |</span><br><span class="line">| 103  | 3-245 |     86 |</span><br><span class="line">| 103  | 6-166 |     85 |</span><br><span class="line">| 105  | 3-105 |     88 |</span><br><span class="line">| 105  | 3-245 |     75 |</span><br><span class="line">| 105  | 6-166 |     79 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">| 109  | 3-245 |     68 |</span><br><span class="line">| 109  | 6-166 |     81 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><p>通过分析可以发现，只要把 <code>score</code> 表中的 <code>s_no</code> 字段值替换成 <code>student</code> 表中对应的 <code>name</code> 字段值就可以了，如何做呢？</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- FROM...: 表示从 student, score 表中查询</span><br><span class="line">-- WHERE 的条件表示为，只有在 student.no 和 score.s_no 相等时才显示出来。</span><br><span class="line">SELECT name, c_no, degree FROM student, score </span><br><span class="line">WHERE student.no &#x3D; score.s_no;</span><br><span class="line">+-----------+-------+--------+</span><br><span class="line">| name      | c_no  | degree |</span><br><span class="line">+-----------+-------+--------+</span><br><span class="line">| 王丽      | 3-105 |     92 |</span><br><span class="line">| 王丽      | 3-245 |     86 |</span><br><span class="line">| 王丽      | 6-166 |     85 |</span><br><span class="line">| 王芳      | 3-105 |     88 |</span><br><span class="line">| 王芳      | 3-245 |     75 |</span><br><span class="line">| 王芳      | 6-166 |     79 |</span><br><span class="line">| 赵铁柱    | 3-105 |     76 |</span><br><span class="line">| 赵铁柱    | 3-245 |     68 |</span><br><span class="line">| 赵铁柱    | 6-166 |     81 |</span><br><span class="line">+-----------+-------+--------+</span><br></pre></td></tr></table></figure><h3 id="多表查询-2"><a href="#多表查询-2" class="headerlink" title="多表查询 - 2"></a>多表查询 - 2</h3><p><strong>查询所有学生的 <code>no</code> 、课程名称 ( <code>course</code> 表中的 <code>name</code> ) 和成绩 ( <code>score</code> 表中的 <code>degree</code> ) 列。</strong></p><p>只有 <code>score</code> 关联学生的 <code>no</code> ，因此只要查询 <code>score</code> 表，就能找出所有和学生相关的 <code>no</code> 和 <code>degree</code> ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT s_no, c_no, degree FROM score;</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 103  | 3-105 |     92 |</span><br><span class="line">| 103  | 3-245 |     86 |</span><br><span class="line">| 103  | 6-166 |     85 |</span><br><span class="line">| 105  | 3-105 |     88 |</span><br><span class="line">| 105  | 3-245 |     75 |</span><br><span class="line">| 105  | 6-166 |     79 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">| 109  | 3-245 |     68 |</span><br><span class="line">| 109  | 6-166 |     81 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><p>然后查询 <code>course</code> 表：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+-------+-----------------+</span><br><span class="line">| no    | name            |</span><br><span class="line">+-------+-----------------+</span><br><span class="line">| 3-105 | 计算机导论      |</span><br><span class="line">| 3-245 | 操作系统        |</span><br><span class="line">| 6-166 | 数字电路        |</span><br><span class="line">| 9-888 | 高等数学        |</span><br><span class="line">+-------+-----------------+</span><br></pre></td></tr></table></figure><p>只要把 <code>score</code> 表中的 <code>c_no</code> 替换成 <code>course</code> 表中对应的 <code>name</code> 字段值就可以了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 增加一个查询字段 name，分别从 score、course 这两个表中查询。</span><br><span class="line">-- as 表示取一个该字段的别名。</span><br><span class="line">SELECT s_no, name as c_name, degree FROM score, course</span><br><span class="line">WHERE score.c_no &#x3D; course.no;</span><br><span class="line">+------+-----------------+--------+</span><br><span class="line">| s_no | c_name          | degree |</span><br><span class="line">+------+-----------------+--------+</span><br><span class="line">| 103  | 计算机导论      |     92 |</span><br><span class="line">| 105  | 计算机导论      |     88 |</span><br><span class="line">| 109  | 计算机导论      |     76 |</span><br><span class="line">| 103  | 操作系统        |     86 |</span><br><span class="line">| 105  | 操作系统        |     75 |</span><br><span class="line">| 109  | 操作系统        |     68 |</span><br><span class="line">| 103  | 数字电路        |     85 |</span><br><span class="line">| 105  | 数字电路        |     79 |</span><br><span class="line">| 109  | 数字电路        |     81 |</span><br><span class="line">+------+-----------------+--------+</span><br></pre></td></tr></table></figure><h3 id="三表关联查询"><a href="#三表关联查询" class="headerlink" title="三表关联查询"></a>三表关联查询</h3><p><strong>查询所有学生的 <code>name</code> 、课程名 ( <code>course</code> 表中的 <code>name</code> ) 和 <code>degree</code> 。</strong></p><p>只有 <code>score</code> 表中关联学生的学号和课堂号，我们只要围绕着 <code>score</code> 这张表查询就好了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM score;</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 103  | 3-105 |     92 |</span><br><span class="line">| 103  | 3-245 |     86 |</span><br><span class="line">| 103  | 6-166 |     85 |</span><br><span class="line">| 105  | 3-105 |     88 |</span><br><span class="line">| 105  | 3-245 |     75 |</span><br><span class="line">| 105  | 6-166 |     79 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">| 109  | 3-245 |     68 |</span><br><span class="line">| 109  | 6-166 |     81 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><p>只要把 <code>s_no</code> 和 <code>c_no</code> 替换成 <code>student</code> 和 <code>srouse</code> 表中对应的 <code>name</code> 字段值就好了。</p><p>首先把 <code>s_no</code> 替换成 <code>student</code> 表中的 <code>name</code> 字段：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT name, c_no, degree FROM student, score WHERE student.no &#x3D; score.s_no;</span><br><span class="line">+-----------+-------+--------+</span><br><span class="line">| name      | c_no  | degree |</span><br><span class="line">+-----------+-------+--------+</span><br><span class="line">| 王丽      | 3-105 |     92 |</span><br><span class="line">| 王丽      | 3-245 |     86 |</span><br><span class="line">| 王丽      | 6-166 |     85 |</span><br><span class="line">| 王芳      | 3-105 |     88 |</span><br><span class="line">| 王芳      | 3-245 |     75 |</span><br><span class="line">| 王芳      | 6-166 |     79 |</span><br><span class="line">| 赵铁柱    | 3-105 |     76 |</span><br><span class="line">| 赵铁柱    | 3-245 |     68 |</span><br><span class="line">| 赵铁柱    | 6-166 |     81 |</span><br><span class="line">+-----------+-------+--------+</span><br></pre></td></tr></table></figure><p>再把 <code>c_no</code> 替换成 <code>course</code> 表中的 <code>name</code> 字段：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 课程表</span><br><span class="line">SELECT no, name FROM course;</span><br><span class="line">+-------+-----------------+</span><br><span class="line">| no    | name            |</span><br><span class="line">+-------+-----------------+</span><br><span class="line">| 3-105 | 计算机导论      |</span><br><span class="line">| 3-245 | 操作系统        |</span><br><span class="line">| 6-166 | 数字电路        |</span><br><span class="line">| 9-888 | 高等数学        |</span><br><span class="line">+-------+-----------------+</span><br><span class="line"></span><br><span class="line">-- 由于字段名存在重复，使用 &quot;表名.字段名 as 别名&quot; 代替。</span><br><span class="line">SELECT student.name as s_name, course.name as c_name, degree </span><br><span class="line">FROM student, score, course</span><br><span class="line">WHERE student.NO &#x3D; score.s_no</span><br><span class="line">AND score.c_no &#x3D; course.no;</span><br></pre></td></tr></table></figure><h3 id="子查询加分组求平均分"><a href="#子查询加分组求平均分" class="headerlink" title="子查询加分组求平均分"></a>子查询加分组求平均分</h3><p><strong>查询 <code>95031</code> 班学生每门课程的平均成绩。</strong></p><p>在 <code>score</code> 表中根据 <code>student</code>  表的学生编号筛选出学生的课堂号和成绩：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- IN (..): 将筛选出的学生号当做 s_no 的条件查询</span><br><span class="line">SELECT s_no, c_no, degree FROM score</span><br><span class="line">WHERE s_no IN (SELECT no FROM student WHERE class &#x3D; &#39;95031&#39;);</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 105  | 3-105 |     88 |</span><br><span class="line">| 105  | 3-245 |     75 |</span><br><span class="line">| 105  | 6-166 |     79 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">| 109  | 3-245 |     68 |</span><br><span class="line">| 109  | 6-166 |     81 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><p>这时只要将 <code>c_no</code> 分组一下就能得出 <code>95031</code> 班学生每门课的平均成绩：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT c_no, AVG(degree) FROM score</span><br><span class="line">WHERE s_no IN (SELECT no FROM student WHERE class &#x3D; &#39;95031&#39;)</span><br><span class="line">GROUP BY c_no;</span><br><span class="line">+-------+-------------+</span><br><span class="line">| c_no  | AVG(degree) |</span><br><span class="line">+-------+-------------+</span><br><span class="line">| 3-105 |     82.0000 |</span><br><span class="line">| 3-245 |     71.5000 |</span><br><span class="line">| 6-166 |     80.0000 |</span><br><span class="line">+-------+-------------+</span><br></pre></td></tr></table></figure><h3 id="子查询-1"><a href="#子查询-1" class="headerlink" title="子查询 - 1"></a>子查询 - 1</h3><p><strong>查询在 <code>3-105</code> 课程中，所有成绩高于 <code>109</code> 号同学的记录。</strong></p><p>首先筛选出课堂号为 <code>3-105</code> ，在找出所有成绩高于 <code>109</code> 号同学的的行。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM score </span><br><span class="line">WHERE c_no &#x3D; &#39;3-105&#39;</span><br><span class="line">AND degree &gt; (SELECT degree FROM score WHERE s_no &#x3D; &#39;109&#39; AND c_no &#x3D; &#39;3-105&#39;);</span><br></pre></td></tr></table></figure><h3 id="子查询-2"><a href="#子查询-2" class="headerlink" title="子查询 - 2"></a>子查询 - 2</h3><p><strong>查询所有成绩高于 <code>109</code> 号同学的 <code>3-105</code> 课程成绩记录。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 不限制课程号，只要成绩大于109号同学的3-105课程成绩就可以。</span><br><span class="line">SELECT * FROM score</span><br><span class="line">WHERE degree &gt; (SELECT degree FROM score WHERE s_no &#x3D; &#39;109&#39; AND c_no &#x3D; &#39;3-105&#39;);</span><br></pre></td></tr></table></figure><h3 id="YEAR-函数与带-IN-关键字查询"><a href="#YEAR-函数与带-IN-关键字查询" class="headerlink" title="YEAR 函数与带 IN 关键字查询"></a>YEAR 函数与带 IN 关键字查询</h3><p><strong>查询所有和 <code>101</code> 、<code>108</code> 号学生同年出生的 <code>no</code> 、<code>name</code> 、<code>birthday</code> 列。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- YEAR(..): 取出日期中的年份</span><br><span class="line">SELECT no, name, birthday FROM student</span><br><span class="line">WHERE YEAR(birthday) IN (SELECT YEAR(birthday) FROM student WHERE no IN (101, 108));</span><br></pre></td></tr></table></figure><h3 id="多层嵌套子查询"><a href="#多层嵌套子查询" class="headerlink" title="多层嵌套子查询"></a>多层嵌套子查询</h3><p><strong>查询 <code>&#39;张旭&#39;</code> 教师任课的学生成绩表。</strong></p><p>首先找到教师编号：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT NO FROM teacher WHERE NAME &#x3D; &#39;张旭&#39;</span><br></pre></td></tr></table></figure><p>通过 <code>sourse</code> 表找到该教师课程号：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT NO FROM course WHERE t_no &#x3D; ( SELECT NO FROM teacher WHERE NAME &#x3D; &#39;张旭&#39; );</span><br></pre></td></tr></table></figure><p>通过筛选出的课程号查询成绩表：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM score WHERE c_no &#x3D; (</span><br><span class="line">    SELECT no FROM course WHERE t_no &#x3D; ( </span><br><span class="line">        SELECT no FROM teacher WHERE NAME &#x3D; &#39;张旭&#39; </span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><p><strong>查询某选修课程多于5个同学的教师姓名。</strong></p><p>首先在 <code>teacher</code> 表中，根据 <code>no</code> 字段来判断该教师的同一门课程是否有至少5名学员选修：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 查询 teacher 表</span><br><span class="line">SELECT no, name FROM teacher;</span><br><span class="line">+-----+--------+</span><br><span class="line">| no  | name   |</span><br><span class="line">+-----+--------+</span><br><span class="line">| 804 | 李诚   |</span><br><span class="line">| 825 | 王萍   |</span><br><span class="line">| 831 | 刘冰   |</span><br><span class="line">| 856 | 张旭   |</span><br><span class="line">+-----+--------+</span><br><span class="line"></span><br><span class="line">SELECT name FROM teacher WHERE no IN (</span><br><span class="line">    -- 在这里找到对应的条件</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>查看和教师编号有有关的表的信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM course;</span><br><span class="line">-- t_no: 教师编号</span><br><span class="line">+-------+-----------------+------+</span><br><span class="line">| no    | name            | t_no |</span><br><span class="line">+-------+-----------------+------+</span><br><span class="line">| 3-105 | 计算机导论      | 825  |</span><br><span class="line">| 3-245 | 操作系统        | 804  |</span><br><span class="line">| 6-166 | 数字电路        | 856  |</span><br><span class="line">| 9-888 | 高等数学        | 831  |</span><br><span class="line">+-------+-----------------+------+</span><br></pre></td></tr></table></figure><p>我们已经找到和教师编号有关的字段就在 <code>course</code> 表中，但是还无法知道哪门课程至少有5名学生选修，所以还需要根据 <code>score</code> 表来查询：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">-- 在此之前向 score 插入一些数据，以便丰富查询条件。</span><br><span class="line">INSERT INTO score VALUES (&#39;101&#39;, &#39;3-105&#39;, &#39;90&#39;);</span><br><span class="line">INSERT INTO score VALUES (&#39;102&#39;, &#39;3-105&#39;, &#39;91&#39;);</span><br><span class="line">INSERT INTO score VALUES (&#39;104&#39;, &#39;3-105&#39;, &#39;89&#39;);</span><br><span class="line"></span><br><span class="line">-- 查询 score 表</span><br><span class="line">SELECT * FROM score;</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 101  | 3-105 |     90 |</span><br><span class="line">| 102  | 3-105 |     91 |</span><br><span class="line">| 103  | 3-105 |     92 |</span><br><span class="line">| 103  | 3-245 |     86 |</span><br><span class="line">| 103  | 6-166 |     85 |</span><br><span class="line">| 104  | 3-105 |     89 |</span><br><span class="line">| 105  | 3-105 |     88 |</span><br><span class="line">| 105  | 3-245 |     75 |</span><br><span class="line">| 105  | 6-166 |     79 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">| 109  | 3-245 |     68 |</span><br><span class="line">| 109  | 6-166 |     81 |</span><br><span class="line">+------+-------+--------+</span><br><span class="line"></span><br><span class="line">-- 在 score 表中将 c_no 作为分组，并且限制 c_no 持有至少 5 条数据。</span><br><span class="line">SELECT c_no FROM score GROUP BY c_no HAVING COUNT(*) &gt; 5;</span><br><span class="line">+-------+</span><br><span class="line">| c_no  |</span><br><span class="line">+-------+</span><br><span class="line">| 3-105 |</span><br><span class="line">+-------+</span><br></pre></td></tr></table></figure><p>根据筛选出来的课程号，找出在某课程中，拥有至少5名学员的教师编号：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT t_no FROM course WHERE no IN (</span><br><span class="line">    SELECT c_no FROM score GROUP BY c_no HAVING COUNT(*) &gt; 5</span><br><span class="line">);</span><br><span class="line">+------+</span><br><span class="line">| t_no |</span><br><span class="line">+------+</span><br><span class="line">| 825  |</span><br><span class="line">+------+</span><br></pre></td></tr></table></figure><p>在 <code>teacher</code> 表中，根据筛选出来的教师编号找到教师姓名：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT name FROM teacher WHERE no IN (</span><br><span class="line">    -- 最终条件</span><br><span class="line">    SELECT t_no FROM course WHERE no IN (</span><br><span class="line">        SELECT c_no FROM score GROUP BY c_no HAVING COUNT(*) &gt; 5</span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="子查询-3"><a href="#子查询-3" class="headerlink" title="子查询 - 3"></a>子查询 - 3</h3><p><strong>查询 “计算机系” 课程的成绩表。</strong></p><p>思路是，先找出 <code>course</code> 表中所有 <code>计算机系</code> 课程的编号，然后根据这个编号查询 <code>score</code> 表。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">-- 通过 teacher 表查询所有 &#96;计算机系&#96; 的教师编号</span><br><span class="line">SELECT no, name, department FROM teacher WHERE department &#x3D; &#39;计算机系&#39;</span><br><span class="line">+-----+--------+--------------+</span><br><span class="line">| no  | name   | department   |</span><br><span class="line">+-----+--------+--------------+</span><br><span class="line">| 804 | 李诚   | 计算机系     |</span><br><span class="line">| 825 | 王萍   | 计算机系     |</span><br><span class="line">+-----+--------+--------------+</span><br><span class="line"></span><br><span class="line">-- 通过 course 表查询该教师的课程编号</span><br><span class="line">SELECT no FROM course WHERE t_no IN (</span><br><span class="line">    SELECT no FROM teacher WHERE department &#x3D; &#39;计算机系&#39;</span><br><span class="line">);</span><br><span class="line">+-------+</span><br><span class="line">| no    |</span><br><span class="line">+-------+</span><br><span class="line">| 3-245 |</span><br><span class="line">| 3-105 |</span><br><span class="line">+-------+</span><br><span class="line"></span><br><span class="line">-- 根据筛选出来的课程号查询成绩表</span><br><span class="line">SELECT * FROM score WHERE c_no IN (</span><br><span class="line">    SELECT no FROM course WHERE t_no IN (</span><br><span class="line">        SELECT no FROM teacher WHERE department &#x3D; &#39;计算机系&#39;</span><br><span class="line">    )</span><br><span class="line">);</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 103  | 3-245 |     86 |</span><br><span class="line">| 105  | 3-245 |     75 |</span><br><span class="line">| 109  | 3-245 |     68 |</span><br><span class="line">| 101  | 3-105 |     90 |</span><br><span class="line">| 102  | 3-105 |     91 |</span><br><span class="line">| 103  | 3-105 |     92 |</span><br><span class="line">| 104  | 3-105 |     89 |</span><br><span class="line">| 105  | 3-105 |     88 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><h3 id="UNION-和-NOTIN-的使用"><a href="#UNION-和-NOTIN-的使用" class="headerlink" title="UNION 和 NOTIN 的使用"></a>UNION 和 NOTIN 的使用</h3><p><strong>查询 <code>计算机系</code> 与 <code>电子工程系</code> 中的不同职称的教师。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- NOT: 代表逻辑非</span><br><span class="line">SELECT * FROM teacher WHERE department &#x3D; &#39;计算机系&#39; AND profession NOT IN (</span><br><span class="line">    SELECT profession FROM teacher WHERE department &#x3D; &#39;电子工程系&#39;</span><br><span class="line">)</span><br><span class="line">-- 合并两个集</span><br><span class="line">UNION</span><br><span class="line">SELECT * FROM teacher WHERE department &#x3D; &#39;电子工程系&#39; AND profession NOT IN (</span><br><span class="line">    SELECT profession FROM teacher WHERE department &#x3D; &#39;计算机系&#39;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="ANY-表示至少一个-DESC-降序"><a href="#ANY-表示至少一个-DESC-降序" class="headerlink" title="ANY 表示至少一个 - DESC ( 降序 )"></a>ANY 表示至少一个 - DESC ( 降序 )</h3><p><strong>查询课程 <code>3-105</code> 且成绩 <u>至少</u> 高于 <code>3-245</code> 的 <code>score</code> 表。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM score WHERE c_no &#x3D; &#39;3-105&#39;;</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 101  | 3-105 |     90 |</span><br><span class="line">| 102  | 3-105 |     91 |</span><br><span class="line">| 103  | 3-105 |     92 |</span><br><span class="line">| 104  | 3-105 |     89 |</span><br><span class="line">| 105  | 3-105 |     88 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">+------+-------+--------+</span><br><span class="line"></span><br><span class="line">SELECT * FROM score WHERE c_no &#x3D; &#39;3-245&#39;;</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 103  | 3-245 |     86 |</span><br><span class="line">| 105  | 3-245 |     75 |</span><br><span class="line">| 109  | 3-245 |     68 |</span><br><span class="line">+------+-------+--------+</span><br><span class="line"></span><br><span class="line">-- ANY: 符合SQL语句中的任意条件。</span><br><span class="line">-- 也就是说，在 3-105 成绩中，只要有一个大于从 3-245 筛选出来的任意行就符合条件，</span><br><span class="line">-- 最后根据降序查询结果。</span><br><span class="line">SELECT * FROM score WHERE c_no &#x3D; &#39;3-105&#39; AND degree &gt; ANY(</span><br><span class="line">    SELECT degree FROM score WHERE c_no &#x3D; &#39;3-245&#39;</span><br><span class="line">) ORDER BY degree DESC;</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 103  | 3-105 |     92 |</span><br><span class="line">| 102  | 3-105 |     91 |</span><br><span class="line">| 101  | 3-105 |     90 |</span><br><span class="line">| 104  | 3-105 |     89 |</span><br><span class="line">| 105  | 3-105 |     88 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><h3 id="表示所有的-ALL"><a href="#表示所有的-ALL" class="headerlink" title="表示所有的 ALL"></a>表示所有的 ALL</h3><p><strong>查询课程 <code>3-105</code> 且成绩高于 <code>3-245</code> 的 <code>score</code> 表。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 只需对上一道题稍作修改。</span><br><span class="line">-- ALL: 符合SQL语句中的所有条件。</span><br><span class="line">-- 也就是说，在 3-105 每一行成绩中，都要大于从 3-245 筛选出来全部行才算符合条件。</span><br><span class="line">SELECT * FROM score WHERE c_no &#x3D; &#39;3-105&#39; AND degree &gt; ALL(</span><br><span class="line">    SELECT degree FROM score WHERE c_no &#x3D; &#39;3-245&#39;</span><br><span class="line">);</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 101  | 3-105 |     90 |</span><br><span class="line">| 102  | 3-105 |     91 |</span><br><span class="line">| 103  | 3-105 |     92 |</span><br><span class="line">| 104  | 3-105 |     89 |</span><br><span class="line">| 105  | 3-105 |     88 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><h3 id="复制表的数据作为条件查询"><a href="#复制表的数据作为条件查询" class="headerlink" title="复制表的数据作为条件查询"></a>复制表的数据作为条件查询</h3><p><strong>查询某课程成绩比该课程平均成绩低的 <code>score</code> 表。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">-- 查询平均分</span><br><span class="line">SELECT c_no, AVG(degree) FROM score GROUP BY c_no;</span><br><span class="line">+-------+-------------+</span><br><span class="line">| c_no  | AVG(degree) |</span><br><span class="line">+-------+-------------+</span><br><span class="line">| 3-105 |     87.6667 |</span><br><span class="line">| 3-245 |     76.3333 |</span><br><span class="line">| 6-166 |     81.6667 |</span><br><span class="line">+-------+-------------+</span><br><span class="line"></span><br><span class="line">-- 查询 score 表</span><br><span class="line">SELECT degree FROM score;</span><br><span class="line">+--------+</span><br><span class="line">| degree |</span><br><span class="line">+--------+</span><br><span class="line">|     90 |</span><br><span class="line">|     91 |</span><br><span class="line">|     92 |</span><br><span class="line">|     86 |</span><br><span class="line">|     85 |</span><br><span class="line">|     89 |</span><br><span class="line">|     88 |</span><br><span class="line">|     75 |</span><br><span class="line">|     79 |</span><br><span class="line">|     76 |</span><br><span class="line">|     68 |</span><br><span class="line">|     81 |</span><br><span class="line">+--------+</span><br><span class="line"></span><br><span class="line">-- 将表 b 作用于表 a 中查询数据</span><br><span class="line">-- score a (b): 将表声明为 a (b)，</span><br><span class="line">-- 如此就能用 a.c_no &#x3D; b.c_no 作为条件执行查询了。</span><br><span class="line">SELECT * FROM score a WHERE degree &lt; (</span><br><span class="line">    (SELECT AVG(degree) FROM score b WHERE a.c_no &#x3D; b.c_no)</span><br><span class="line">);</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 105  | 3-245 |     75 |</span><br><span class="line">| 105  | 6-166 |     79 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">| 109  | 3-245 |     68 |</span><br><span class="line">| 109  | 6-166 |     81 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><h3 id="子查询-4"><a href="#子查询-4" class="headerlink" title="子查询 - 4"></a>子查询 - 4</h3><p><strong>查询所有任课 ( 在 <code>course</code> 表里有课程 ) 教师的 <code>name</code> 和 <code>department</code></strong> 。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT name, department FROM teacher WHERE no IN (SELECT t_no FROM course);</span><br><span class="line">+--------+-----------------+</span><br><span class="line">| name   | department      |</span><br><span class="line">+--------+-----------------+</span><br><span class="line">| 李诚   | 计算机系        |</span><br><span class="line">| 王萍   | 计算机系        |</span><br><span class="line">| 刘冰   | 电子工程系      |</span><br><span class="line">| 张旭   | 电子工程系      |</span><br><span class="line">+--------+-----------------+</span><br></pre></td></tr></table></figure><h3 id="条件加组筛选"><a href="#条件加组筛选" class="headerlink" title="条件加组筛选"></a>条件加组筛选</h3><p><strong>查询 <code>student</code> 表中至少有 2 名男生的 <code>class</code> 。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-- 查看学生表信息</span><br><span class="line">SELECT * FROM student;</span><br><span class="line">+-----+-----------+-----+------------+-------+</span><br><span class="line">| no  | name      | sex | birthday   | class |</span><br><span class="line">+-----+-----------+-----+------------+-------+</span><br><span class="line">| 101 | 曾华      | 男  | 1977-09-01 | 95033 |</span><br><span class="line">| 102 | 匡明      | 男  | 1975-10-02 | 95031 |</span><br><span class="line">| 103 | 王丽      | 女  | 1976-01-23 | 95033 |</span><br><span class="line">| 104 | 李军      | 男  | 1976-02-20 | 95033 |</span><br><span class="line">| 105 | 王芳      | 女  | 1975-02-10 | 95031 |</span><br><span class="line">| 106 | 陆军      | 男  | 1974-06-03 | 95031 |</span><br><span class="line">| 107 | 王尼玛    | 男  | 1976-02-20 | 95033 |</span><br><span class="line">| 108 | 张全蛋    | 男  | 1975-02-10 | 95031 |</span><br><span class="line">| 109 | 赵铁柱    | 男  | 1974-06-03 | 95031 |</span><br><span class="line">| 110 | 张飞      | 男  | 1974-06-03 | 95038 |</span><br><span class="line">+-----+-----------+-----+------------+-------+</span><br><span class="line"></span><br><span class="line">-- 只查询性别为男，然后按 class 分组，并限制 class 行大于 1。</span><br><span class="line">SELECT class FROM student WHERE sex &#x3D; &#39;男&#39; GROUP BY class HAVING COUNT(*) &gt; 1;</span><br><span class="line">+-------+</span><br><span class="line">| class |</span><br><span class="line">+-------+</span><br><span class="line">| 95033 |</span><br><span class="line">| 95031 |</span><br><span class="line">+-------+</span><br></pre></td></tr></table></figure><h3 id="NOTLIKE-模糊查询取反"><a href="#NOTLIKE-模糊查询取反" class="headerlink" title="NOTLIKE 模糊查询取反"></a>NOTLIKE 模糊查询取反</h3><p><strong>查询 <code>student</code> 表中不姓 “王” 的同学记录。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- NOT: 取反</span><br><span class="line">-- LIKE: 模糊查询</span><br><span class="line">mysql&gt; SELECT * FROM student WHERE name NOT LIKE &#39;王%&#39;;</span><br><span class="line">+-----+-----------+-----+------------+-------+</span><br><span class="line">| no  | name      | sex | birthday   | class |</span><br><span class="line">+-----+-----------+-----+------------+-------+</span><br><span class="line">| 101 | 曾华      | 男  | 1977-09-01 | 95033 |</span><br><span class="line">| 102 | 匡明      | 男  | 1975-10-02 | 95031 |</span><br><span class="line">| 104 | 李军      | 男  | 1976-02-20 | 95033 |</span><br><span class="line">| 106 | 陆军      | 男  | 1974-06-03 | 95031 |</span><br><span class="line">| 108 | 张全蛋    | 男  | 1975-02-10 | 95031 |</span><br><span class="line">| 109 | 赵铁柱    | 男  | 1974-06-03 | 95031 |</span><br><span class="line">| 110 | 张飞      | 男  | 1974-06-03 | 95038 |</span><br><span class="line">+-----+-----------+-----+------------+-------+</span><br></pre></td></tr></table></figure><h3 id="YEAR-与-NOW-函数"><a href="#YEAR-与-NOW-函数" class="headerlink" title="YEAR 与 NOW 函数"></a>YEAR 与 NOW 函数</h3><p><strong>查询 <code>student</code> 表中每个学生的姓名和年龄。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 使用函数 YEAR(NOW()) 计算出当前年份，减去出生年份后得出年龄。</span><br><span class="line">SELECT name, YEAR(NOW()) - YEAR(birthday) as age FROM student;</span><br><span class="line">+-----------+------+</span><br><span class="line">| name      | age  |</span><br><span class="line">+-----------+------+</span><br><span class="line">| 曾华      |   42 |</span><br><span class="line">| 匡明      |   44 |</span><br><span class="line">| 王丽      |   43 |</span><br><span class="line">| 李军      |   43 |</span><br><span class="line">| 王芳      |   44 |</span><br><span class="line">| 陆军      |   45 |</span><br><span class="line">| 王尼玛    |   43 |</span><br><span class="line">| 张全蛋    |   44 |</span><br><span class="line">| 赵铁柱    |   45 |</span><br><span class="line">| 张飞      |   45 |</span><br><span class="line">+-----------+------+</span><br></pre></td></tr></table></figure><h3 id="MAX-与-MIN-函数"><a href="#MAX-与-MIN-函数" class="headerlink" title="MAX 与 MIN 函数"></a>MAX 与 MIN 函数</h3><p><strong>查询 <code>student</code> 表中最大和最小的 <code>birthday</code> 值。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT MAX(birthday), MIN(birthday) FROM student;</span><br><span class="line">+---------------+---------------+</span><br><span class="line">| MAX(birthday) | MIN(birthday) |</span><br><span class="line">+---------------+---------------+</span><br><span class="line">| 1977-09-01    | 1974-06-03    |</span><br><span class="line">+---------------+---------------+</span><br></pre></td></tr></table></figure><h3 id="多段排序"><a href="#多段排序" class="headerlink" title="多段排序"></a>多段排序</h3><p><strong>以 <code>class</code> 和 <code>birthday</code> 从大到小的顺序查询 <code>student</code> 表。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student ORDER BY class DESC, birthday;</span><br><span class="line">+-----+-----------+-----+------------+-------+</span><br><span class="line">| no  | name      | sex | birthday   | class |</span><br><span class="line">+-----+-----------+-----+------------+-------+</span><br><span class="line">| 110 | 张飞      | 男  | 1974-06-03 | 95038 |</span><br><span class="line">| 103 | 王丽      | 女  | 1976-01-23 | 95033 |</span><br><span class="line">| 104 | 李军      | 男  | 1976-02-20 | 95033 |</span><br><span class="line">| 107 | 王尼玛    | 男  | 1976-02-20 | 95033 |</span><br><span class="line">| 101 | 曾华      | 男  | 1977-09-01 | 95033 |</span><br><span class="line">| 106 | 陆军      | 男  | 1974-06-03 | 95031 |</span><br><span class="line">| 109 | 赵铁柱    | 男  | 1974-06-03 | 95031 |</span><br><span class="line">| 105 | 王芳      | 女  | 1975-02-10 | 95031 |</span><br><span class="line">| 108 | 张全蛋    | 男  | 1975-02-10 | 95031 |</span><br><span class="line">| 102 | 匡明      | 男  | 1975-10-02 | 95031 |</span><br><span class="line">+-----+-----------+-----+------------+-------+</span><br></pre></td></tr></table></figure><h3 id="子查询-5"><a href="#子查询-5" class="headerlink" title="子查询 - 5"></a>子查询 - 5</h3><p><strong>查询 “男” 教师及其所上的课程。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM course WHERE t_no in (SELECT no FROM teacher WHERE sex &#x3D; &#39;男&#39;);</span><br><span class="line">+-------+--------------+------+</span><br><span class="line">| no    | name         | t_no |</span><br><span class="line">+-------+--------------+------+</span><br><span class="line">| 3-245 | 操作系统     | 804  |</span><br><span class="line">| 6-166 | 数字电路     | 856  |</span><br><span class="line">+-------+--------------+------+</span><br></pre></td></tr></table></figure><h3 id="MAX-函数与子查询"><a href="#MAX-函数与子查询" class="headerlink" title="MAX 函数与子查询"></a>MAX 函数与子查询</h3><p><strong>查询最高分同学的 <code>score</code> 表。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 找出最高成绩（该查询只能有一个结果）</span><br><span class="line">SELECT MAX(degree) FROM score;</span><br><span class="line"></span><br><span class="line">-- 根据上面的条件筛选出所有最高成绩表，</span><br><span class="line">-- 该查询可能有多个结果，假设 degree 值多次符合条件。</span><br><span class="line">SELECT * FROM score WHERE degree &#x3D; (SELECT MAX(degree) FROM score);</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 103  | 3-105 |     92 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><h3 id="子查询-6"><a href="#子查询-6" class="headerlink" title="子查询 - 6"></a>子查询 - 6</h3><p><strong>查询和 “李军” 同性别的所有同学 <code>name</code> 。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">-- 首先将李军的性别作为条件取出来</span><br><span class="line">SELECT sex FROM student WHERE name &#x3D; &#39;李军&#39;;</span><br><span class="line">+-----+</span><br><span class="line">| sex |</span><br><span class="line">+-----+</span><br><span class="line">| 男  |</span><br><span class="line">+-----+</span><br><span class="line"></span><br><span class="line">-- 根据性别查询 name 和 sex</span><br><span class="line">SELECT name, sex FROM student WHERE sex &#x3D; (</span><br><span class="line">    SELECT sex FROM student WHERE name &#x3D; &#39;李军&#39;</span><br><span class="line">);</span><br><span class="line">+-----------+-----+</span><br><span class="line">| name      | sex |</span><br><span class="line">+-----------+-----+</span><br><span class="line">| 曾华      | 男  |</span><br><span class="line">| 匡明      | 男  |</span><br><span class="line">| 李军      | 男  |</span><br><span class="line">| 陆军      | 男  |</span><br><span class="line">| 王尼玛    | 男  |</span><br><span class="line">| 张全蛋    | 男  |</span><br><span class="line">| 赵铁柱    | 男  |</span><br><span class="line">| 张飞      | 男  |</span><br><span class="line">+-----------+-----+</span><br></pre></td></tr></table></figure><h3 id="子查询-7"><a href="#子查询-7" class="headerlink" title="子查询 - 7"></a>子查询 - 7</h3><p><strong>查询和 “李军” 同性别且同班的同学 <code>name</code> 。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT name, sex, class FROM student WHERE sex &#x3D; (</span><br><span class="line">    SELECT sex FROM student WHERE name &#x3D; &#39;李军&#39;</span><br><span class="line">) AND class &#x3D; (</span><br><span class="line">    SELECT class FROM student WHERE name &#x3D; &#39;李军&#39;</span><br><span class="line">);</span><br><span class="line">+-----------+-----+-------+</span><br><span class="line">| name      | sex | class |</span><br><span class="line">+-----------+-----+-------+</span><br><span class="line">| 曾华      | 男  | 95033 |</span><br><span class="line">| 李军      | 男  | 95033 |</span><br><span class="line">| 王尼玛    | 男  | 95033 |</span><br><span class="line">+-----------+-----+-------+</span><br></pre></td></tr></table></figure><h3 id="子查询-8"><a href="#子查询-8" class="headerlink" title="子查询 - 8"></a>子查询 - 8</h3><p><strong>查询所有选修 “计算机导论” 课程的 “男” 同学成绩表。</strong></p><p>需要的 “计算机导论” 和性别为 “男” 的编号可以在 <code>course</code> 和 <code>student</code> 表中找到。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM score WHERE c_no &#x3D; (</span><br><span class="line">    SELECT no FROM course WHERE name &#x3D; &#39;计算机导论&#39;</span><br><span class="line">) AND s_no IN (</span><br><span class="line">    SELECT no FROM student WHERE sex &#x3D; &#39;男&#39;</span><br><span class="line">);</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| s_no | c_no  | degree |</span><br><span class="line">+------+-------+--------+</span><br><span class="line">| 101  | 3-105 |     90 |</span><br><span class="line">| 102  | 3-105 |     91 |</span><br><span class="line">| 104  | 3-105 |     89 |</span><br><span class="line">| 109  | 3-105 |     76 |</span><br><span class="line">+------+-------+--------+</span><br></pre></td></tr></table></figure><h3 id="按等级查询"><a href="#按等级查询" class="headerlink" title="按等级查询"></a>按等级查询</h3><p>建立一个 <code>grade</code> 表代表学生的成绩等级，并插入数据：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE grade (</span><br><span class="line">    low INT(3),</span><br><span class="line">    upp INT(3),</span><br><span class="line">    grade char(1)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO grade VALUES (90, 100, &#39;A&#39;);</span><br><span class="line">INSERT INTO grade VALUES (80, 89, &#39;B&#39;);</span><br><span class="line">INSERT INTO grade VALUES (70, 79, &#39;C&#39;);</span><br><span class="line">INSERT INTO grade VALUES (60, 69, &#39;D&#39;);</span><br><span class="line">INSERT INTO grade VALUES (0, 59, &#39;E&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM grade;</span><br><span class="line">+------+------+-------+</span><br><span class="line">| low  | upp  | grade |</span><br><span class="line">+------+------+-------+</span><br><span class="line">|   90 |  100 | A     |</span><br><span class="line">|   80 |   89 | B     |</span><br><span class="line">|   70 |   79 | C     |</span><br><span class="line">|   60 |   69 | D     |</span><br><span class="line">|    0 |   59 | E     |</span><br><span class="line">+------+------+-------+</span><br></pre></td></tr></table></figure><p><strong>查询所有学生的 <code>s_no</code> 、<code>c_no</code> 和 <code>grade</code> 列。</strong></p><p>思路是，使用区间 ( <code>BETWEEN</code> ) 查询，判断学生的成绩 ( <code>degree</code> )  在 <code>grade</code> 表的 <code>low</code> 和 <code>upp</code> 之间。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">SELECT s_no, c_no, grade FROM score, grade </span><br><span class="line">WHERE degree BETWEEN low AND upp;</span><br><span class="line">+------+-------+-------+</span><br><span class="line">| s_no | c_no  | grade |</span><br><span class="line">+------+-------+-------+</span><br><span class="line">| 101  | 3-105 | A     |</span><br><span class="line">| 102  | 3-105 | A     |</span><br><span class="line">| 103  | 3-105 | A     |</span><br><span class="line">| 103  | 3-245 | B     |</span><br><span class="line">| 103  | 6-166 | B     |</span><br><span class="line">| 104  | 3-105 | B     |</span><br><span class="line">| 105  | 3-105 | B     |</span><br><span class="line">| 105  | 3-245 | C     |</span><br><span class="line">| 105  | 6-166 | C     |</span><br><span class="line">| 109  | 3-105 | C     |</span><br><span class="line">| 109  | 3-245 | D     |</span><br><span class="line">| 109  | 6-166 | B     |</span><br><span class="line">+------+-------+-------+</span><br></pre></td></tr></table></figure><h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><p>准备用于测试连接查询的数据：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE testJoin;</span><br><span class="line"></span><br><span class="line">CREATE TABLE person (</span><br><span class="line">    id INT,</span><br><span class="line">    name VARCHAR(20),</span><br><span class="line">    cardId INT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE card (</span><br><span class="line">    id INT,</span><br><span class="line">    name VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO card VALUES (1, &#39;饭卡&#39;), (2, &#39;建行卡&#39;), (3, &#39;农行卡&#39;), (4, &#39;工商卡&#39;), (5, &#39;邮政卡&#39;);</span><br><span class="line">SELECT * FROM card;</span><br><span class="line">+------+-----------+</span><br><span class="line">| id   | name      |</span><br><span class="line">+------+-----------+</span><br><span class="line">|    1 | 饭卡      |</span><br><span class="line">|    2 | 建行卡    |</span><br><span class="line">|    3 | 农行卡    |</span><br><span class="line">|    4 | 工商卡    |</span><br><span class="line">|    5 | 邮政卡    |</span><br><span class="line">+------+-----------+</span><br><span class="line"></span><br><span class="line">INSERT INTO person VALUES (1, &#39;张三&#39;, 1), (2, &#39;李四&#39;, 3), (3, &#39;王五&#39;, 6);</span><br><span class="line">SELECT * FROM person;</span><br><span class="line">+------+--------+--------+</span><br><span class="line">| id   | name   | cardId |</span><br><span class="line">+------+--------+--------+</span><br><span class="line">|    1 | 张三   |      1 |</span><br><span class="line">|    2 | 李四   |      3 |</span><br><span class="line">|    3 | 王五   |      6 |</span><br><span class="line">+------+--------+--------+</span><br></pre></td></tr></table></figure><p>分析两张表发现，<code>person</code> 表并没有为 <code>cardId</code> 字段设置一个在 <code>card</code> 表中对应的 <code>id</code> 外键。如果设置了的话，<code>person</code> 中 <code>cardId</code> 字段值为 <code>6</code> 的行就插不进去，因为该 <code>cardId</code> 值在 <code>card</code> 表中并没有。</p><h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><p>要查询这两张表中有关系的数据，可以使用 <code>INNER JOIN</code> ( 内连接 ) 将它们连接在一起。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- INNER JOIN: 表示为内连接，将两张表拼接在一起。</span><br><span class="line">-- on: 表示要执行某个条件。</span><br><span class="line">SELECT * FROM person INNER JOIN card on person.cardId &#x3D; card.id;</span><br><span class="line">+------+--------+--------+------+-----------+</span><br><span class="line">| id   | name   | cardId | id   | name      |</span><br><span class="line">+------+--------+--------+------+-----------+</span><br><span class="line">|    1 | 张三   |      1 |    1 | 饭卡      |</span><br><span class="line">|    2 | 李四   |      3 |    3 | 农行卡    |</span><br><span class="line">+------+--------+--------+------+-----------+</span><br><span class="line"></span><br><span class="line">-- 将 INNER 关键字省略掉，结果也是一样的。</span><br><span class="line">-- SELECT * FROM person JOIN card on person.cardId &#x3D; card.id;</span><br></pre></td></tr></table></figure><blockquote><p>注意：<code>card</code> 的整张表被连接到了右边。</p></blockquote><h4 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h4><p>完整显示左边的表 ( <code>person</code> ) ，右边的表如果符合条件就显示，不符合则补 <code>NULL</code> 。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- LEFT JOIN 也叫做 LEFT OUTER JOIN，用这两种方式的查询结果是一样的。</span><br><span class="line">SELECT * FROM person LEFT JOIN card on person.cardId &#x3D; card.id;</span><br><span class="line">+------+--------+--------+------+-----------+</span><br><span class="line">| id   | name   | cardId | id   | name      |</span><br><span class="line">+------+--------+--------+------+-----------+</span><br><span class="line">|    1 | 张三   |      1 |    1 | 饭卡      |</span><br><span class="line">|    2 | 李四   |      3 |    3 | 农行卡    |</span><br><span class="line">|    3 | 王五   |      6 | NULL | NULL      |</span><br><span class="line">+------+--------+--------+------+-----------+</span><br></pre></td></tr></table></figure><h4 id="右外链接"><a href="#右外链接" class="headerlink" title="右外链接"></a>右外链接</h4><p>完整显示右边的表 ( <code>card</code> ) ，左边的表如果符合条件就显示，不符合则补 <code>NULL</code> 。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM person RIGHT JOIN card on person.cardId &#x3D; card.id;</span><br><span class="line">+------+--------+--------+------+-----------+</span><br><span class="line">| id   | name   | cardId | id   | name      |</span><br><span class="line">+------+--------+--------+------+-----------+</span><br><span class="line">|    1 | 张三   |      1 |    1 | 饭卡      |</span><br><span class="line">|    2 | 李四   |      3 |    3 | 农行卡    |</span><br><span class="line">| NULL | NULL   |   NULL |    2 | 建行卡    |</span><br><span class="line">| NULL | NULL   |   NULL |    4 | 工商卡    |</span><br><span class="line">| NULL | NULL   |   NULL |    5 | 邮政卡    |</span><br><span class="line">+------+--------+--------+------+-----------+</span><br></pre></td></tr></table></figure><h4 id="全外链接"><a href="#全外链接" class="headerlink" title="全外链接"></a>全外链接</h4><p>完整显示两张表的全部数据。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- MySQL 不支持这种语法的全外连接</span><br><span class="line">-- SELECT * FROM person FULL JOIN card on person.cardId &#x3D; card.id;</span><br><span class="line">-- 出现错误：</span><br><span class="line">-- ERROR 1054 (42S22): Unknown column &#39;person.cardId&#39; in &#39;on clause&#39;</span><br><span class="line"></span><br><span class="line">-- MySQL全连接语法，使用 UNION 将两张表合并在一起。</span><br><span class="line">SELECT * FROM person LEFT JOIN card on person.cardId &#x3D; card.id</span><br><span class="line">UNION</span><br><span class="line">SELECT * FROM person RIGHT JOIN card on person.cardId &#x3D; card.id;</span><br><span class="line">+------+--------+--------+------+-----------+</span><br><span class="line">| id   | name   | cardId | id   | name      |</span><br><span class="line">+------+--------+--------+------+-----------+</span><br><span class="line">|    1 | 张三   |      1 |    1 | 饭卡      |</span><br><span class="line">|    2 | 李四   |      3 |    3 | 农行卡    |</span><br><span class="line">|    3 | 王五   |      6 | NULL | NULL      |</span><br><span class="line">| NULL | NULL   |   NULL |    2 | 建行卡    |</span><br><span class="line">| NULL | NULL   |   NULL |    4 | 工商卡    |</span><br><span class="line">| NULL | NULL   |   NULL |    5 | 邮政卡    |</span><br><span class="line">+------+--------+--------+------+-----------+</span><br></pre></td></tr></table></figure><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>在 MySQL 中，事务其实是一个最小的不可分割的工作单元。事务能够<strong>保证一个业务的完整性</strong>。</p><p>比如我们的银行转账：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- a -&gt; -100</span><br><span class="line">UPDATE user set money &#x3D; money - 100 WHERE name &#x3D; &#39;a&#39;;</span><br><span class="line"></span><br><span class="line">-- b -&gt; +100</span><br><span class="line">UPDATE user set money &#x3D; money + 100 WHERE name &#x3D; &#39;b&#39;;</span><br></pre></td></tr></table></figure><p>在实际项目中，假设只有一条 SQL 语句执行成功，而另外一条执行失败了，就会出现数据前后不一致。</p><p>因此，在执行多条有关联 SQL 语句时，<strong>事务</strong>可能会要求这些 SQL 语句要么同时执行成功，要么就都执行失败。</p><h3 id="如何控制事务-COMMIT-ROLLBACK"><a href="#如何控制事务-COMMIT-ROLLBACK" class="headerlink" title="如何控制事务 - COMMIT / ROLLBACK"></a>如何控制事务 - COMMIT / ROLLBACK</h3><p>在 MySQL 中，事务的<strong>自动提交</strong>状态默认是开启的。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 查询事务的自动提交状态</span><br><span class="line">SELECT @@AUTOCOMMIT;</span><br><span class="line">+--------------+</span><br><span class="line">| @@AUTOCOMMIT |</span><br><span class="line">+--------------+</span><br><span class="line">|            1 |</span><br><span class="line">+--------------+</span><br></pre></td></tr></table></figure><p><strong>自动提交的作用</strong>：当我们执行一条 SQL 语句的时候，其产生的效果就会立即体现出来，且不能<strong>回滚</strong>。</p><p>什么是回滚？举个例子：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE bank;</span><br><span class="line"></span><br><span class="line">USE bank;</span><br><span class="line"></span><br><span class="line">CREATE TABLE user (</span><br><span class="line">    id INT PRIMARY KEY,</span><br><span class="line">    name VARCHAR(20),</span><br><span class="line">    money INT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO user VALUES (1, &#39;a&#39;, 1000);</span><br><span class="line"></span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">+----+------+-------+</span><br></pre></td></tr></table></figure><p>可以看到，在执行插入语句后数据立刻生效，原因是 MySQL 中的事务自动将它<strong>提交</strong>到了数据库中。那么所谓<strong>回滚</strong>的意思就是，撤销执行过的所有 SQL 语句，使其回滚到<strong>最后一次提交</strong>数据时的状态。</p><p>在 MySQL 中使用 <code>ROLLBACK</code> 执行回滚：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 回滚到最后一次提交</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">+----+------+-------+</span><br></pre></td></tr></table></figure><p>由于所有执行过的 SQL 语句都已经被提交过了，所以数据并没有发生回滚。那如何让数据可以发生回滚？</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 关闭自动提交</span><br><span class="line">SET AUTOCOMMIT &#x3D; 0;</span><br><span class="line"></span><br><span class="line">-- 查询自动提交状态</span><br><span class="line">SELECT @@AUTOCOMMIT;</span><br><span class="line">+--------------+</span><br><span class="line">| @@AUTOCOMMIT |</span><br><span class="line">+--------------+</span><br><span class="line">|            0 |</span><br><span class="line">+--------------+</span><br></pre></td></tr></table></figure><p>将自动提交关闭后，测试数据回滚：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO user VALUES (2, &#39;b&#39;, 1000);</span><br><span class="line"></span><br><span class="line">-- 关闭 AUTOCOMMIT 后，数据的变化是在一张虚拟的临时数据表中展示，</span><br><span class="line">-- 发生变化的数据并没有真正插入到数据表中。</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">|  2 | b    |  1000 |</span><br><span class="line">+----+------+-------+</span><br><span class="line"></span><br><span class="line">-- 数据表中的真实数据其实还是：</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">+----+------+-------+</span><br><span class="line"></span><br><span class="line">-- 由于数据还没有真正提交，可以使用回滚</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">-- 再次查询</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">+----+------+-------+</span><br></pre></td></tr></table></figure><p>那如何将虚拟的数据真正提交到数据库中？使用 <code>COMMIT</code> : </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO user VALUES (2, &#39;b&#39;, 1000);</span><br><span class="line">-- 手动提交数据（持久性），</span><br><span class="line">-- 将数据真正提交到数据库中，执行后不能再回滚提交过的数据。</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">-- 提交后测试回滚</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">-- 再次查询（回滚无效了）</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">|  2 | b    |  1000 |</span><br><span class="line">+----+------+-------+</span><br></pre></td></tr></table></figure><blockquote><p><strong>总结</strong></p><ol><li><p><strong>自动提交</strong></p><ul><li><p>查看自动提交状态：<code>SELECT @@AUTOCOMMIT</code> ；</p></li><li><p>设置自动提交状态：<code>SET AUTOCOMMIT = 0</code> 。</p></li></ul></li><li><p><strong>手动提交</strong></p><p><code>@@AUTOCOMMIT = 0</code> 时，使用 <code>COMMIT</code> 命令提交事务。</p></li><li><p><strong>事务回滚</strong></p><p><code>@@AUTOCOMMIT = 0</code> 时，使用 <code>ROLLBACK</code> 命令回滚事务。</p></li></ol></blockquote><p><strong>事务的实际应用</strong>，让我们再回到银行转账项目：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- 转账</span><br><span class="line">UPDATE user set money &#x3D; money - 100 WHERE name &#x3D; &#39;a&#39;;</span><br><span class="line"></span><br><span class="line">-- 到账</span><br><span class="line">UPDATE user set money &#x3D; money + 100 WHERE name &#x3D; &#39;b&#39;;</span><br><span class="line"></span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |   900 |</span><br><span class="line">|  2 | b    |  1100 |</span><br><span class="line">+----+------+-------+</span><br></pre></td></tr></table></figure><p>这时假设在转账时发生了意外，就可以使用 <code>ROLLBACK</code> 回滚到最后一次提交的状态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 假设转账发生了意外，需要回滚。</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">|  2 | b    |  1000 |</span><br><span class="line">+----+------+-------+</span><br></pre></td></tr></table></figure><p>这时我们又回到了发生意外之前的状态，也就是说，事务给我们提供了一个可以反悔的机会。假设数据没有发生意外，这时可以手动将数据真正提交到数据表中：<code>COMMIT</code> 。</p><h3 id="手动开启事务-BEGIN-START-TRANSACTION"><a href="#手动开启事务-BEGIN-START-TRANSACTION" class="headerlink" title="手动开启事务 - BEGIN / START TRANSACTION"></a>手动开启事务 - BEGIN / START TRANSACTION</h3><p>事务的默认提交被开启 ( <code>@@AUTOCOMMIT = 1</code> ) 后，此时就不能使用事务回滚了。但是我们还可以手动开启一个事务处理事件，使其可以发生回滚：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">-- 使用 BEGIN 或者 START TRANSACTION 手动开启一个事务</span><br><span class="line">-- START TRANSACTION;</span><br><span class="line">BEGIN;</span><br><span class="line">UPDATE user set money &#x3D; money - 100 WHERE name &#x3D; &#39;a&#39;;</span><br><span class="line">UPDATE user set money &#x3D; money + 100 WHERE name &#x3D; &#39;b&#39;;</span><br><span class="line"></span><br><span class="line">-- 由于手动开启的事务没有开启自动提交，</span><br><span class="line">-- 此时发生变化的数据仍然是被保存在一张临时表中。</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |   900 |</span><br><span class="line">|  2 | b    |  1100 |</span><br><span class="line">+----+------+-------+</span><br><span class="line"></span><br><span class="line">-- 测试回滚</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |  1000 |</span><br><span class="line">|  2 | b    |  1000 |</span><br><span class="line">+----+------+-------+</span><br></pre></td></tr></table></figure><p>仍然使用 <code>COMMIT</code> 提交数据，提交后无法再发生本次事务的回滚。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">BEGIN;</span><br><span class="line">UPDATE user set money &#x3D; money - 100 WHERE name &#x3D; &#39;a&#39;;</span><br><span class="line">UPDATE user set money &#x3D; money + 100 WHERE name &#x3D; &#39;b&#39;;</span><br><span class="line"></span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+------+-------+</span><br><span class="line">| id | name | money |</span><br><span class="line">+----+------+-------+</span><br><span class="line">|  1 | a    |   900 |</span><br><span class="line">|  2 | b    |  1100 |</span><br><span class="line">+----+------+-------+</span><br><span class="line"></span><br><span class="line">-- 提交数据</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">-- 测试回滚（无效，因为表的数据已经被提交）</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure><h3 id="事务的-ACID-特征与使用"><a href="#事务的-ACID-特征与使用" class="headerlink" title="事务的 ACID 特征与使用"></a>事务的 ACID 特征与使用</h3><p><strong>事务的四大特征：</strong></p><ul><li><strong>A 原子性</strong>：事务是最小的单位，不可以再分割；</li><li><strong>C 一致性</strong>：要求同一事务中的 SQL 语句，必须保证同时成功或者失败；</li><li><strong>I 隔离性</strong>：事务1 和 事务2 之间是具有隔离性的；</li><li><strong>D 持久性</strong>：事务一旦结束 ( <code>COMMIT</code> ) ，就不可以再返回了 ( <code>ROLLBACK</code> ) 。</li></ul><h3 id="事务的隔离性"><a href="#事务的隔离性" class="headerlink" title="事务的隔离性"></a>事务的隔离性</h3><p><strong>事务的隔离性可分为四种 ( 性能从低到高 )</strong> ：</p><ol><li><p><strong>READ UNCOMMITTED ( 读取未提交 )</strong></p><p>如果有多个事务，那么任意事务都可以看见其他事务的<strong>未提交数据</strong>。</p></li><li><p><strong>READ COMMITTED ( 读取已提交 )</strong></p><p>只能读取到其他事务<strong>已经提交的数据</strong>。</p></li><li><p><strong>REPEATABLE READ ( 可被重复读 )</strong></p><p>如果有多个连接都开启了事务，那么事务之间不能共享数据记录，否则只能共享已提交的记录。</p></li><li><p><strong>SERIALIZABLE ( 串行化 )</strong></p><p>所有的事务都会按照<strong>固定顺序执行</strong>，执行完一个事务后再继续执行下一个事务的<strong>写入操作</strong>。</p></li></ol><p>查看当前数据库的默认隔离级别：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- MySQL 8.x, GLOBAL 表示系统级别，不加表示会话级别。</span><br><span class="line">SELECT @@GLOBAL.TRANSACTION_ISOLATION;</span><br><span class="line">SELECT @@TRANSACTION_ISOLATION;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| @@GLOBAL.TRANSACTION_ISOLATION |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| REPEATABLE-READ                | -- MySQL的默认隔离级别，可以重复读。</span><br><span class="line">+--------------------------------+</span><br><span class="line"></span><br><span class="line">-- MySQL 5.x</span><br><span class="line">SELECT @@GLOBAL.TX_ISOLATION;</span><br><span class="line">SELECT @@TX_ISOLATION;</span><br></pre></td></tr></table></figure><p>修改隔离级别：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 设置系统隔离级别，LEVEL 后面表示要设置的隔离级别 (READ UNCOMMITTED)。</span><br><span class="line">SET GLOBAL TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;</span><br><span class="line"></span><br><span class="line">-- 查询系统隔离级别，发现已经被修改。</span><br><span class="line">SELECT @@GLOBAL.TRANSACTION_ISOLATION;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| @@GLOBAL.TRANSACTION_ISOLATION |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| READ-UNCOMMITTED               |</span><br><span class="line">+--------------------------------+</span><br></pre></td></tr></table></figure><h4 id="脏读"><a href="#脏读" class="headerlink" title="脏读"></a>脏读</h4><p>测试 <strong>READ UNCOMMITTED ( 读取未提交 )</strong> 的隔离性：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO user VALUES (3, &#39;小明&#39;, 1000);</span><br><span class="line">INSERT INTO user VALUES (4, &#39;淘宝店&#39;, 1000);</span><br><span class="line"></span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">| id | name      | money |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">|  1 | a         |   900 |</span><br><span class="line">|  2 | b         |  1100 |</span><br><span class="line">|  3 | 小明      |  1000 |</span><br><span class="line">|  4 | 淘宝店    |  1000 |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line"></span><br><span class="line">-- 开启一个事务操作数据</span><br><span class="line">-- 假设小明在淘宝店买了一双800块钱的鞋子：</span><br><span class="line">START TRANSACTION;</span><br><span class="line">UPDATE user SET money &#x3D; money - 800 WHERE name &#x3D; &#39;小明&#39;;</span><br><span class="line">UPDATE user SET money &#x3D; money + 800 WHERE name &#x3D; &#39;淘宝店&#39;;</span><br><span class="line"></span><br><span class="line">-- 然后淘宝店在另一方查询结果，发现钱已到账。</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">| id | name      | money |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">|  1 | a         |   900 |</span><br><span class="line">|  2 | b         |  1100 |</span><br><span class="line">|  3 | 小明      |   200 |</span><br><span class="line">|  4 | 淘宝店    |  1800 |</span><br><span class="line">+----+-----------+-------+</span><br></pre></td></tr></table></figure><p>由于小明的转账是在新开启的事务上进行操作的，而该操作的结果是可以被其他事务（另一方的淘宝店）看见的，因此淘宝店的查询结果是正确的，淘宝店确认到账。但就在这时，如果小明在它所处的事务上又执行了 <code>ROLLBACK</code> 命令，会发生什么？</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- 小明所处的事务</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">-- 此时无论对方是谁，如果再去查询结果就会发现：</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">| id | name      | money |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">|  1 | a         |   900 |</span><br><span class="line">|  2 | b         |  1100 |</span><br><span class="line">|  3 | 小明      |  1000 |</span><br><span class="line">|  4 | 淘宝店    |  1000 |</span><br><span class="line">+----+-----------+-------+</span><br></pre></td></tr></table></figure><p>这就是所谓的<strong>脏读</strong>，一个事务读取到另外一个事务还未提交的数据。这在实际开发中是不允许出现的。</p><h4 id="读取已提交"><a href="#读取已提交" class="headerlink" title="读取已提交"></a>读取已提交</h4><p>把隔离级别设置为 <strong>READ COMMITTED</strong> ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;</span><br><span class="line">SELECT @@GLOBAL.TRANSACTION_ISOLATION;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| @@GLOBAL.TRANSACTION_ISOLATION |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| READ-COMMITTED                 |</span><br><span class="line">+--------------------------------+</span><br></pre></td></tr></table></figure><p>这样，再有新的事务连接进来时，它们就只能查询到已经提交过的事务数据了。但是对于当前事务来说，它们看到的还是未提交的数据，例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">-- 正在操作数据事务（当前事务）</span><br><span class="line">START TRANSACTION;</span><br><span class="line">UPDATE user SET money &#x3D; money - 800 WHERE name &#x3D; &#39;小明&#39;;</span><br><span class="line">UPDATE user SET money &#x3D; money + 800 WHERE name &#x3D; &#39;淘宝店&#39;;</span><br><span class="line"></span><br><span class="line">-- 虽然隔离级别被设置为了 READ COMMITTED，但在当前事务中，</span><br><span class="line">-- 它看到的仍然是数据表中临时改变数据，而不是真正提交过的数据。</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">| id | name      | money |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">|  1 | a         |   900 |</span><br><span class="line">|  2 | b         |  1100 |</span><br><span class="line">|  3 | 小明      |   200 |</span><br><span class="line">|  4 | 淘宝店    |  1800 |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 假设此时在远程开启了一个新事务，连接到数据库。</span><br><span class="line">$ mysql -u root -p12345612</span><br><span class="line"></span><br><span class="line">-- 此时远程连接查询到的数据只能是已经提交过的</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">| id | name      | money |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">|  1 | a         |   900 |</span><br><span class="line">|  2 | b         |  1100 |</span><br><span class="line">|  3 | 小明      |  1000 |</span><br><span class="line">|  4 | 淘宝店    |  1000 |</span><br><span class="line">+----+-----------+-------+</span><br></pre></td></tr></table></figure><p>但是这样还有问题，那就是假设一个事务在操作数据时，其他事务干扰了这个事务的数据。例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-- 小张在查询数据的时候发现：</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">| id | name      | money |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">|  1 | a         |   900 |</span><br><span class="line">|  2 | b         |  1100 |</span><br><span class="line">|  3 | 小明      |   200 |</span><br><span class="line">|  4 | 淘宝店    |  1800 |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line"></span><br><span class="line">-- 在小张求表的 money 平均值之前，小王做了一个操作：</span><br><span class="line">START TRANSACTION;</span><br><span class="line">INSERT INTO user VALUES (5, &#39;c&#39;, 100);</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">-- 此时表的真实数据是：</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">| id | name      | money |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">|  1 | a         |   900 |</span><br><span class="line">|  2 | b         |  1100 |</span><br><span class="line">|  3 | 小明      |  1000 |</span><br><span class="line">|  4 | 淘宝店    |  1000 |</span><br><span class="line">|  5 | c         |   100 |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line"></span><br><span class="line">-- 这时小张再求平均值的时候，就会出现计算不相符合的情况：</span><br><span class="line">SELECT AVG(money) FROM user;</span><br><span class="line">+------------+</span><br><span class="line">| AVG(money) |</span><br><span class="line">+------------+</span><br><span class="line">|  820.0000  |</span><br><span class="line">+------------+</span><br></pre></td></tr></table></figure><p>虽然 <strong>READ COMMITTED</strong> 让我们只能读取到其他事务已经提交的数据，但还是会出现问题，就是<strong>在读取同一个表的数据时，可能会发生前后不一致的情况。</strong>这被称为<strong>不可重复读现象 ( READ COMMITTED )</strong> 。</p><h4 id="幻读"><a href="#幻读" class="headerlink" title="幻读"></a>幻读</h4><p>将隔离级别设置为 <strong>REPEATABLE READ ( 可被重复读取 )</strong> :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE READ;</span><br><span class="line">SELECT @@GLOBAL.TRANSACTION_ISOLATION;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| @@GLOBAL.TRANSACTION_ISOLATION |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| REPEATABLE-READ                |</span><br><span class="line">+--------------------------------+</span><br></pre></td></tr></table></figure><p>测试 <strong>REPEATABLE READ</strong> ，假设在两个不同的连接上分别执行 <code>START TRANSACTION</code> :</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 小张 - 成都</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> <span class="keyword">VALUES</span> (<span class="number">6</span>, <span class="string">&#x27;d&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 小王 - 北京</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 小张 - 成都</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><p>当前事务开启后，没提交之前，查询不到，提交后可以被查询到。但是，在提交之前其他事务被开启了，那么在这条事务线上，就不会查询到当前有操作事务的连接。相当于开辟出一条单独的线程。</p><p>无论小张是否执行过 <code>COMMIT</code> ，在小王这边，都不会查询到小张的事务记录，而是只会查询到自己所处事务的记录：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name      <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> a         <span class="operator">|</span>   <span class="number">900</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> b         <span class="operator">|</span>  <span class="number">1100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 小明      <span class="operator">|</span>  <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> 淘宝店    <span class="operator">|</span>  <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> c         <span class="operator">|</span>   <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br></pre></td></tr></table></figure><p>这是<strong>因为小王在此之前开启了一个新的事务 ( <code>START TRANSACTION</code> ) **，那么</strong>在他的这条新事务的线上，跟其他事务是没有联系的**，也就是说，此时如果其他事务正在操作数据，它是不知道的。</p><p>然而事实是，在真实的数据表中，小张已经插入了一条数据。但是小王此时并不知道，也插入了同一条数据，会发生什么呢？</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> <span class="keyword">VALUES</span> (<span class="number">6</span>, <span class="string">&#x27;d&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line"><span class="comment">-- ERROR 1062 (23000): Duplicate entry &#x27;6&#x27; for key &#x27;PRIMARY&#x27;</span></span><br></pre></td></tr></table></figure><p>报错了，操作被告知已存在主键为 <code>6</code> 的字段。这种现象也被称为<strong>幻读，一个事务提交的数据，不能被其他事务读取到</strong>。</p><h4 id="串行化"><a href="#串行化" class="headerlink" title="串行化"></a>串行化</h4><p>顾名思义，就是所有事务的<strong>写入操作</strong>全都是串行化的。什么意思？把隔离级别修改成 <strong>SERIALIZABLE</strong> :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL TRANSACTION ISOLATION LEVEL SERIALIZABLE;</span><br><span class="line">SELECT @@GLOBAL.TRANSACTION_ISOLATION;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| @@GLOBAL.TRANSACTION_ISOLATION |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| SERIALIZABLE                   |</span><br><span class="line">+--------------------------------+</span><br></pre></td></tr></table></figure><p>还是拿小张和小王来举例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- 小张 - 成都</span><br><span class="line">START TRANSACTION;</span><br><span class="line"></span><br><span class="line">-- 小王 - 北京</span><br><span class="line">START TRANSACTION;</span><br><span class="line"></span><br><span class="line">-- 开启事务之前先查询表，准备操作数据。</span><br><span class="line">SELECT * FROM user;</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">| id | name      | money |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line">|  1 | a         |   900 |</span><br><span class="line">|  2 | b         |  1100 |</span><br><span class="line">|  3 | 小明      |  1000 |</span><br><span class="line">|  4 | 淘宝店    |  1000 |</span><br><span class="line">|  5 | c         |   100 |</span><br><span class="line">|  6 | d         |  1000 |</span><br><span class="line">+----+-----------+-------+</span><br><span class="line"></span><br><span class="line">-- 发现没有 7 号王小花，于是插入一条数据：</span><br><span class="line">INSERT INTO user VALUES (7, &#39;王小花&#39;, 1000);</span><br></pre></td></tr></table></figure><p>此时会发生什么呢？由于现在的隔离级别是 <strong>SERIALIZABLE ( 串行化 )</strong> ，串行化的意思就是：假设把所有的事务都放在一个串行的队列中，那么所有的事务都会按照<strong>固定顺序执行</strong>，执行完一个事务后再继续执行下一个事务的<strong>写入操作</strong> ( <strong>这意味着队列中同时只能执行一个事务的写入操作</strong> ) 。</p><p>根据这个解释，小王在插入数据时，会出现等待状态，直到小张执行 <code>COMMIT</code> 结束它所处的事务，或者出现等待超时。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;MySQL学习笔记&quot;&gt;&lt;a href=&quot;#MySQL学习笔记&quot; class=&quot;headerlink&quot; title=&quot;MySQL学习笔记&quot;&gt;&lt;/a&gt;MySQL学习笔记&lt;/h1&gt;&lt;h2 id=&quot;登录和退出MySQL服务器&quot;&gt;&lt;a href=&quot;#登录和退出MySQL服务</summary>
      
    
    
    
    
    <category term="MySQL" scheme="https://rihiko.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>个人网站的搭建</title>
    <link href="https://rihiko.github.io/2021/01/22/%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%E7%9A%84%E6%90%AD%E5%BB%BA/"/>
    <id>https://rihiko.github.io/2021/01/22/%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%E7%9A%84%E6%90%AD%E5%BB%BA/</id>
    <published>2021-01-22T13:47:14.000Z</published>
    <updated>2021-01-29T15:55:29.013Z</updated>
    
    <content type="html"><![CDATA[<h1 id="个人网站的搭建"><a href="#个人网站的搭建" class="headerlink" title="个人网站的搭建"></a>个人网站的搭建</h1><h2 id="1、软件的安装"><a href="#1、软件的安装" class="headerlink" title="1、软件的安装"></a>1、软件的安装</h2><ul><li><a href="https://blog.csdn.net/qq_43285335/article/details/90696126">nodejs软件的安装</a> 软件版本不宜过高，否则后续会部署失败，建议安装node-v12.14.1-x64  </li><li><a href="https://blog.csdn.net/qq_40593308/article/details/110559838">配置环境</a></li><li><a href="https://www.cnblogs.com/luyuandatabase/p/12145707.html">npm使用国内淘宝镜像的方法</a></li><li><a href="https://www.cnblogs.com/xueweisuoyong/p/11914045.html">安装Git</a></li><li>后续用到的软件：Visual Studio Code(直接360安装)，typro(MakeDown文本编辑器)<h2 id="2、注册GitHub账号并创建仓库"><a href="#2、注册GitHub账号并创建仓库" class="headerlink" title="2、注册GitHub账号并创建仓库"></a>2、注册GitHub账号并创建仓库</h2></li><li>github仓库相当于一个域名，可直接部署到仓库</li><li><a href="https://www.xuanfengge.com/using-ssh-key-link-github-photo-tour.html">使用SSH密钥连接Github</a><h2 id="3、创建hexo博客"><a href="#3、创建hexo博客" class="headerlink" title="3、创建hexo博客"></a>3、创建hexo博客</h2></li><li><a href="https://hexoscript.gitbook.io/hexo-script/">hexoblog的安装</a> </li><li><a href="https://blog.csdn.net/jspnetcn/article/details/104111651">matery主题的安装</a></li><li><a href="https://blog.sky03.cn/posts/42790.html#toc-heading-1">hexo进阶之各种优化</a></li><li><a href="https://blog.csdn.net/kuashijidexibao/article/details/112971657?ops_request_misc=&request_id=&biz_id=102&utm_term=hexo+matery&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-3-112971657.pc_search_result_no_baidu_js">主题细致美化</a></li><li><a href="https://blog.csdn.net/NoCortY/article/details/99631249?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control">部署到阿里云</a></li><li><a href="https://blog.csdn.net/victoryxa/article/details/105841440?ops_request_misc=%25257B%252522request%25255Fid%252522%25253A%252522161175041816780265452803%252522%25252C%252522scm%252522%25253A%25252220140713.130102334.pc%25255Fall.%252522%25257D&request_id=161175041816780265452803&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v29-7-105841440.pc_search_result_no_baidu_js&utm_term=hexo%252Bmatery">主题个性化修改</a></li><li><a href="https://cungudafa.blog.csdn.net/article/details/106278206?utm_medium=distribute.pc_relevant.none-task-blog-OPENSEARCH-10.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-OPENSEARCH-10.control">主题优化</a></li><li><a href="https://blog.csdn.net/cungudafa/article/details/104585711?ops_request_misc=%25257B%252522request%25255Fid%252522%25253A%252522161175295016780262558574%252522%25252C%252522scm%252522%25253A%25252220140713.130102334.pc%25255Fblog.%252522%25257D&request_id=161175295016780262558574&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_v2~rank_v29-10-104585711.pc_v2_rank_blog_default&utm_term=hexo">Hexo自动部署到阿里云(Ubantu16.04)</a></li><li><a href="https://blog.csdn.net/kuashijidexibao/article/details/112971657?ops_request_misc=&request_id=&biz_id=102&utm_term=hexo+matery&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-3-112971657.pc_search_result_no_baidu_js">全</a></li><li><a href="https://artitalk.js.org/doc.html#%F0%9F%9A%80-%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8"> Artitalk.js</a><h2 id="4、创建博客遇到的问题"><a href="#4、创建博客遇到的问题" class="headerlink" title="4、创建博客遇到的问题"></a>4、创建博客遇到的问题</h2></li><li>在hexoblog文件夹下，右键git bash here进入博客 <img src="%E9%97%AE%E9%A2%981.png"></li><li><img src="%E9%97%AE%E9%A2%982.png"><br>改完_config文件后，确认保存再退出，然后hexo d，之后缺少git文件，然后安装git文件，最后就可发布成功</li><li><a href="https://rihiko.github.io/">https://rihiko.github.io/</a> 仓库文件加载不出来，改默认路径为上传分支master</li><li>映射端口出错，删掉C:\Users\DELL\getconfig，重新输入名称，邮箱<img src="%E9%97%AE%E9%A2%983.png"></li><li>首页空白页，主题文件一定要放到themes文件下<h2 id="5、优化"><a href="#5、优化" class="headerlink" title="5、优化"></a>5、优化</h2><h3 id="1、全屏显示"><a href="#1、全屏显示" class="headerlink" title="1、全屏显示"></a>1、全屏显示</h3>在navigation.ejs的搜索前或加入这段代码  <li id="fullscreen_li" class="fullscreen"> <a href="javascript:void(0);" class="modal-trigger waves-effect waves-light">   <i class="fa fa-expand fa-lg"  title="全屏" ></i> </a></li>然后在layout.ejs文件中引入[fullscreen.js](https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/js/fullscreen.js)</li></ul><h3 id="2、引入说说"><a href="#2、引入说说" class="headerlink" title="2、引入说说"></a>2、引入说说</h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;个人网站的搭建&quot;&gt;&lt;a href=&quot;#个人网站的搭建&quot; class=&quot;headerlink&quot; title=&quot;个人网站的搭建&quot;&gt;&lt;/a&gt;个人网站的搭建&lt;/h1&gt;&lt;h2 id=&quot;1、软件的安装&quot;&gt;&lt;a href=&quot;#1、软件的安装&quot; class=&quot;headerlink</summary>
      
    
    
    
    
    <category term="website" scheme="https://rihiko.github.io/tags/website/"/>
    
  </entry>
  
  <entry>
    <title>centos</title>
    <link href="https://rihiko.github.io/2021/01/20/centos/"/>
    <id>https://rihiko.github.io/2021/01/20/centos/</id>
    <published>2021-01-20T03:20:14.000Z</published>
    <updated>2021-01-23T13:01:57.921Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h1><p>1、i：进入插入模式<br>2、保存：先按ESC键，再输入：wq<br>3、set nu查看行号<br>4、q！不保存退出<br>5、q退出<br>6、cd切换目录<br>7、rm -rf ./<em>删除当前目录下所有文件 .当前目录<br>8、umont卸载<br>9、ls查看目录下有什么内容<br>10、exit 登出<br>11、cat /etc/shells<br>12、var存放日志文件<br>13、file</em>     表示以file开头后面匹配所有字母<br>14、rpm -qf <code>which vim</code>（vim返回的结果作为rpm-qf查询的命令）<br>15、出现交换文件，vim正在运行或者没有正常关闭，直接关闭或删除就行<br>16、Windows中的文本文档，上传到Linux打开乱码<br>原因：编码问题<br>参数：<br>iconv -f gb2312 -t utf8 文件.txt（gb2312是文本的编码）<br>17、-l：列举所有已知的字符集<br>18、公司Linux服务器上脚本导到Windows上打开串行的问题（.sh）<br>原因：Windows和Linux处理回车的方法不同<br> 安装包：rpm -ivh /mnt/Packages/unix0DBC若没有换下一个<br>rpm -ivh /mnt/Packages/dos2unix-6.0.3.7.dl7.x86_64.rpm<br>测试：unix2dos 文件.sh<br>echo $?   (若好了会显示0)<br>注：dos2unix 这个命名是把Windows下的回车转成Linux类型<br>19、tail -1 /etc/passwd 显示文件最后一行<br>20、useradd -h查看提示<br>21、ll详细信息；ls只是列表<br>22、ctrl+shift+T在终端中打开终端<br>ctrl+d关闭终端也可以退出root权限<br>23、权限只看UID，0最大可以随便改<br>24、记不住修改命令，直接改vim /etc/passwd<br>25、service httpd start<br>reboot<br>26、touch {a,b,c}.txt,<br>ll *.txt<br>27、rm -rf 1.txt删除文件<br>28、查看文件CAL拓展权限（getfactl /tmp/a.txt）<br>29、echo aa &gt;&gt; hack.sh追加内容到hack.sh<br>30、qpi查看各种包的详细信息：rpm -qpi /mnt/Packages/php-mysql-5.4.16-42.el7.x86_64.rpm<br>31、rpm -Va &gt;rpm_check.txt列到txt文件中<br>32、网络yum源配不出来：下载Centos-7.repo后，不用能，解决：打开<a href="http://mirrors.aliyun.com/centos/">阿里云链接</a>找到centos7最新版本号，然后执行sed全文替换<br>33、-j 4以4核速度进行<br>34、docker images 查看docker镜像  </p><h1 id="一、12个使用技巧"><a href="#一、12个使用技巧" class="headerlink" title="一、12个使用技巧"></a>一、12个使用技巧</h1><p>1、增加内存，编辑虚拟机设置（关机去调）<br>2、忘记命令：唯一命令按Tab自动补全，多个命令按两次Tab<br>3、硬件设备的添加：编辑虚拟机设置-硬盘-添加<br>4、控制权限的切换：Ctrl+Alt<br>5、关机：init 0<br>6、发送快捷键：虚拟机发送Ctrl+Alt+Del或Ctrl+Alt+Insert<br>7、网卡使用：桥接模式 ip与主机在同一网段地址转换模式（NAT）虚拟机与物理机共有一个ip，Linux系统要配置成动态获取ip虚拟机与外网隔开<br>8、BIOS设置：打开电源时进入固件<br>9、安装VM-tools解决显示屏幕分辨率<br>10、编辑虚拟机添加iso镜像<br>11、删除虚拟机：虚拟机-管理-从磁盘中删除<br>12、快照：虚拟机-快照-拍摄快照（保存快照，那天系统崩溃可以恢复到快照）  </p><h1 id="二、网络概念"><a href="#二、网络概念" class="headerlink" title="二、网络概念"></a>二、网络概念</h1><h2 id="1、修改ip"><a href="#1、修改ip" class="headerlink" title="1、修改ip"></a>1、修改ip</h2><p>1、临时修改ip：ifconfig ens33 加IP<br>2、只看ens33：ifconfig ens33<br>3、重启网络：systemctl restart network<br>4、多个临时ip：ifconfig ens33:0 ip ，ifconfig ens33:1 ip<br>5、临时删除ip：ifconfig ens33:0 del 192.168.1.110  </p><h2 id="2、监视网络进程"><a href="#2、监视网络进程" class="headerlink" title="2、监视网络进程"></a>2、监视网络进程</h2><p>systemctl status NetworkManager(NM大写)</p><h2 id="3、网络配置相关文件"><a href="#3、网络配置相关文件" class="headerlink" title="3、网络配置相关文件"></a>3、网络配置相关文件</h2><p>1、ip地址，子网掩码等配置文件  ls /etc/sysconfig/network-scripts/<br>2、DNS配置文件 ls /etc/resolv.conf<br>cat !$<br>3、设置主机名 cat /etc/hostname</p><h2 id="4、永久修改ip："><a href="#4、永久修改ip：" class="headerlink" title="4、永久修改ip："></a>4、永久修改ip：</h2><h3 id="1、使用nmtui文本框"><a href="#1、使用nmtui文本框" class="headerlink" title="1、使用nmtui文本框"></a>1、使用nmtui文本框</h3><p>光标移动最后进行保存service network restart 重启网络</p><h3 id="2、通过修改网卡配置文件修改ip地址"><a href="#2、通过修改网卡配置文件修改ip地址" class="headerlink" title="2、通过修改网卡配置文件修改ip地址"></a>2、通过修改网卡配置文件修改ip地址</h3><p>1、vim /etc/sysconfig/network-scripts/ifcfg-ens33<br>2、键盘i进入编辑修改完之后 ESC退出，输入：wq保存退出<br>3、type种类：以太网<br>BOOTPROTO=none #等号后面写：dhcp表示动态获取ip地址，satic表示表态ip，none表示不指定，就是静态<br>DEVICE=ens33<br>ONBOOT=yes网络才能生效    </p><h1 id="三、设置防火墙开机不启动"><a href="#三、设置防火墙开机不启动" class="headerlink" title="三、设置防火墙开机不启动"></a>三、设置防火墙开机不启动</h1><p>1、静态防火墙systemctl status firewalld.service<br>2、关闭防火墙systemctl stop firewalld.service<br>3、启动systemctl start firewalld.service<br>4、开机不启动systemctl disable firewalld.service<br>5、开机启动systemctl enable firewalld.service<br>6、临时和永久关闭Selinux<br>   getenfore enforcing说明开启<br>   setenforce 0临时关闭<br>   永久关闭：vim /etc/selinux/config 将enforcing改为enable，然后保存退出。    reboot重启  </p><h1 id="四、设置系统光盘开机自动挂载"><a href="#四、设置系统光盘开机自动挂载" class="headerlink" title="四、设置系统光盘开机自动挂载"></a>四、设置系统光盘开机自动挂载</h1><p>vim /etc/fastab<br>文档最后添加/dev/cdrom/mnt iso9660 defaults 00<br>mount -a<br>ls /mnt可以查看到内容说明挂载成功  </p><h1 id="五、配置本地YUM源"><a href="#五、配置本地YUM源" class="headerlink" title="五、配置本地YUM源"></a>五、配置本地YUM源</h1><p>1、 yum的一切配置信息都存在一个叫yum.reos.d目录下的配置文件中，删除原有文件（/etc/yum.repos.d/*）<br>创建一个新的yum源配置文件，yum源的结尾必须是.repo<br>[CentOS7]   yum源的ID，必须唯一  name=CentOS-server  描述信息<br>baseurl=file:///mnt       /mnt表示的是光盘的挂载点<br>enabled=1        启用<br>gpgcheck    取消验证<br>2、 yum clean all 清空yum缓存<br>yum list 查询一下 如果有很多包说明没问题<br>yum insatll -y httped<br>3、创建可用实验拍照<br>后期不可用，可通过快照直接恢复到当前可用情况  </p><h1 id="六、DIY一台1u服务器"><a href="#六、DIY一台1u服务器" class="headerlink" title="六、DIY一台1u服务器"></a>六、DIY一台1u服务器</h1><p>Linux基本命令操作  </p><h1 id="七、Linux终端和shell提示符"><a href="#七、Linux终端和shell提示符" class="headerlink" title="七、Linux终端和shell提示符"></a>七、Linux终端和shell提示符</h1><h2 id="1、登录Linux终端"><a href="#1、登录Linux终端" class="headerlink" title="1、登录Linux终端"></a>1、登录Linux终端</h2><p>1、通过tty命令看到当前所属的虚拟终端<br>2、shift+ctrl+N快速打开一个终端<br>shift+ctrl+加号终端字体放大<br>ctrl+减号终端字体减小<br>3、不同终端之间的通讯<br>同时打开两个终端，第一个终端执行echo xuegod &gt; dec/pts/1,第二个终端有xuegod输出<br>4、对所有终端广播消息<br>shutdown +10 十分钟后关机<br>shutdown -c取消关机<br>wall  “  ”所有终端广播  </p><h2 id="2、shell：提供用户与内核进行通讯"><a href="#2、shell：提供用户与内核进行通讯" class="headerlink" title="2、shell：提供用户与内核进行通讯"></a>2、shell：提供用户与内核进行通讯</h2><p>shell时间上是一个命名解释器，通过解释用户输入的命令并传给系统内核去执行<br>启用mysql数据库就属于外部命令<br>用type来区别是内部还是外部命令<br>su - baituichangan切换到普通用户</p><h2 id="3、命令-选项-参数"><a href="#3、命令-选项-参数" class="headerlink" title="3、命令+选项+参数"></a>3、命令+选项+参数</h2><h1 id="八、ls查看命令和alias别名使用方法"><a href="#八、ls查看命令和alias别名使用方法" class="headerlink" title="八、ls查看命令和alias别名使用方法"></a>八、ls查看命令和alias别名使用方法</h1><p>1、ls - l文件创建信息<br>ls .当前目录<br>ls -a所有文件<br>ls -ld/root/查看目录<br>ls -l和ll命令等价<br>2、文件类型d l b c p -<br>不同颜色代表不同文件类型<br>3、别名，长文件起别名直接打开<br>alias vimenss33=”vim /etc/sysconfig/network-scripts/ifcfg-ens33”<br>删除别名：unalisa vimeness33<br>永久有效：1、当前用户vim /root/.bashrc<br>插入以下内容：alias vimens33=”vim /etc/sysconfig/network-scripts/ifcfg-ens33”<br>重启文件生效source /root/.bashrc<br>2、所有用户（全局使用）<br>vim /etc/bashrc  文件最后一行插入：<br>alias vimens33=”vim /etc/sysconfig/network-scripts/ifcfg-ens33”</p><h1 id="九、cd（change-directory）命令快速查找历史命令和命令快捷键"><a href="#九、cd（change-directory）命令快速查找历史命令和命令快捷键" class="headerlink" title="九、cd（change directory）命令快速查找历史命令和命令快捷键"></a>九、cd（change directory）命令快速查找历史命令和命令快捷键</h1><h2 id="1、cd命令"><a href="#1、cd命令" class="headerlink" title="1、cd命令"></a>1、cd命令</h2><p>1、cd 或者cd ~ 切换目录，说明：直接输入cd表示回到当前用户的家目录<br>2、cd ..返回到上级目录<br>3、cd .表示进入到当前目录<br>4、cd -返回切换之前的目录      </p><h2 id="2、历史命令之history"><a href="#2、历史命令之history" class="headerlink" title="2、历史命令之history"></a>2、历史命令之history</h2><p>方法一，上下键光标去切<br>方法二，history<br>方法三，ctrl+r 搜索历史命名关键字，找出对应命令按左右光标键<br>方法四，！数字，执行历史命令中的第n条命令，先用history查找历史命令<br>方法五，！字符串从下往上最近一次（不太准确，不建议使用）</p><h2 id="3、Linux下快捷键（-表示Ctrl）"><a href="#3、Linux下快捷键（-表示Ctrl）" class="headerlink" title="3、Linux下快捷键（^表示Ctrl）"></a>3、Linux下快捷键（^表示Ctrl）</h2><p>1、终止前台运行的程序，Ctrl+c<br>2、退出，Ctrl+D等价于exit，直接关闭终端<br>3、清屏，Ctrl+L与clear功能一样<br>4、跳到命令行的开头，Ctrl+A<br>5、跳到命令行的末尾，Ctrl+E<br>6、将光标处到命令行开头的内容删除，Ctrl+U<br>7、将光标到命令行末尾的内容删除，Ctrl+K<br>8、搜素历史命令，可以利用好关键词，Ctrl+R<br>9、再执行上一个命令：!$<br>10、Tab只能补全命令和文件  </p><h1 id="十、系统时间管理（系统时钟，硬件时钟）写shell定时脚本"><a href="#十、系统时间管理（系统时钟，硬件时钟）写shell定时脚本" class="headerlink" title="十、系统时间管理（系统时钟，硬件时钟）写shell定时脚本"></a>十、系统时间管理（系统时钟，硬件时钟）写shell定时脚本</h1><p>1、硬件时间：hwclock<br>系统时钟：date<br>2、CST中国标准时间 ，UTC世界标准时间，GMT格林尼治时间<br>3、修改时间：查看date用法：date –help<br>m月；M分钟；Y年份；y年份后两位<br>4、time测试一个命令运行的时间<br>time后面直接跟命令和参数<br>real：实际使用时间<br>user：用户状态使用的时间<br>sys：内核状态使用的时间<br>5、用到帮助命令不知道如何使用，使用help<br>man命令：查看手册页或命令描述man find  用q退出<br>–help 或-h  </p><h1 id="十一、开机命令及7个启动级别"><a href="#十一、开机命令及7个启动级别" class="headerlink" title="十一、开机命令及7个启动级别"></a>十一、开机命令及7个启动级别</h1><p>1、shutdown命令<br>shutdown -r重新启动<br>shutdown -c取消<br>shutdown -h加时间，定时关机（shutdown -h now立即关机）<br>2、系统启动级别7个<br>init3进入字符界面<br>init5进入图形界面<br>init0关机<br>3、设置默认启动级别<br>systemctl set- default multi- user.target字符界面（3级别）<br>runlevel级别切换<br>systemctl get-default查看当前级别  </p><h1 id="十二、文件的基本管理和CFS文件系统备份恢复"><a href="#十二、文件的基本管理和CFS文件系统备份恢复" class="headerlink" title="十二、文件的基本管理和CFS文件系统备份恢复"></a>十二、文件的基本管理和CFS文件系统备份恢复</h1><h2 id="1、文件"><a href="#1、文件" class="headerlink" title="1、文件"></a>1、文件</h2><p>1、passwd用户信息文件；shadow用户密码文件；hosts用户与主机名对应信息<br>2、home：普通用户的家目录<br>3、lib函数库<br>4、/mnt 临时挂载储存设备的挂载目录<br>5、查看一个文件大小：du - sh /etc/<br>6、tmp用来存放临时文件   </p><h2 id="2、绝对路径："><a href="#2、绝对路径：" class="headerlink" title="2、绝对路径："></a>2、绝对路径：</h2><p>从/开始相对路径，以.或..开始</p><h2 id="3、文件管理："><a href="#3、文件管理：" class="headerlink" title="3、文件管理："></a>3、文件管理：</h2><h3 id="1、改变目录：cd"><a href="#1、改变目录：cd" class="headerlink" title="1、改变目录：cd"></a>1、改变目录：cd</h3><h3 id="2、创建-修改-移动-删除：touch-mkdir-mv-vi-rm-cp"><a href="#2、创建-修改-移动-删除：touch-mkdir-mv-vi-rm-cp" class="headerlink" title="2、创建/修改/移动/删除：touch mkdir mv vi rm cp"></a>2、创建/修改/移动/删除：touch mkdir mv vi rm cp</h3><p>1、mkdir （创建目录）在创建一个目录时，如果这个目录的上一级不存在，加参数-p mkdir -p/tmp/a/b/c<br>2、删除rm<br>rm -r /day1 删除目录；<br>rm -f 强制删除，没有提示；<br>rm -rf删除目录下文件（目录文件全删除，慎用）rm /1.txt删除文件<br>3、复制cp<br>命令：cp 源文件/目录   目录文件/目录<br>-r;递归处理，将指定目录下的所有文件与子目录一并处理<br>cp /etc/passwd /opt/   复制文件<br>cp -r /boot/grub /opt/  复制目录<br>4、mv移动文件<br>mv passwd dir1（移动passwd到dir1）<br>mv xuegod.txt dair1/a.txt（移动xuegod.txt到dair1，并改名为a.txt）  </p><h2 id="4、查看文件"><a href="#4、查看文件" class="headerlink" title="4、查看文件"></a>4、查看文件</h2><p>1、cat /文件名（查看文件内容，一次显示整个文件的内容）<br>2、more /文件名（按下回车刷新一行，按下空格刷新一屏，输入q退出）不支持后退<br>3、less /etc/passwd 作用和more一样支持前后翻滚<br>4、head用于显示文件开头的内容，默认情况下显示文件头10行内容<br>head -n 3 /etc/passwd  显示前3行<br>5、tail用于显示文件末尾的内容，默认情况下末尾文件头10行内容<br>-n：显示文件尾部多少行的内容（n为数字）<br>-f：动态显示数据，用来查看日志<br>tail -n 3 /var/log/secure  </p><h2 id="5、xfs文件系统的备份和恢复（提供了xfxdump和xfsrestore工具协助备份）"><a href="#5、xfs文件系统的备份和恢复（提供了xfxdump和xfsrestore工具协助备份）" class="headerlink" title="5、xfs文件系统的备份和恢复（提供了xfxdump和xfsrestore工具协助备份）"></a>5、xfs文件系统的备份和恢复（提供了xfxdump和xfsrestore工具协助备份）</h2><h3 id="1、原始备份数据方法：cp"><a href="#1、原始备份数据方法：cp" class="headerlink" title="1、原始备份数据方法：cp"></a>1、原始备份数据方法：cp</h3><h3 id="2、xfsdump的备份级别有两种，默认为0"><a href="#2、xfsdump的备份级别有两种，默认为0" class="headerlink" title="2、xfsdump的备份级别有两种，默认为0"></a>2、xfsdump的备份级别有两种，默认为0</h3><p>0：完全备份<br>1到9级别代表：增量备份<br>完全备份：每次都把指定备份目录完整的复制一遍，不管目录下文件有没有变化<br>增量备份：每次将之前（第一次、、、直到前一次）做过的备份之后有变化的文件备份<br>差异备份：每次都将第一次完整备份以来有变化的文件进行备份</p><h3 id="3、环境准备"><a href="#3、环境准备" class="headerlink" title="3、环境准备"></a>3、环境准备</h3><p>1、添加磁盘<br>2、对添加磁盘进行格式化<br>3、指定分区设备fdisk /dev/sdb<br>创建一个新的分区n；<br>创建一个主分区p；<br>指定分区大小；<br>打印分区表；<br>保存磁盘w；<br>正在同步磁盘ls /dev/sdb*</p><h3 id="4、使用新的分区，格式化分区，并进行挂载（必须挂载才能使用分区）"><a href="#4、使用新的分区，格式化分区，并进行挂载（必须挂载才能使用分区）" class="headerlink" title="4、使用新的分区，格式化分区，并进行挂载（必须挂载才能使用分区）"></a>4、使用新的分区，格式化分区，并进行挂载（必须挂载才能使用分区）</h3><p>1、mkfs.xfs /dev/sdb1<br>2、mkdir /sdb1创建挂载点<br>3、mount /dev/sdb1 /sdb1挂载     </p><h3 id="5、备份："><a href="#5、备份：" class="headerlink" title="5、备份："></a>5、备份：</h3><p>1、备份整个分区（类似虚拟机快照，进行快速恢复）<br>xfsdump -f 备份存放位置 要备份路径<br>xfsdump -f /opt/dump_sdb1 /sdb1<br>dump_sdb1指定备份会话标签<br>sdb1指定设备标签<br>2、指定备份时免交互操作，方便后期做定时备份<br>xfsdump -f /opt/dump_passwd /sdb1 -L   dump_passwd -M sdb1<br>3、指定只备份分区中的某个目录<br> -s 文件路径，只对指定文件或目录进行备份，相对路径<br>xfsdump -f /opt/dump_grub2 -s grub2/grbu.cfg /boot -L dump_grub2 -M boot- sda1<br>4、查看备份文件 xfsdump -I </p><h3 id="6、文件系统恢复"><a href="#6、文件系统恢复" class="headerlink" title="6、文件系统恢复"></a>6、文件系统恢复</h3><p>1、xfsrestore -f 指定恢复文件的位置 指定存放恢复后文件的路径<br>2、xfsrestore -f /opt/dump_sdb1 /sdb1<br>3、xfsrestore -f /opt/dump_grub2 -s grub2/grub.cfg /var/test恢复单个文件  </p><h3 id="7、增量备份"><a href="#7、增量备份" class="headerlink" title="7、增量备份"></a>7、增量备份</h3><p>每次对上一次增加或修改的文件<br>1、先恢复完全备份<br>2、情况1：恢复最后一次增量备份（如果两次增量备份都是1级，所以只需恢复最后一次增量<br>3、情况2：第一次是1级，第二次是2级（先恢复完全备份，然后1级，最后2</p><h1 id="十三、Vim编辑器"><a href="#十三、Vim编辑器" class="headerlink" title="十三、Vim编辑器"></a>十三、Vim编辑器</h1><h2 id="1、vim编辑器模式：菜单模式，i编辑模式，v进入可视模式、R擦除、改写进入替换模式，：命令行模式"><a href="#1、vim编辑器模式：菜单模式，i编辑模式，v进入可视模式、R擦除、改写进入替换模式，：命令行模式" class="headerlink" title="1、vim编辑器模式：菜单模式，i编辑模式，v进入可视模式、R擦除、改写进入替换模式，：命令行模式"></a>1、vim编辑器模式：菜单模式，i编辑模式，v进入可视模式、R擦除、改写进入替换模式，：命令行模式</h2><h3 id="1、命令模式下做的操作"><a href="#1、命令模式下做的操作" class="headerlink" title="1、命令模式下做的操作"></a>1、命令模式下做的操作</h3><p>1、光标定位    h j k l  左下上右<br>2、0和home键表示切换到行首，$和end键表示切换到行尾<br>3、3gg快速定位到文档的第3行 G快速定位到末行</p><h3 id="2、如何对文本进行编辑"><a href="#2、如何对文本进行编辑" class="headerlink" title="2、如何对文本进行编辑"></a>2、如何对文本进行编辑</h3><p>删除、复制、粘贴、撤销<br>1、y 复制：表示对单个字符进行复制，如果要复制整行，用yy；复制N行：Nyy，比如2yy，表示复制2行<br>2、dd (以行为单位，删除当前光标所在行)<br>3、粘贴 p<br>4、剪切：dd<br>5、x删除光标所在位置的字符<br>6、D从光标处删除到行尾<br>7、u撤销<br>8、ctrl+r还原撤销过的操作<br>9、r替换，或者说用来修改一个字符  </p><h3 id="3、V模式（列）"><a href="#3、V模式（列）" class="headerlink" title="3、V模式（列）"></a>3、V模式（列）</h3><p>进入v模式，移动光标选择区域<br>1、ctrl+v进入列编辑模式<br>2、向下或向上移动光标，把需要注释、编辑的行的开头标记起来<br>3、然后按大写的I<br>4、再插入注释符或者你需要插入的符号#<br>5、再按ESC退出就会全部注释或添加<br>6、删除选中注释部分，然后按d  </p><h3 id="4、命名行模式操作"><a href="#4、命名行模式操作" class="headerlink" title="4、命名行模式操作"></a>4、命名行模式操作</h3><p>1、w保存save<br>2、w！强制保存<br>3、q没有进行任何修改，退出quit<br>4、q！修改了，不保存，强制退出<br>5、wq保存并退出<br>6、wq！强制保存并退出<br>7、x保存退出<br>8、e！恢复到原始状态<br>9、调用外部文件或命令：我想要写入我的网卡MAC地址，需要查看， 现在在vim编辑文档<br>：！ifconfig调取命令<br>：r 加文件 读取其它文件中的内容（把其他文件中的内容追加到当前文档中）<br>10、替换    </p><ul><li>1，3 s/bin/r把第一到3行的bin替换为r，只替换首个  </li><li>1，3 s/bin/r/g所有的都替换        </li><li>3 s/bin/r只把第三行中bin替换第  </li><li> % s/do/r/g全文中的do都替换（% s/do/r/gi    i表示忽略大小写）<br>11、自定义vim使用环境  </li><li>set nu加行号</li><li>set nonu取消设置行号</li><li>noh取消高亮显示<h2 id="2、永久设置环境"><a href="#2、永久设置环境" class="headerlink" title="2、永久设置环境"></a>2、永久设置环境</h2>vim /etc/vimrc设置后会影响到系统所有的用户<br>~/.virc在用户的家目录下，创建一个.vimrc这样只影响到某一个用户<br>vim .vimrc写入set un<br>cat .vimrc  <h2 id="3、vim打开多个文件"><a href="#3、vim打开多个文件" class="headerlink" title="3、vim打开多个文件"></a>3、vim打开多个文件</h2><h3 id="1、以上下方式"><a href="#1、以上下方式" class="headerlink" title="1、以上下方式"></a>1、以上下方式</h3>vim - o /etc/passwd /etc/hosts  -同时打开两个文件（小写o）<br>qa 两个全部退出    <h3 id="2、以左右方式打开两个文档"><a href="#2、以左右方式打开两个文档" class="headerlink" title="2、以左右方式打开两个文档"></a>2、以左右方式打开两个文档</h3>vim - O /etc/passwd /etc/hosts  -同时打开两个文件（大写O）<br>按ctrl+w切换文档  <h3 id="3、对比两个文档的不同"><a href="#3、对比两个文档的不同" class="headerlink" title="3、对比两个文档的不同"></a>3、对比两个文档的不同</h3>1、 diff /etc/passwd mima.txt<br>2、vimdiff /etc/passwd mima.txt  <h3 id="4、其它编辑器"><a href="#4、其它编辑器" class="headerlink" title="4、其它编辑器"></a>4、其它编辑器</h3>nano编辑器<br>emacs编辑器<br>GHOME编辑器 gedit<h1 id="十四、恢复ext4下误删除的文件"><a href="#十四、恢复ext4下误删除的文件" class="headerlink" title="十四、恢复ext4下误删除的文件"></a>十四、恢复ext4下误删除的文件</h1>centos6下执行删除操作（rm -rf /*）<br>ext4上系统删除文件，可以恢复：extundelete，ext3恢复使用：ext3grep<br>Windows恢复误删除文件：final data v2.0汉化版和easyrecovery<br>文件名（a.txt）–存放文件元数据信息（inode）–真实存放数据（block）<h2 id="1、下列操作只能在centos6下删除文件恢复"><a href="#1、下列操作只能在centos6下删除文件恢复" class="headerlink" title="1、下列操作只能在centos6下删除文件恢复"></a>1、下列操作只能在centos6下删除文件恢复</h2>1、查看文件文件名：ls a.txt<br>2、查看inode号（每个文件都有一个inode号）：ls -i a.txt<br>3、stat命令可以看到文件属性：stat a.txt等价于（ls -l a.txt）  <h2 id="2、逻辑关系：删除只是删除文件名a-txt，没有删除inode号所以文件可以复原"><a href="#2、逻辑关系：删除只是删除文件名a-txt，没有删除inode号所以文件可以复原" class="headerlink" title="2、逻辑关系：删除只是删除文件名a.txt，没有删除inode号所以文件可以复原"></a>2、逻辑关系：删除只是删除文件名a.txt，没有删除inode号所以文件可以复原</h2>如果新文件b用了同样的inode号也可以恢复，block中的bb信息通过奇偶校验推算出aa信息<h2 id="3、误删除文件后，第一件事"><a href="#3、误删除文件后，第一件事" class="headerlink" title="3、误删除文件后，第一件事"></a>3、误删除文件后，第一件事</h2>避免误删除的文件内容被覆盖<br>（如何避免）卸载需要恢复文件的分区或以只读的方式挂载      <h2 id="4、实战，在（centos6）ext4文件系统上恢复被误删除的文件"><a href="#4、实战，在（centos6）ext4文件系统上恢复被误删除的文件" class="headerlink" title="4、实战，在（centos6）ext4文件系统上恢复被误删除的文件"></a>4、实战，在（centos6）ext4文件系统上恢复被误删除的文件</h2>下载extundelete，在<a href="http://sourceforge.net/%E5%BC%80%E5%85%83%E8%BD%AF%E4%BB%B6%E5%8F%91%E5%B8%83%E4%B8%AD%E5%BF%83.github.com">http://sourceforge.net/开元软件发布中心.github.com</a>  <h2 id="5、在根下删除文件想恢复-："><a href="#5、在根下删除文件想恢复-：" class="headerlink" title="5、在根下删除文件想恢复 ："></a>5、在根下删除文件想恢复 ：</h2>1、立即断电，把磁盘以只读方式，挂载到另一个电脑进行恢复<br>2、把extundelete在虚拟机上，提前安装好后再复制到u盘中，把u盘插入到服务器，恢复时，要把恢复的文件保存到u盘中（不要让恢复的数据写到/下）  <h2 id="6、新的分区表如何使用，创建挂载点，格式化，再挂载"><a href="#6、新的分区表如何使用，创建挂载点，格式化，再挂载" class="headerlink" title="6、新的分区表如何使用，创建挂载点，格式化，再挂载"></a>6、新的分区表如何使用，创建挂载点，格式化，再挂载</h2>mount /dev/sda4 /tmp/sda4/<br>ls /tmp/sda4/ 如果显示lost+found则显示挂载成功<h2 id="7、删除并恢复"><a href="#7、删除并恢复" class="headerlink" title="7、删除并恢复"></a>7、删除并恢复</h2>1、创建测试文件<br>2、利用tree看测试文件树<br>3、删除文件<br>4、用cd切除文件目录，然后删除挂载sda4<br>5、安装extundelete进行恢复  </li><li>从Windows上传extundelete到linux用xmanager v5或CRT<br>（rz：上传Windows中的文件到Linux；sz：下载Linux中的文件到Windows）<br>如果没有这两个命令，rpm -ivh /mnt/Packages/Irzsz-0.12….s</li><li>安装：tar -jxvf extundelete剩下tab补全（jxvf针对压缩包镜像）</li><li>cd ex。。。</li><li>安装之前需要安装工具：rpm -ivh /mnt/Packages/e2fspro……</li><li>装完以后./configure（检查安装环境）</li><li>make -j 4（使用4核同时编译）</li><li>make install</li><li>install也能复制与cp的区别是install复制可以指定权限，cp不可以  </li></ul><p>6、先扫描被删除的文件</p><ul><li>ls -i /a.txt看普通文件的inode号</li><li>ls -id /tmp/sda4看他的inode号是从几开始，从根开始为2</li><li>extundelete /dev/sda4 –inode 2从inode号为2开始扫，查看恢复文件的inode号</li><li>ext4文件系统的分区根目录的inode值为2，xfs分区根目录的inode值为64</li><li>ls -id/boot/ xfs文件系统</li></ul><p>7、恢复</p><ul><li>通过inode号进行恢复<br>extundelete /dev/sda4 –restore-inode 12（12：第6步的3）恢复后文件名为file12</li><li>通过文件名恢复<br>extundelete /dev/sda4 –restore-file passwd</li><li>恢复某个目录（会产生空文件和空目录）<br>extundelete /dev/sda4 –restore-directory a</li><li>恢复所有的文件（这种方法没有空文件和空目录）<br>extundelete /dev/sda4 –restore-all<h1 id="十五、使用xmanager等远程连接工具管理Linux"><a href="#十五、使用xmanager等远程连接工具管理Linux" class="headerlink" title="十五、使用xmanager等远程连接工具管理Linux"></a>十五、使用xmanager等远程连接工具管理Linux</h1>常见远程连接工具：secureCRT（64位、32位）、xmanager（可以上传文件夹，图形界面，使用不带后门官网下载最新版，序列号）、putty、ssh<br>xmanager使用方法（xshell，xstart。。。）<h2 id="1、xshell的使用方法"><a href="#1、xshell的使用方法" class="headerlink" title="1、xshell的使用方法"></a>1、xshell的使用方法</h2><h3 id="1、连接一台新的服务器"><a href="#1、连接一台新的服务器" class="headerlink" title="1、连接一台新的服务器"></a>1、连接一台新的服务器</h3>1、文件–新建<br>2、名称随便写<br>3、主机为ip地址（之前设置为192.168.1.63后来改过）<br>4、端口号为22<br>5、身份认证选root密码为123456或b928382191<br>6、确认后先确定，然后在会话选择连接  <h3 id="2、调字体"><a href="#2、调字体" class="headerlink" title="2、调字体"></a>2、调字体</h3>文件–属性只是本主机的属性  <h3 id="3、调整rz和sz命令的默认路径"><a href="#3、调整rz和sz命令的默认路径" class="headerlink" title="3、调整rz和sz命令的默认路径"></a>3、调整rz和sz命令的默认路径</h3>属性–文件传输–使用以下路径–打开用zmodem<h2 id="2、xftp的使用方法（上传文件夹）"><a href="#2、xftp的使用方法（上传文件夹）" class="headerlink" title="2、xftp的使用方法（上传文件夹）"></a>2、xftp的使用方法（上传文件夹）</h2>可以直接新建文件传输（ctrl+alt+f）或者新建会话属性选择sftp协议<h2 id="3、xstart（调用图形界面）安装数据库需要远程调用"><a href="#3、xstart（调用图形界面）安装数据库需要远程调用" class="headerlink" title="3、xstart（调用图形界面）安装数据库需要远程调用"></a>3、xstart（调用图形界面）安装数据库需要远程调用</h2>1、xshell直接运行图形桌面<br>xhell 代码（root权限）gnome-terminal<br>2、直接打开软件xstart，新建会话ssh协议，运行成功会显示两个窗口<br>3、调用火狐浏览器 firefox &amp;     <h1 id="十六、centos7用户管理"><a href="#十六、centos7用户管理" class="headerlink" title="十六、centos7用户管理"></a>十六、centos7用户管理</h1>用ll或者stat /etc/passwd可以查看文件的属性包括用户权限<h2 id="1、用户账号"><a href="#1、用户账号" class="headerlink" title="1、用户账号"></a>1、用户账号</h2>1、用户分类<br>超级用户：root拥有对系统的最高的管理权限uid=0<br>普通用户：系统用户：uid：1-999（centos7）<br>本地用户：uid：1000+   500+（uid类似身份证号）<br>虚伪用户：伪用户：一般不用来登录系统，用来维持某个服务的正常运行例如：ftp，apache<br>2、用户与组：一对一，一对多，多对一，多对多  <h2 id="2、配置文件："><a href="#2、配置文件：" class="headerlink" title="2、配置文件："></a>2、配置文件：</h2>1、用户配置文件：/etc/passwd；记录用户的基本属性全部信息<br>2、用户组文件：/etc/group<br>3、用户对应的密码信息：/etc/shadow只有root有读取权限  <h2 id="3、用户管理"><a href="#3、用户管理" class="headerlink" title="3、用户管理"></a>3、用户管理</h2>1、用户命令：useradd<br>useradd -d“主目录” -u “UID” -g“初始组”-G“附加组”-s“登陆的shell”<br>2、添加登录用户  </li><li>添加一个名为Harry的用户，并使用bash作为登录的shell<br>useradd harry此命令自动创建harry组，并成为harry用户的默认主组，同时默认的默认登录shell是bash  </li><li>vim /etc/passwd    查看是否添加成功  </li><li>root:x:0:0:root:/root:/bin/bash<br>用户名：密码占位符：UID：GID：用户描述：用户主目录（bash中的“~”代表那个）：登录后使用的shell  </li><li>查看系统中，支持那些shell<br>cat /etc/shells    <h2 id="4、指定用户的UID：-u-用户UID"><a href="#4、指定用户的UID：-u-用户UID" class="headerlink" title="4、指定用户的UID：-u 用户UID"></a>4、指定用户的UID：-u 用户UID</h2>1、useradd -u 1100 oracle创建uid为1100的用户<br>2、查看id<br>id oracle或者tail -1 /etc/passwd<br>家目录：ls /home/oracle/<br>ls /home/oracle/ -a  <h2 id="5、指定用户家目录"><a href="#5、指定用户家目录" class="headerlink" title="5、指定用户家目录"></a>5、指定用户家目录</h2>useradd -d /opt/mk1 mk1<br>tail -1 /etc/passwd    <h2 id="6、指定用户的主组useradd-h查看提示"><a href="#6、指定用户的主组useradd-h查看提示" class="headerlink" title="6、指定用户的主组useradd -h查看提示"></a>6、指定用户的主组useradd -h查看提示</h2>1、tail -1 /etc/group默认创建用户的组和gid与用户名和uid相同<br>2、改为不一样：useradd -g xuegod xuegod2<br>3、id方式去查看：id xuegod2  <h2 id="7、指定用户的附属组（补充组）"><a href="#7、指定用户的附属组（补充组）" class="headerlink" title="7、指定用户的附属组（补充组）"></a>7、指定用户的附属组（补充组）</h2>useradd -G xuegod,harry,root xuegod3<br>id xuegod3<br>vim /etc/group在文件的最后去找<h2 id="8、adduser"><a href="#8、adduser" class="headerlink" title="8、adduser"></a>8、adduser</h2>which adduser 查看adduser路径<h2 id="9、删除用户"><a href="#9、删除用户" class="headerlink" title="9、删除用户"></a>9、删除用户</h2></li><li>r删除的时候，会同时删除用户的家目录和/var/mail下的目录<br>userdel xuegod4没有删除目录<br>userdel -r xuegod3把目录也删除  <h1 id="十七、shadow文件讲解-用户修改密码"><a href="#十七、shadow文件讲解-用户修改密码" class="headerlink" title="十七、shadow文件讲解-用户修改密码"></a>十七、shadow文件讲解-用户修改密码</h1><h2 id="1、密码的文件：head-3-etc-shadow"><a href="#1、密码的文件：head-3-etc-shadow" class="headerlink" title="1、密码的文件：head -3 /etc/shadow"></a>1、密码的文件：head -3 /etc/shadow</h2>1、用户名<br>2、被加密后的密码<br>已加密密码，分为三部分，<br>第一部分是表示使用哪种哈希算法；<br>第二部分是用于加密哈希的salt；<br>第三部分是已加密的哈希；<br>哈希算法：$1表示MD5；$6表示SHA-512；$5表示SHA-256<br>3、最近更改密码的日期等<h2 id="2、修改用户密码"><a href="#2、修改用户密码" class="headerlink" title="2、修改用户密码"></a>2、修改用户密码</h2>1、passwd oracle（更改用户oracle的密码）<br>2、 echo 123456 | passwd  –stdin xuegod<br>3、密码一样，sahdow中加密的hash值不一样，原因是salt值不一样<br>4、把两端加密互换还能登录<br>salt是passwd自动生成的      <h2 id="3、修改密码信息"><a href="#3、修改密码信息" class="headerlink" title="3、修改密码信息"></a>3、修改密码信息</h2>1、vim /etc/login.defs密码信息<br>2、egrep -v ‘’^$| ^#’’ /etc/login.defs 把不是#和空行开头的都过滤出来<br>3、cat /etc/default/useradd<br>4、更改密码让用户每次登录前必须更改密码<br>chage -d 0 mk<br>ssh <a href="mailto:&#109;&#x6b;&#64;&#x71;&#x39;&#50;&#46;&#x31;&#x36;&#56;&#x2e;&#49;&#x2e;&#54;&#51;">&#109;&#x6b;&#64;&#x71;&#x39;&#50;&#46;&#x31;&#x36;&#56;&#x2e;&#49;&#x2e;&#54;&#51;</a><br>5、用户的uid可以随便改（0权限最大）<br>vim /etc/passwd  <h2 id="4、更改用户主目录"><a href="#4、更改用户主目录" class="headerlink" title="4、更改用户主目录"></a>4、更改用户主目录</h2>usermod -m -d /mnt/market marked自动创建新目录并移动内容到新目录中<h2 id="5、添加说明信息"><a href="#5、添加说明信息" class="headerlink" title="5、添加说明信息"></a>5、添加说明信息</h2>usermod -c “hello world” xuegod<h2 id="6、出现不完整的shell提示符，如何处理"><a href="#6、出现不完整的shell提示符，如何处理" class="headerlink" title="6、出现不完整的shell提示符，如何处理"></a>6、出现不完整的shell提示符，如何处理</h2>cp /etc/skel/.bash* /home/xuegod/<br>chown xuegod:xuegod /home/xuegod/.bash*<br>su -xuegod  <h1 id="十八、进入centos7紧急模式恢复root密码"><a href="#十八、进入centos7紧急模式恢复root密码" class="headerlink" title="十八、进入centos7紧急模式恢复root密码"></a>十八、进入centos7紧急模式恢复root密码</h1>1、重启，按上下键，选择第一项，按下e键进行编辑<br>2、原来是ro改为rw init=/sysroot/bin/sh<br>3、按下ctrl-x启动进入紧急模式<br>4、切根chroot /sysroot（chroot用来在指定根目录下运行指令）<br>5、passwd 输密码<br>6、exit退出，reboot  <h1 id="十九、文件的基本权限"><a href="#十九、文件的基本权限" class="headerlink" title="十九、文件的基本权限"></a>十九、文件的基本权限</h1><h2 id="1、权限的作用"><a href="#1、权限的作用" class="headerlink" title="1、权限的作用"></a>1、权限的作用</h2>通过对文件设定权限可以达到以下三种访问限制权限：<br>1、只允许用户自己访问；<br>2、允许一个预先指定的用户组中的用户访问<br>3、允许系统中的任何用户访问<h2 id="2、查看权限"><a href="#2、查看权限" class="headerlink" title="2、查看权限"></a>2、查看权限</h2><h2 id="3、权限说明"><a href="#3、权限说明" class="headerlink" title="3、权限说明"></a>3、权限说明</h2>1、对于文件来说<br>r：读，w：写，x：执行<br>2、对于目录来说<br>r：读（看到目录里面有什么）ls<br>w：在目录里面建文件，删除，移动 touch   mkdir rm mv cp<br>x：进入cd cat  <h2 id="4、文件拥有者"><a href="#4、文件拥有者" class="headerlink" title="4、文件拥有者"></a>4、文件拥有者</h2>UGO：所有者-用户组-其它用户     <h2 id="5、常见几种文件权限组成"><a href="#5、常见几种文件权限组成" class="headerlink" title="5、常见几种文件权限组成"></a>5、常见几种文件权限组成</h2>rwx — —：文件所有者对文件具有读取、写入和执行的权限。  </li><li>rwx r– r–： 文件所有者具有读、写与执行的权限，用户组里用户及其他用户则具有读取的权限  </li><li>rw- rw- r-x：文件所有者与同组用户对文件具有读写的权限，而其他用户仅具有读取和执行的权限。<br>drwx–x—x： 目录所有者具有读写与进入目录的权限,其他用户近能进入该目录，却无法读取任何数据。<br>drwx——： 除了目录所有者具有完整的权限之外，其他用户对该目录完全没有任何权限。<br>rwx — —表示目录所有者本身具有的额权限，其它用户是无法进入的，root除外<br>你以什么用户身份登录，那么你创建的文件或目录，自动成为该文件的所属主和组  <h2 id="6、更改文件的属主和属组"><a href="#6、更改文件的属主和属组" class="headerlink" title="6、更改文件的属主和属组"></a>6、更改文件的属主和属组</h2>chown：可以用来改变文件（或目录）的属主<br>chgrp：用来改变文件（或目录）的默认属组<br>如果要对目录进行操作，加参数-R<br>语法：chown user:group filename   比如：chown hr:san a.txt  把文件的属主和属组改为hr,san<br>chown user filename  比如：chown san a.txt  把文件的属主改为san用户<br>chown :group filename  比如： chown :miao a.txt   把文件的属组改为miao这个组<br>chgrp hr filename 比如： chgrp hr f.txt  （拓展）  </li><li>R:递归（目录下的所有内容都更改，否则只修改目录）  <h2 id="7、修改权限：命令chmod"><a href="#7、修改权限：命令chmod" class="headerlink" title="7、修改权限：命令chmod"></a>7、修改权限：命令chmod</h2>chmod [对谁操作] [操作符] [赋于什么权限] 文件名<br>对谁操作：<br>u—-&gt; 用户user，表示文件或目录的所有者<br>g—-&gt;用户组group，表示文件或目录所属的用户组<br>o—-&gt;其它用户others<br>a—-&gt;所有用户all<br>操作符:<br>；+  #添加权限  ；  -  # 减少权限  ； =  #直接给定一个权限<br>权限：r w x<br>例如：[root@localhost changan]# touch 1.txt<br>[root@localhost changan]# ll 1.txt  </li><li>rw-r–r–. 1 root root 0 11月 28 15:05 1.  txt<br>[root@localhost changan]# chmod u-w 1.txt<br>[root@localhost changan]# ll 1.txt  </li><li>r–r–r–. 1 root root 0 11月 28 15:05 1.txt  <h2 id="8、使用八进制（0-7）数字表示权限法"><a href="#8、使用八进制（0-7）数字表示权限法" class="headerlink" title="8、使用八进制（0-7）数字表示权限法"></a>8、使用八进制（0-7）数字表示权限法</h2></li><li>– 000;–x 001;-w- 010;-wx 011;r– 100;r-x 101 rw- 110; rwx 111<br>chmod a+x 1.txt 给shell脚本加一个可执行权限<br>更多还是用数字 <h2 id="9、权限对目录的影响"><a href="#9、权限对目录的影响" class="headerlink" title="9、权限对目录的影响"></a>9、权限对目录的影响</h2>r列出目录的内容<br>w创建或删除目录中任意文件<br>x访问目录的内容<h2 id="10、为什么创建文件的默认权限是644"><a href="#10、为什么创建文件的默认权限是644" class="headerlink" title="10、为什么创建文件的默认权限是644"></a>10、为什么创建文件的默认权限是644</h2>文件默认权限666-umask值，目录默认权限777-umask值<br>永久生效，编辑用户的配置文件 vim .bash_profile<br>临时生效：umask权限补码  <h1 id="二十、文件的特殊权限：suid-sgid-sticky和文件拓展权限ACL"><a href="#二十、文件的特殊权限：suid-sgid-sticky和文件拓展权限ACL" class="headerlink" title="二十、文件的特殊权限：suid sgid sticky和文件拓展权限ACL"></a>二十、文件的特殊权限：suid sgid sticky和文件拓展权限ACL</h1>1、文件的特殊权限<br>SUID：一般用在可执行文件上，当用户执行该文件时，会临时拥有该执行文件的所有者权限（u+s或u=4）<br>SGID：新创建文件的所属组会继承上级目录的所属组（g+s或g=2）<br>Stickybit：粘滞位权限，针对目录，对文件无效，也叫防删除位（o+t或o=1）<br>2、ACL<br>[mk@xuegod63 ~]$ ll /tmp/a.txt   </li><li>rw-rwxr–+ 1 root root 8 5月   8 22:42 /tmp/a.txt (多一个+号)  <h1 id="二十一、创建一个让root都无法删除的文件"><a href="#二十一、创建一个让root都无法删除的文件" class="headerlink" title="二十一、创建一个让root都无法删除的文件"></a>二十一、创建一个让root都无法删除的文件</h1>1、Windows出现删除不了的文件用360粉碎<br>2、rm rf hack.sh（无法删除hack脚本）<br>原因：用xshell在后台添加attr拓展属性<br>chattr +i hack.sh<br>3、为什么删除不了，rehl6新增文件系统拓展属性<br>参数：a（append）只能追加内容 i    （immutable）不能被修改<br>4、lsatter hack.sh（发现里面多了i内容）<br>chatter -i hack.sh<br>echo aa &gt;&gt;hack.sh一切正常<br>5、chatter +a hack.sh 只能追加内容  <h1 id="二十二、使用rpm命令-安装-查看-卸载-rpm软件包"><a href="#二十二、使用rpm命令-安装-查看-卸载-rpm软件包" class="headerlink" title="二十二、使用rpm命令-安装-查看-卸载-rpm软件包"></a>二十二、使用rpm命令-安装-查看-卸载-rpm软件包</h1><h2 id="1、rpm软件包的管理"><a href="#1、rpm软件包的管理" class="headerlink" title="1、rpm软件包的管理"></a>1、rpm软件包的管理</h2>rpm包（例如ls /mnt/Packages/zsh-5.0.2-28.el7.x86_64.rpm）的获取方式<br>1、centos系统镜像光盘<br>2、网站rpmfind.net<br>3、比如安装mysql、nginx软件去<a href="https://www.mysql.com/mnt/Packages/zsh-5.0.2-28.el7.x86_64.rpm">https://www.mysql.com/mnt/Packages/zsh-5.0.2-28.el7.x86_64.rpm</a>  <h2 id="2、通过光盘获取"><a href="#2、通过光盘获取" class="headerlink" title="2、通过光盘获取"></a>2、通过光盘获取</h2>挂载 mount /dev/sr0 /mnt<br>卸载 umount /mnt或umount /dev/sr0 <h2 id="3、安装rpm软件（当一个rpm安装到系统上之后，信息通常会保存到ls-var-lib-rpm目录下）"><a href="#3、安装rpm软件（当一个rpm安装到系统上之后，信息通常会保存到ls-var-lib-rpm目录下）" class="headerlink" title="3、安装rpm软件（当一个rpm安装到系统上之后，信息通常会保存到ls /var/lib/rpm目录下）"></a>3、安装rpm软件（当一个rpm安装到系统上之后，信息通常会保存到ls /var/lib/rpm目录下）</h2>全名：在安装和更新升级时用<br>包名：对已安装过的软件进行操作             <h2 id="4、从本地安装"><a href="#4、从本地安装" class="headerlink" title="4、从本地安装"></a>4、从本地安装</h2>rpm    ls /mnt/Packages/zsh-5.0.2-28.el7.x86_64.rpm  (设置，iso开机时连接才能确保有Package)<br>没有的话去挂载mount /dev/cdrom /mnt<br>[root@localhost changan]# cat /etc/  shells<br>/bin/sh<br>/bin/bash<br>/sbin/nologin<br>/usr/bin/sh<br>/usr/bin/bash<br>/usr/sbin/nologin<br>/bin/tcsh<br>/bin/csh<br>/bin/zsh安装成功以后多一个zsh<br>rpm -q zsh看有无被安装  <h2 id="5、从网上下载直接安装centos-epel扩展源"><a href="#5、从网上下载直接安装centos-epel扩展源" class="headerlink" title="5、从网上下载直接安装centos epel扩展源"></a>5、从网上下载直接安装centos epel扩展源</h2>rpm -ivh+rpm超链接（ivh安装）  <h2 id="6、查询功能"><a href="#6、查询功能" class="headerlink" title="6、查询功能"></a>6、查询功能</h2>用法：rpm -q（query） 常与下面参数组合使用</li><li>a（all）  查询所有已安装的软件包  </li><li>f（file）系统文件名（查询系统文件所属哪个软件包），反向查询  </li><li>i  显示已经安装的rpm软件包信息，后面直接跟包名  </li><li>l（list）  查询软件包中文件安装的位置  </li><li>p  查询未安装软件包的相关信息，后面要跟软件的命名</li><li>R 查询软件包的依赖性<br>1、针对已被安装rpm -q zsh看有无被安装<br>2、查询已经安装包的详细信息：rpm -qpi /mnt/Packages/php-mysql-5.4.16-42.el7.x86_64.rpm<br>Summary     : A module for PHP   applications that use MySQL databases    #php使用mysql数据库的一个模块<br>3、针对没有被安装的包（加参数-p），从光盘镜像中查询<br>[root@xuegod63 mnt]# rpm -qpl  /mnt/Packages/zip-3.0-10.el7.x86_64.rpm  #查看rpm安装后，将生成哪些文件<br>rpm -ivh /mnt/Packages/php-mysql-5.4.16-42.el7.x86_64.rpm<br>rpm -qi lrzsz<h2 id="7、查看软件包内容是否修改，用于检验命令是否被黑客修改"><a href="#7、查看软件包内容是否修改，用于检验命令是否被黑客修改" class="headerlink" title="7、查看软件包内容是否修改，用于检验命令是否被黑客修改"></a>7、查看软件包内容是否修改，用于检验命令是否被黑客修改</h2>rpm -V包名<br>rpm -Vf文件路径<br>注：没有消息（或全是………）则没有被修改<br>查看系统中所有的包是否被修改<br>rpm -Va<br>rpm -Va &gt;rpm_check.txt列到txt文件中<br>检验时参考了 /var/lib/rpm目录下的rpm数据库信息  <h2 id="8、rpm包卸载和升级"><a href="#8、rpm包卸载和升级" class="headerlink" title="8、rpm包卸载和升级"></a>8、rpm包卸载和升级</h2>rpm -qa zsh<br>卸载：rpm -e zsh<br>忽略依赖关系，强制卸载 rpm -e –nodeps lrzsz<br>升级：rpm -Uvh /mnt/Packages/zsh-5.0.2-28.el7.x86_64.rpm  <h2 id="9、手动解决依赖关系"><a href="#9、手动解决依赖关系" class="headerlink" title="9、手动解决依赖关系"></a>9、手动解决依赖关系</h2>rpm -ivh /mnt/Packages/mariadb-server-5.5.56-2.el7.x86_64.rpm<br>分别安装<h1 id="二十三、yum的使用（yum自动解决依赖关系，并且一次安装所有依赖的软体包）"><a href="#二十三、yum的使用（yum自动解决依赖关系，并且一次安装所有依赖的软体包）" class="headerlink" title="二十三、yum的使用（yum自动解决依赖关系，并且一次安装所有依赖的软体包）"></a>二十三、yum的使用（yum自动解决依赖关系，并且一次安装所有依赖的软体包）</h1>yum：解决依赖关系问题，自动下载软件包，基于C/S架构（client s=ftp\http\file）<h2 id="1、配置yum源"><a href="#1、配置yum源" class="headerlink" title="1、配置yum源"></a>1、配置yum源</h2><h3 id="1、配置本地yum源"><a href="#1、配置本地yum源" class="headerlink" title="1、配置本地yum源"></a>1、配置本地yum源</h3>1、挂载镜像mount /dev/cdrom /mnt/<br>cd /etc/yum.repos.d/<br>2、配置yum源文件<br>vim etc/yum.repos.d/centos7.repo必须以.repo结尾，插入以下内容<br>[centos7]       在本服务器上必须为1<br>name=CentOS7<br>baseurl=file:///mnt<br>enable=1        1表示启用yum源，0为禁用<br>gpgcheck=0    0不校验<br>gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7  如果要校验进行  <h2 id="2、配置网络yum源"><a href="#2、配置网络yum源" class="headerlink" title="2、配置网络yum源"></a>2、配置网络yum源</h2>1、[root@localhost ~]# wget -O /etc/yum.repos.d/CentOS-Base.repo <a href="http://mirrors.aliyun.com/repo/Centos-7.repo">http://mirrors.aliyun.com/repo/Centos-7.repo</a><br>2、#wget 下载文件 ，-O 将wget下载的文件，保存到指定的位置，保存时可以重新起一个名字，或者直接写一个要保存的路径，这样还用原来的文件名。<br>3、查看：vim /etc/yum.repos.d/CentOS-Base.repo<br>4、<a href="http://mirrors.aliyun.com/centos/$releasever/os/$basearch/">http://mirrors.aliyun.com/centos/$releasever/os/$basearch/</a><br>如果下载后不能用，解决：打开阿里云链接：<a href="http://mirrors.aliyun.com/centos/">http://mirrors.aliyun.com/centos/</a> 找到centos7最新版本号<br>5、然后执行sed全文替换<br>[root@localhost ~]# sed -i  ‘s/$releasever/7.4.1708/g’ /etc/yum.repos.d/CentOS-Base.repo<br>[root@localhost ~]# yum clean all    #清空一下yum缓存<br>[root@localhost ~]# yum list         #查看列表  <h2 id="3、yum使用"><a href="#3、yum使用" class="headerlink" title="3、yum使用"></a>3、yum使用</h2>yum常用操作：<br>[root@xuegod63 ~]#  yum install -y httpd   #安装软件包， -y 直接安装<br>[root@xuegod63 ~]#  yum -y update    #升级软件包，改变软件设置和系统设置,系统版本内核都升级<br>[root@xuegod63 ~]#  yum -y upgrade   #升级软件包，不改变软件设置和系统设置，系统版本升级，内核不改变<br>[root@xuegod63 ~]#  yum -y update  # 不加任何包，表示整个系统进行升级<br>[root@xuegod63 ~]#  yum info  httpd    #查询rpm包作用<br>[root@xuegod63 ~]#  yum provides /usr/bin/find  #查看命令是哪个软件包安装的<br>[root@xuegod63 ~]#  yum -y remove  包名    #卸载包<br>[root@xuegod63 ~]#  yum search keyword   #按关键字搜索软件包<br>yum报错，注意的几个小问题：  </li><li>确定光盘是否链接，光盘是否挂载</li><li>配置文件中格式是否正确，字母，符号有没有少写,挂载点和配置文件中设置的是否一致</li><li>网络源需要联网，操作和RPM类似，只是会自动安装依赖项。</li><li>yum安装开发工具软件包组</li><li>yum grouplist查看有哪些软件包组<h1 id="二十四、tar源码包管理-srpm源码包安装方法"><a href="#二十四、tar源码包管理-srpm源码包安装方法" class="headerlink" title="二十四、tar源码包管理-srpm源码包安装方法"></a>二十四、tar源码包管理-srpm源码包安装方法</h1><h2 id="1、源码安装nginx"><a href="#1、源码安装nginx" class="headerlink" title="1、源码安装nginx"></a>1、源码安装nginx</h2>1、编译环境gcc和gcc-c++编译器，make<br>2、准备软件：nighx-1.12.2.tar.gz<br>部署Nginx # yum -y install gcc gcc-c++ make zlib-devel pcre pcre-devel openssl-devel<h2 id="2、上传Nginx"><a href="#2、上传Nginx" class="headerlink" title="2、上传Nginx"></a>2、上传Nginx</h2>源码编译：./configure  ， make  ，make install, # ./configure  </li><li>指定安装路径，例如 –prefix=/usr/local/nginx</li><li>启用或禁用某项功能, 例如 –enable-ssl, –disable-filter – -with-http_ssl_module</li><li>和其它软件关联，例如–with-pcre</li><li>检查安装环境，例如是否有编译器gcc，是否满足软件的依赖需求最终生成：Makefile  </li><li> make  -j 4   #按Makefile文件编译，可以使用-j 4指定4核心CPU编译，提升速度</li><li> make install  #按Makefile定义的文件路径安装</li><li> make clean //清除上次的make命令所产生的object和Makefile文件。使用场景：当需要重新执行configure时，需要执行make clean  <h2 id="3、删除源码包"><a href="#3、删除源码包" class="headerlink" title="3、删除源码包"></a>3、删除源码包</h2></li><li>-prefix=/usr/local/nginx，直接删除指定的目录就可以<h2 id="4、源码编译出错的解决方案"><a href="#4、源码编译出错的解决方案" class="headerlink" title="4、源码编译出错的解决方案"></a>4、源码编译出错的解决方案</h2>./configure<br>方法1：[root@xuegod63 Packages]# rpm -ivh ext2fs^C   #按两下tab键。 一般情况，ext2fs就是要安装的软件包的名字开头。如果存在 自动补全<br>方法2：[root@xuegod63 Packages]# ls <em>ext2fs</em>   #查找完整关键字<br>方法3：[root@xuegod63 Packages]# ls <em>2fs</em>    #查找部分关键字<br>方法4:  终极大招<a href="http://www.rpmseek.com/index.html">http://www.rpmseek.com/index.html</a><br>方法5：yum search ext2fs（关键字）<h2 id="5、安装了库又找不到，需要安装库的开发文件"><a href="#5、安装了库又找不到，需要安装库的开发文件" class="headerlink" title="5、安装了库又找不到，需要安装库的开发文件"></a>5、安装了库又找不到，需要安装库的开发文件</h2>rpm -ivh /mnt/Packages/e2fsprogs-devel-1.41.12-11.el6.x86_64.rpm<h2 id="6、总结-软件安装方法特点："><a href="#6、总结-软件安装方法特点：" class="headerlink" title="6、总结,软件安装方法特点："></a>6、总结,软件安装方法特点：</h2>rpm＋yum：方便，软件版本低。稳定性好、管理方便。性能稍差。<br>源码编译安装：麻烦，软件版本新，可以定制。稳定性稍差、管理稍差。性能好。<br>源码编译安装：主要是安装LAMP或LNMP 架构时，我们会用  <h1 id="二十五、Docker概述-（现在软件包必须和系统相关，docker镜像一次编译，到处运行）"><a href="#二十五、Docker概述-（现在软件包必须和系统相关，docker镜像一次编译，到处运行）" class="headerlink" title="二十五、Docker概述 （现在软件包必须和系统相关，docker镜像一次编译，到处运行）"></a>二十五、Docker概述 （现在软件包必须和系统相关，docker镜像一次编译，到处运行）</h1>1、linux -》 JVM-》 java程序 app<br>linux-》 docker-》把app做成镜像，运行起来<br>windows-》 docker-》把app做成镜像，运行起来<br>IOS 苹果-》 docker-》把app做成镜像，运行起来<br>2、docker官网  <a href="https://www.docker.com/">https://www.docker.com/</a><br><a href="https://github.com/docker/docker">https://github.com/docker/docker</a><br>3、docker相对于VM虚拟机，少了虚拟机操作系统这一层，所以docker效率比虚拟机高<br>4、docker架构<br>工作流程：运行docker–下载centos镜像到本地–启动docker容器实例  <h1 id="二十六、部署docker容器虚拟化平台"><a href="#二十六、部署docker容器虚拟化平台" class="headerlink" title="二十六、部署docker容器虚拟化平台"></a>二十六、部署docker容器虚拟化平台</h1><h2 id="1、-实验环境准备"><a href="#1、-实验环境准备" class="headerlink" title="1、  实验环境准备"></a>1、  实验环境准备</h2>实战1：部署docker容器虚拟化平台<br>实验环境： CENTOS7.4  64位  IP： 192.168.1.63<br>把docker-rpm.tar.gz上传到linux系统上，我已经提下载好安装包<br>[root@xuegod63 ~]# tar zxvf docker-rpm.tar.gz<br>docker.io ,docker ,docker-engine 三个docker发行版本。  </li></ul><p>配置本地yum源：<br>[root@xuegod63 ~]# vim  /etc/yum.repos.d/docker-rpm.repo<br>[docker-rpm]<br>name=docker-rpm<br>baseurl=file:///root/docker-rpm<br>enable=1<br>gpgcheck=0<br>[root@xuegod63 yum.repos.d]# mv CentOS-* /opt/   #移出centos自带的yum源<br>安装 docker软件包<br>[root@xuegod63 yum.repos.d]# yum -y install docker<br>方法2： 直接使用centos系统自带的yum源安装，比较慢<br>[root@xuegod63 yum.repos.d]# yum -y install docker   </p><p>启动docker平台：<br>[root@xuegod63 ~]# systemctl start docker   #启动 docker 服务<br>[root@xuegod63 ~]# systemctl enable docker  #设置开机启动docker服务</p><p>[root@xuegod63 ~]# docker version    #显示 Docker 版本信息</p><h2 id="2、下载centos镜像到本地"><a href="#2、下载centos镜像到本地" class="headerlink" title="2、下载centos镜像到本地"></a>2、下载centos镜像到本地</h2><h3 id="1、外网下载"><a href="#1、外网下载" class="headerlink" title="1、外网下载"></a>1、外网下载</h3><p>1、搜索docker search centos<br>2、如果official为ok，则说明可以使用<br>3、从公网docker hub拉取image（如果报错则是网络的问题）  </p><h3 id="2、把之前下载好的image镜像导入image："><a href="#2、把之前下载好的image镜像导入image：" class="headerlink" title="2、把之前下载好的image镜像导入image："></a>2、把之前下载好的image镜像导入image：</h3><p>把docker.io-centos.tar  镜像上传到linux上<br>docker pull docker.io/centos</p><h3 id="3、方法3：直接下载其他站点的镜像"><a href="#3、方法3：直接下载其他站点的镜像" class="headerlink" title="3、方法3：直接下载其他站点的镜像"></a>3、方法3：直接下载其他站点的镜像</h3><p>[root@xuegod63 ~]# docker pull hub.c.163.com/library/tomcat:latest<br>[root@xuegod63 ~]# docker images</p><h1 id="二十七、docker平台的使用方法（docker无终端，如果不指定，直接运行到后台）"><a href="#二十七、docker平台的使用方法（docker无终端，如果不指定，直接运行到后台）" class="headerlink" title="二十七、docker平台的使用方法（docker无终端，如果不指定，直接运行到后台）"></a>二十七、docker平台的使用方法（docker无终端，如果不指定，直接运行到后台）</h1><p>1、运行一个 container并加载镜像centos，运行起来这个实例后，在实例中执行 /bin/bash命令<br>docker run -it centos: latest /bin/bash<br>运行失败：网络问题<br>cat /proc/sys/net/ipv4/ip_forward（查看ip4值，如果不是1改为1）<br>sysctl -p<br>输出：net.ipv4.ip_forward=1<br>2、exit退出<br>3、在 container 中启动一个长久运行的进程，不断向stdin输出 hello world 。模拟一个后台运行的服务<br>docker run -d centos: lastest bash -c “while true;do echo hello world;    sleep 1; done”（centos: lastest镜像的名字）<br>4、运行服务<br>从容器中取日志，查看输出的内容（docker  logs   容器实例的Name/ID）<br>如果不知道id docker ps（列出所有运行的容器）<br>docker ps -a（列出所有容器）<br>docker images（列出所有本地镜像）<br>5、杀死一个容器<br>docker kill id<br>6、启动、停止、重启容器<br>docker run -d 镜像名字： /bin/sh/ -c ….<br>docker stop 容器id<br>docker start 容器id<br>7、删除镜像<br>docker rm（不能删除正在运行的，如果强制删除docker rm -f）</p><h1 id="二十八、docker镜像制作方法"><a href="#二十八、docker镜像制作方法" class="headerlink" title="二十八、docker镜像制作方法"></a>二十八、docker镜像制作方法</h1><h2 id="1、docker-image-的制作两种方法"><a href="#1、docker-image-的制作两种方法" class="headerlink" title="1、docker image 的制作两种方法"></a>1、docker image 的制作两种方法</h2><p>1、docker commit 保存container的当前状态到image后，然后生成对应的image<br>2、docker build 使用 dockerfile 文件自动化制作image     </p><h2 id="2、docker-commit"><a href="#2、docker-commit" class="headerlink" title="2、docker commit"></a>2、docker commit</h2><p>1、创建一个安装好apache工具的容器镜像<br>2、根据容器当前状态做一个image镜像：创建一个安装了apache工具的centos镜像<br>3、docker run -it docker.io/centos:latest /bin/bash<br>4、yum -y install  httpd   #在 container 中安装 apache 软件包  </p><h2 id="3、创建start-sh脚本启动httpd服务和apache默认首页Index-html文件"><a href="#3、创建start-sh脚本启动httpd服务和apache默认首页Index-html文件" class="headerlink" title="3、创建start.sh脚本启动httpd服务和apache默认首页Index.html文件"></a>3、创建start.sh脚本启动httpd服务和apache默认首页Index.html文件</h2><p>1、创建脚本<br>echo “/usr/sbin/httpd -DFOREGROUND” &gt; start.sh<br>2、给一个执行权限<br>chmod a+x start.sh<br>3、创建index.html文件<br>echo “docker image build test” &gt; index.html  </p><h2 id="4、使用命令bulid来创建新的image"><a href="#4、使用命令bulid来创建新的image" class="headerlink" title="4、使用命令bulid来创建新的image"></a>4、使用命令bulid来创建新的image</h2><p>docker build -t docker.io/cnetos: httpd ./  </p><h2 id="5、docker镜像-应用-程序-库"><a href="#5、docker镜像-应用-程序-库" class="headerlink" title="5、docker镜像=应用/程序+库"></a>5、docker镜像=应用/程序+库</h2><h2 id="6、发布镜像docker"><a href="#6、发布镜像docker" class="headerlink" title="6、发布镜像docker"></a>6、发布镜像docker</h2><p>1、save image to tarball<br>保存 Image 到 tar 包<br>语法：docker save -o 导出的镜像名.tar  本地镜像名：镜像标签<br>2、push image to docker hub  </p><ul><li>Signup on docker hub &amp; create repo    注册一个帐号<br><a href="https://hub.docker.com/">https://hub.docker.com/</a>    </li><li>Login to docker hub   # docker login -u userabc -p abc123 -e <a href="mailto:&#117;&#115;&#101;&#x72;&#97;&#x62;&#64;&#x67;&#x6d;&#97;&#105;&#x6c;&#x2e;&#x63;&#111;&#109;">&#117;&#115;&#101;&#x72;&#97;&#x62;&#64;&#x67;&#x6d;&#97;&#105;&#x6c;&#x2e;&#x63;&#111;&#109;</a>     </li></ul><p>3、Push image to docker hub   #上传镜像# docker push centos:httpd<br>4、Pull image from docker hub   #下载镜像# docker pull userabc/centos:httpd     #  用户名/镜像名  </p><h1 id="二十九、容器端口映射"><a href="#二十九、容器端口映射" class="headerlink" title="二十九、容器端口映射"></a>二十九、容器端口映射</h1><p>1、docker images<br>ls<br>docker run -d -p 80:80  docker.io/centos:httpd 87fadc0249a96736f588f16b7d3ad662ef3536a06d7a74115cd7c76546ed3a22<br>注： -p 物理机的80端口:容器实例的80端口  ，把容器中的80端口映射到物理机上的80端 口<br>2、访问正在运行的container容器<br>docker exec -it &lt;container id | name&gt; /bin/bash  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;基本命令&quot;&gt;&lt;a href=&quot;#基本命令&quot; class=&quot;headerlink&quot; title=&quot;基本命令&quot;&gt;&lt;/a&gt;基本命令&lt;/h1&gt;&lt;p&gt;1、i：进入插入模式&lt;br&gt;2、保存：先按ESC键，再输入：wq&lt;br&gt;3、set nu查看行号&lt;br&gt;4、q！不保存退出&lt;</summary>
      
    
    
    
    
    <category term="linux" scheme="https://rihiko.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>毕设学习</title>
    <link href="https://rihiko.github.io/2021/01/19/%E6%AF%95%E8%AE%BE%E5%AD%A6%E4%B9%A0/"/>
    <id>https://rihiko.github.io/2021/01/19/%E6%AF%95%E8%AE%BE%E5%AD%A6%E4%B9%A0/</id>
    <published>2021-01-19T03:20:14.000Z</published>
    <updated>2021-01-29T13:52:28.561Z</updated>
    
    <content type="html"><![CDATA[<h1 id="网站搭建"><a href="#网站搭建" class="headerlink" title="网站搭建"></a>网站搭建</h1><p><a href="https://www.bilibili.com/video/BV1rJ411d7qs?p=4">djgao框架</a><br><a href="https://www.bilibili.com/video/BV1Fx411d7Eb?p=4">Ubuntu MySQL数据库</a><br><a href="https://www.bilibili.com/video/BV1Vt411z7wy?p=3">windows MySQL数据库</a><br><a href="https://www.bilibili.com/video/BV1v7411R7mp/?spm_id_from=333.788.recommend_more_video.0">ECharts数据可视化项目</a></p><h1 id="深度学习"><a href="#深度学习" class="headerlink" title="深度学习"></a>深度学习</h1><p><a href="https://www.bilibili.com/video/BV1Lx411j7ws?from=search&seid=18345481475633435180">tensorflow搭建神经网络</a><br><a href="https://www.bilibili.com/video/BV164411m79z?p=4">吴恩达深度学习课程第一课 — 神经网络与深度学习</a><br><a href="https://www.bilibili.com/video/BV164411S78V?p=14">吴恩达机器学习经典名课</a>  </p><h1 id="python"><a href="#python" class="headerlink" title="python"></a>python</h1><p><a href="https://www.bilibili.com/video/BV1D4411U7bq?p=14">python云端</a><br><a href="https://www.bilibili.com/video/BV1ha4y1H7sx?p=3">python爬虫</a><br><a href="https://www.bilibili.com/video/BV1ps411x7rm?from=search&seid=2033601188766898335">python数据可视化</a><br><a href="https://www.bilibili.com/video/BV1rK4y1V7Pv?p=3">Ubuntu安装TensorFlow</a></p><h1 id="图像处理"><a href="#图像处理" class="headerlink" title="图像处理"></a>图像处理</h1><p><a href="https://www.bilibili.com/video/BV16K411W7x9?from=search&seid=9670843360083724597">opencv</a></p><h1 id="文章"><a href="#文章" class="headerlink" title="文章"></a>文章</h1><p><a href="https://www.anleenoxu.top/archives/308.html">计算机视觉“目标检测”方向历年论文整理</a><br><a href="https://www.cnblogs.com/HL-space/p/10888556.html">基于卷积神经网络的面部表情识别(Pytorch实现)—-台大李宏毅机器学习作业3(HW3)</a>  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;网站搭建&quot;&gt;&lt;a href=&quot;#网站搭建&quot; class=&quot;headerlink&quot; title=&quot;网站搭建&quot;&gt;&lt;/a&gt;网站搭建&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1rJ411d7qs?p=4&quot;&gt;djga</summary>
      
    
    
    
    
    <category term="实用" scheme="https://rihiko.github.io/tags/%E5%AE%9E%E7%94%A8/"/>
    
  </entry>
  
  <entry>
    <title>如何高效搜索github</title>
    <link href="https://rihiko.github.io/2021/01/18/%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E6%90%9C%E7%B4%A2github/"/>
    <id>https://rihiko.github.io/2021/01/18/%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E6%90%9C%E7%B4%A2github/</id>
    <published>2021-01-18T03:20:14.000Z</published>
    <updated>2021-01-23T13:03:16.633Z</updated>
    
    <content type="html"><![CDATA[<p>gitbub如何高效搜索 （spring boot）为例<br>1、名字中带spring boot<br>in:name spring boot<br>2、下载数大于3000<br>in:name spring boot stars:&gt;3000<br>3、在readme里面搜<br>in:readme spring boot<br>4、在描述中搜<br>in:description 微服务 language:java pushed:&gt;2019-09-03<br>5、python爬虫<br>in:description 爬虫 language:python stars:&gt;1000 pushed:&gt;2019-02</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;gitbub如何高效搜索 （spring boot）为例&lt;br&gt;1、名字中带spring boot&lt;br&gt;in:name spring boot&lt;br&gt;2、下载数大于3000&lt;br&gt;in:name spring boot stars:&amp;gt;3000&lt;br&gt;3、在readm</summary>
      
    
    
    
    
    <category term="实用" scheme="https://rihiko.github.io/tags/%E5%AE%9E%E7%94%A8/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://rihiko.github.io/2021/01/17/hello-world/"/>
    <id>https://rihiko.github.io/2021/01/17/hello-world/</id>
    <published>2021-01-17T02:16:35.898Z</published>
    <updated>2021-01-17T02:16:35.898Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
